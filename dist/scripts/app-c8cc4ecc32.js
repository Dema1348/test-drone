!function(){"use strict";function e(e,t,n){e.state("app.pages.rules",{"abstract":!0,url:"/rules"}).state("app.pages.rules.create",{url:"/create",params:{rule:null},views:{"content@app":{templateUrl:"app/main/pages/rules/rules-create/rules-create.html",controller:"RulesCreateController as vm"}}}).state("app.pages.rules.list",{url:"/list",views:{"content@app":{templateUrl:"app/main/pages/rules/rules-list/rules-list.html",controller:"RulesListController as vm"}}}),n.saveItem("rules",{title:"Reglas",icon:"icono-medir2-HaibuSmart",weight:5}),n.saveItem("rules.list",{title:"Ver Reglas",state:"app.pages.rules.list"}),n.saveItem("rules.create",{title:"Crear Regla",state:"app.pages.rules.create"})}e.$inject=["$stateProvider","$translatePartialLoaderProvider","msNavigationServiceProvider"],angular.module("app.pages.rules",[]).config(e)}(),function(){"use strict";function e(e,t,n,a,o,r,i,s,d){function l(){p.rules=[],p.query={limit:5,page:1,filter:""},p.filter={options:{debounce:500}},p.options={rowSelection:!1,multiSelect:!1,autoSelect:!1,decapitate:!1,largeEditDialog:!1,boundaryLinks:!1,limitSelect:!0,pageSelect:!0},p.promise=g.promise,c()}function c(){d.getRules().then(function(e){r.debug(e),p.rules=e})["finally"](function(){g.resolve()})}function u(){a.go("app.pages.rules.create")}function m(e,t){a.go("app.pages.rules.create",{rule:t})}var p=this,g=e.defer();p.devices=s,p.goCreate=u,p.editRule=m,l()}e.$inject=["$q","$rootScope","$scope","$state","$timeout","$log","$mdDialog","Devices","managerDeviceService"],angular.module("app.pages.rules").controller("RulesListController",e)}(),function(){"use strict";function e(e,t,n,a,o,r,i,s,d,l){function c(){if(f.rule={},f.condition={},o.rule){f.isEdit=!0;var e=angular.copy(o.rule);f.rule.name=e.name,f.rule.id=e.id,f.rule.description=e.description,f.rule.device=_.find(f.devices,function(t){return t.deviceId===e.deviceId}),f.rule.device&&u();var t=e.condition.split(" ");f.condition.property=t[0],f.condition.operation=t[1];var n=angular.copy(t[2]);_.isNumber(parseInt(t[2]))&&!_.isNaN(parseInt(t[2]))?(f.condition.comparison="static",f.condition.propertyComparison=parseInt(n),i.debug("is Number")):(f.condition.comparison="property",f.condition.propertyComparison=n),i.debug(f.condition)}}function u(){f.condition={},t.loader=!0,l.getLastEvent(f.rule.device)["finally"](function(){t.loader=!1})}function m(e){var n=angular.copy(f.rule);n.condition=f.condition.property+" "+f.condition.operation+" "+f.condition.propertyComparison,n.deviceId=n.device.deviceId,delete n.device,n.disabled=!1,t.loader=!0,i.debug(n),l.addRule(n).then(function(t){g(e,t)})["finally"](function(){t.loader=!1})}function p(e){t.loader=!0,l.deleteRule(f.rule).then(function(t){v(e,t)})["finally"](function(){t.loader=!1})}function g(e,t){s.show(s.alert().parent(angular.element(document.querySelector("document.body"))).clickOutsideToClose(!1).title("Agregar Regla").textContent(f.isEdit?"Se ha actualizado la regla "+t.condition+" con éxito.":"Se ha creado la regla "+t.condition+" con éxito.").ariaLabel("Agregar de Nodo").ok("Aceptar").targetEvent(e)).then(function(){a.go("app.pages.rules.list")})}function v(e,t){s.show(s.alert().parent(angular.element(document.querySelector("document.body"))).clickOutsideToClose(!1).title("Eliminar Regla").textContent("Se ha eliminado con éxito la regla.").ariaLabel("Agregar de Nodo").ok("Aceptar").targetEvent(e)).then(function(){a.go("app.pages.rules.list")})}var f=this;f.devices=d,f.operations=[">",">=","<","<=","==","!="],f.comparisons=[{id:"static",text:"Valor estatico"},{id:"property",text:"Propiedad"}],f.deleteRule=p,f.changeDevice=u,f.saveRule=m,c()}e.$inject=["$q","$rootScope","$scope","$state","$stateParams","$timeout","$log","$mdDialog","Devices","managerDeviceService"],angular.module("app.pages.rules").controller("RulesCreateController",e)}(),function(){"use strict";function e(e,t,n){e.state("app.pages.nodes",{url:"/list",views:{"content@app":{templateUrl:"app/main/pages/nodes/nodes-list/nodes-list.html",controller:"NodesListController as vm"}}}),n.saveItem("nodes",{title:"Ver Nodos",icon:"icono-senal2-HaibuSmart",state:"app.pages.nodes"})}e.$inject=["$stateProvider","$translatePartialLoaderProvider","msNavigationServiceProvider"],angular.module("app.pages.nodes",[]).config(e)}(),function(){"use strict";function e(e,t,n,a,o,r,i,s,d,l,c,u,m,p){function g(){angular.forEach(T.devices,function(e){e.loadEvent=!0,l.getLastEvent(e).then(function(t){e.event=t,m.checkOldAlert(e)})["catch"](function(e){r.debug("sin cache"+e)})["finally"](function(){e.loadEvent=!1})})}function v(e,t){a.go("app.pages.home",{device:t})}function f(e,t){i.show({controller:_,controllerAs:"vm",templateUrl:"app/main/pages/nodes/nodes-list/nodes-create.html",parent:angular.element(document.body),targetEvent:e,SelectDevice:t,Devices:T.devices,clickOutsideToClose:!0,fullscreen:!0}).then(function(t){if(t.update)y(e,t.response);else{var n=t.device;p.onStartWatchDevice(n),b(e,n),h(e,n)}})}function h(e,t){i.show(i.alert().parent(angular.element(document.querySelector("document.body"))).clickOutsideToClose(!1).title("Registrar Nodo").htmlContent('Tu nodo ha sido registrado con éxito, tu cable de autentificación es <span class="text-bold">'+t.authToken+'</span>.<br>Para configurar tu nodo correctamente, debes ocupar la id  <span class="text-bold">'+t.deviceId+'</span> y el tipo de nodo es <span class="text-bold">'+t.typeId+"</span>.").ariaLabel("Registrar Nodo").ok("Aceptar").targetEvent(e)).then(function(){})}function y(e,t){i.show(i.alert().parent(angular.element(document.querySelector("document.body"))).clickOutsideToClose(!1).title("Editar Nodo").htmlContent("Tu nodo ha sido actualizado con éxito.").ariaLabel("Editar Nodo").ok("Aceptar").targetEvent(e)).then(function(){})}function b(e,t){t.loadEvent=!0,l.refreshLastEvent(t).then(function(e){t.event=e,m.checkOldAlert(t)})["catch"](function(e){r.debug("Sin cache",e)})["finally"](function(){t.loadEvent=!1})}function S(e,n){var a=i.confirm().title("¿Está seguro de eliminar el nodo?").htmlContent("El nodo <b>"+n.name+" </b> sera eliminado.").ariaLabel("borrar nodo").targetEvent(e).ok("ACEPTAR").cancel("CANCELAR");i.show(a).then(function(){t.loader=!0,l.unregister(n).then(function(t){C(e,t)})["finally"](function(){t.loader=!1})})}function w(e,t){i.show(i.alert().parent(angular.element(document.querySelector("document.body"))).clickOutsideToClose(!1).title("Configurar el nodo").htmlContent('El nodo se debe configurar con los siguientes parametros, id del nodo <span class="text-bold">'+t.deviceId+'</span> y con el tipo <span class="text-bold">'+t.typeId+"</span>.").ariaLabel("Compartir nodo").ok("Aceptar").targetEvent(e))}function C(e,t){i.show(i.alert().parent(angular.element(document.querySelector("document.body"))).clickOutsideToClose(!1).title("Eliminar nodo").textContent("Se ha eliminado el nodo con éxito.").ariaLabel("Dejar de seguir").ok("Aceptar").targetEvent(e))}function _(a,o,r,i,s,d,l,c,u,m){function p(){a.hide()}function g(){a.cancel()}function v(e){t.loader=!0;var n=angular.copy(h.device);m.isEmpty(n.authToken)&&delete n.authToken,i.debug("New node register",n),i.debug("-------------------------"),u.register(n).then(function(e){a.hide({device:e,update:!1})})["catch"](function(e){i.debug(e)})["finally"](function(){t.loader=!1})}function f(n){t.loader=!0;var o=angular.copy(h.device);i.debug("Update node",o),i.debug("-------------------------"),e.all([u.updateLocation(o),u.update(o)]).then(function(e){for(var t=0;t<h.devices.length;t++)if(h.devices[t].id===o.id){h.devices[t]=angular.copy(h.device);break}a.hide({response:e,update:!0})})["catch"](function(e){i.debug(e)})["finally"](function(){t.loader=!1})}var h=this;h.device=angular.copy(o),h.devices=r,h.hide=p,h.cancel=g,h.register=v,h.update=f,h.mapStyle=c.mapStyle(),h.marker={options:{draggable:!0,icon:"/assets/images/icons/salmon.png"}},h.device?h.title="Editar Nodo":(h.title="Registrar Nodo",h.newDevice=!0,h.device={location:""},h.device.location={latitude:-33.422431,longitude:-70.614143}),l.then(function(e){var t={};t=h.device.location,h.searchbox={template:"searchbox.tpl.html",options:{autocomplete:!0,scrollwheel:!0,componentRestrictions:{country:"cl"}},events:{places_changed:function(e){var t=e.getPlaces();0!=t.length&&(h.device.location={latitude:t[0].geometry.location.lat(),longitude:t[0].geometry.location.lng()},h.map.center={latitude:t[0].geometry.location.lat(),longitude:t[0].geometry.location.lng()})}}},h.map={options:{disableDefaultUI:!1,styles:h.mapStyle,disableDoubleClickZoom:!0},center:{latitude:t.latitude||-41.486373,longitude:t.longitude||-72.937377},zoom:10,events:{dblclick:function(e,t,a){var o=a[0],r=o.latLng.lat(),i=o.latLng.lng();h.device.location={latitude:r,longitude:i},n.$apply()}}}})}_.$inject=["$mdDialog","SelectDevice","Devices","$log","Device","LoopBackAuth","uiGmapGoogleMapApi","HelperService","managerDeviceService","_"];var T=this;T.devices=s,T.sensors=d,T.dialogDevice=f,T.refreshLastEvent=b,T.config=w,T.unregister=S,T.detalle=v,g(),n.$on("update",function(e,t){var n=c.find(T.devices,function(e){return e.deviceId===t.deviceId});o(function(){n&&(n.event=t,console.log(n.event),u.changeIconMarker(n,T.sensors)),r.debug(n)})}),n.$on("$destroy",function(){})}e.$inject=["$q","$rootScope","$scope","$state","$timeout","$log","$mdDialog","Devices","UNITS","managerDeviceService","_","HelperService","AlertService","MQTTUtils"],angular.module("app.pages.nodes").controller("NodesListController",e)}(),function(){"use strict";function e(e,t,n,a,o,r,i,s,d){function l(t){var n=angular.copy(u.registerForm);n.location=u.map.center,d.isEmpty(n.authToken)&&delete n.authToken,e.debug("New node register",n),e.debug("-------------------------"),s.register(n).then(function(n){e.debug("New node register response",n),e.debug("-------------------------"),c(t,n)})["catch"](function(t){e.debug(t)})}function c(e,a){n.show(n.alert().parent(angular.element(document.querySelector("document.body"))).clickOutsideToClose(!1).title("Registro de Nodo").textContent("Tu nodo se ha registrado con éxito, tu cable de autentificación es: "+a.authToken).ariaLabel("Registro de Nodo").ok("Aceptar").targetEvent(e)).then(function(){t.go("app.pages.home")})}var u=this;u.sendForm=l,u.registerForm={},u.mapStyle=i.mapStyle(),u.options={icon:"/assets/images/icons/salmon.png"},r.then(function(t){var n={enableHighAccuracy:!0};navigator.geolocation.getCurrentPosition(function(e){u.map.center={latitude:e.coords.latitude,longitude:e.coords.longitude}},function(t){e.debug("Unable to get location: "+t.message)},n),u.map={options:{disableDefaultUI:!1,styles:u.mapStyle},center:{latitude:-33.422431,longitude:-70.614143},zoom:10}})}e.$inject=["$log","$state","$mdDialog","Device","LoopBackAuth","uiGmapGoogleMapApi","HelperService","managerDeviceService","_"],angular.module("app.pages.nodes").controller("NodesCreateController",e)}(),function(){"use strict";function e(e,t,n){e.state("app.pages_help",{"abstract":!0,url:"/help"}).state("app.pages_help.units",{url:"/units",views:{"content@app":{templateUrl:"app/main/pages/help/help-units/help-units.html",controller:"HelpUnitsController as vm"}}}).state("app.pages_help.config",{url:"/config",views:{"content@app":{templateUrl:"app/main/pages/help/help-config/help-config.html",controller:"HelpConfigController as vm"}}}),n.saveItem("help",{title:"Ayuda",icon:"icono-informacion2-HaibuSmart",weight:6}),n.saveItem("help.units",{title:"Sensores",state:"app.pages_help.units"}),n.saveItem("help.config",{title:"Configuración",state:"app.pages_help.config"})}e.$inject=["$stateProvider","$translatePartialLoaderProvider","msNavigationServiceProvider"],angular.module("app.pages.help",[]).config(e)}(),function(){"use strict";function e(e,t){var n=this;n.sensors=t,n.query={limit:5,page:1,filter:""}}e.$inject=["$log","UNITS"],angular.module("app.pages.help").controller("HelpUnitsController",e)}(),function(){"use strict";function e(e){}e.$inject=["$log"],angular.module("app.pages.help").controller("HelpConfigController",e)}(),function(){"use strict";function e(e,t,n){e.state("app.pages.reports",{url:"/reports",views:{"content@app":{templateUrl:"app/main/pages/reports/reports.html",controller:"ReportsController as vm"}}}),t.addPart("app/main/pages/reports"),n.saveItem("reports",{title:"Reportes",icon:"icono-reporte2-HaibuSmart",state:"app.pages.reports",translate:"REPORTS.TITLE_NAV",weight:3})}e.$inject=["$stateProvider","$translatePartialLoaderProvider","msNavigationServiceProvider"],angular.module("app.pages.reports",[]).config(e)}(),function(){"use strict";function e(e,t,n,a,o,r,i,s){function d(){v.device=v.devices[0],v.query={limit:5,page:1,filter:""},v.filter={options:{debounce:500}},v.device&&c()}function l(e){v.device=e,c()}function c(){v.isLoading=!0,m(),u(),r.getReports(v.device,v.query.limit,(v.query.page-1)*v.query.limit).then(function(e){v.reports=e})["finally"](function(){v.isLoading=!1})}function u(){r.getLastEvent(v.device).then(function(e){v.device.event=e})["catch"](function(e){t.debug("sin cache"+e)})}function m(){r.count(v.device).then(function(e){v.total=e})["finally"](function(){})}function p(){v.isLoading=!0,r.getReports(v.device,v.query.limit,(v.query.page-1)*v.query.limit).then(function(e){v.reports=e})["finally"](function(){v.isLoading=!1})}function g(){e.loader=!0,r.getReportsFull(v.device).then(function(e){var a=_.map(e,function(e){var t={};t.Fecha=i(e.timestamp).format();for(var a=0;a<e.data.length;a++)_.isNumber(parseInt(e.data[a].value))&&(e.data[a].value=1*e.data[a].value),t[n("parseUnits")(e.data[a].id,v.sensors)]=e.data[a].value;return t});t.debug(a),s('SELECT * INTO XLSX("reporte-haibu-smart.xlsx",{headers:true}) FROM ?',[a],function(e){t.debug(e)})})["finally"](function(){e.loader=!1})}var v=this;v.devices=o,v.sensors=a,v.selectDevices=l,v.getEvents=p,v.exportCvs=g,v.total=50,d()}e.$inject=["$rootScope","$log","$filter","UNITS","Devices","managerDeviceService","moment","alasql"],angular.module("app.pages.reports").controller("ReportsController",e)}(),function(){"use strict";function e(e){e.state("app.pages.profile",{url:"/profile",views:{"content@app":{templateUrl:"app/main/pages/profile/profile.html",controller:"ProfileController as vm"}}})}e.$inject=["$stateProvider"],angular.module("app.pages.profile",[]).config(e)}(),function(){"use strict";function e(e,t,n,a,o){function r(){o.getCurrentUser().then(function(e){c.profileForm=angular.copy(e)})}function i(n){e.loader=!0,o.changePassword(c.passForm.oldPassword,c.passForm.newPassword).then(function(e){l(n,e)})["catch"](function(e){if((e.status=400)&&e.data){var n=e.data.error;(n.code="INVALID_PASSWORD")&&t.passForm.oldPassword.$setValidity("INVALID_PASSWORD",!1)}})["finally"](function(){e.loader=!1})}function s(t){e.loader=!0,o.updateProfile(c.profileForm).then(function(n){e.$broadcast("updateProfile",n),d(t,n)})["catch"](function(e){a.debug(e)})["finally"](function(){e.loader=!1})}function d(e,t){n.show(n.alert().parent(angular.element(document.querySelector("document.body"))).clickOutsideToClose(!1).title("Actualizar perfil").textContent("Se ha actualizado su perfil con éxito").ariaLabel("Actualizar perfil").ok("Aceptar").targetEvent(e))}function l(e,t){n.show(n.alert().parent(angular.element(document.querySelector("document.body"))).clickOutsideToClose(!1).title("Actualizar contraseña").textContent("Se ha actualizado la contraseña con éxito").ariaLabel("Actualizar contraseña").ok("Aceptar").targetEvent(e))}var c=this;c.profileForm={},c.passForm={},c.updatePassword=i,c.updateProfile=s,r()}e.$inject=["$rootScope","$scope","$mdDialog","$log","authService"],angular.module("app.pages.profile").controller("ProfileController",e)}(),function(){"use strict";function e(e,t,n){e.state("app.pages.home",{url:"/home",params:{device:null},views:{"content@app":{templateUrl:"app/main/pages/home/home.html",controller:"HomeController as vm"}},bodyClass:"home"}),t.addPart("app/main/pages/home"),n.saveItem("home",{title:"Inicio",icon:"icono-casa2-HaibuSmart",state:"app.pages.home",translate:"HOME.TITLE_NAV",weight:1})}e.$inject=["$stateProvider","$translatePartialLoaderProvider","msNavigationServiceProvider"],angular.module("app.pages.home",["chart.js","nvd3"]).config(e)}(),function(){"use strict";function e(e,t,n,a,o,r,i,s,d,l,c,u,m,p,g,v,f,h,y,b){function S(){if(E.mapStyle=g.mapStyle(),d.getCurrentUser().then(function(e){E.user=e}),E.carousel={images:[{src:"assets/images/fotos/foto-demo.jpg"},{src:"assets/images/fotos/foto-demo2.jpg"}],templateUrl:"app/main/pages/home/slide-template.html",currentIndex:0,autoSlide:!1},E.time={now:{second:"",minute:"",hour:"",day:"",month:"",year:""},fulltime:{},ticker:function(){var e=moment();E.time.fulltime=e,E.time.now={second:e.format("ss"),minute:e.format("mm"),hour:e.format("HH"),day:e.format("D"),weekDay:e.format("dddd"),month:e.format("MMMM"),year:e.format("YYYY")}}},T=a(E.time.ticker,1e3),E.time.ticker(),E.historyChart=v.createHistory(),E.devices.length){for(var e=0;e<E.devices.length;e++)E.devices[e].lineChart||(E.devices[e].lineChart=v.createLineChart()),E.devices[e].lineChartACC||(E.devices[e].lineChartACC=v.createLineChartACC()),E.devices[e].gagueBAT||(E.devices[e].gagueBAT=v.createGague(0,100,"%",[{min:0,max:20,color:"#c74048"},{min:20,max:50,color:"#d58d34"},{min:50,max:100,color:"#37af45"}])),E.devices[e].gagueCHR||(E.devices[e].gagueCHR=v.createGague(0,440,"mA",[{min:0,max:440,color:"#37af45"}])),E.devices[e].gaguePM10||(E.devices[e].gaguePM10=v.createGague(0,100,"μm/m3",[{min:0,max:10,color:"#37af45"},{min:10,max:20,color:"#d58d34"},{min:20,max:100,color:"#c74048"}])),E.devices[e].gaguePM10||(E.devices[e].gaguePM10=v.createGague(0,100,"μm/m3",[{min:0,max:10,color:"#37af45"},{min:10,max:20,color:"#d58d34"},{min:20,max:100,color:"#c74048"}])),E.devices[e].gaguePM2_5||(E.devices[e].gaguePM2_5=v.createGague(0,100,"μm/m3",[{min:0,max:10,color:"#37af45"},{min:10,max:20,color:"#d58d34"},{min:20,max:100,color:"#c74048"}])),E.devices[e].gagueNOISE||(E.devices[e].gagueNOISE=v.createGague(0,100,"dBa",[{min:0,max:10,color:"#37af45"},{min:10,max:20,color:"#d58d34"},{min:20,max:100,color:"#c74048"}]));h.device?E.device=h.device:E.device=E.devices[0],o.debug("Select device ",E.device),C(E.device),_()}}function w(e){var t=0,n=700,a=e.event.dataOriginal.BAT?1*e.event.dataOriginal.BAT:null,o=e.event.dataOriginal.CHR?1*e.event.dataOriginal.CHR:null,r=e.event.dataOriginal.US?1*e.event.dataOriginal.US:null,i=e.event.dataOriginal.ACCX?1*e.event.dataOriginal.ACCX:null,s=e.event.dataOriginal.ACCY?1*e.event.dataOriginal.ACCY:null,d=e.event.dataOriginal.ACCZ?1*e.event.dataOriginal.ACCZ:null,l=new Date(e.event.timestamp).getTime();if(a&&(e.gagueBAT.diff=a-e.gagueBAT.value,e.gagueBAT.value=a,e.gagueBAT.timestamp=l),i&&s&&d&&(e.lineChartACC.data[0].values.push({fecha:l,value:i}),e.lineChartACC.data[1].values.push({fecha:l,value:s}),e.lineChartACC.data[2].values.push({fecha:l,value:d})),o&&(e.gagueCHR.diff=o-e.gagueCHR.value,e.gagueCHR.value=o,e.gagueCHR.timestamp=l),r){var c=t+(n-r);e.lineChart.data[0].values.push({fecha:l,value:c})}}function C(t){e.loader=!0,f.getLastEvent(t).then(function(e){t.event=e,w(t)})["finally"](function(){e.loader=!1})["catch"](function(e){o.debug("sin cache"+e)})}function _(){f.getWeather(E.device).then(function(t){e.weather=t})}var T,E=this;E.devices=c,E.device={},E.sensors=m,E.maps,S(),t.$on("$viewContentLoaded",function(){e.loader=!1}),t.$on("$destroy",function(){a.cancel(T)}),t.$on("update",function(e,t){var n=p.find(E.devices,function(e){return e.deviceId===t.deviceId});r(function(){n&&(n.event=t,w(n)),o.debug(n)})}),l.then(function(e){var t={};E.maps=e,E.device&&E.device.location&&(t=E.device.location),E.map={options:{disableDefaultUI:!1,styles:E.mapStyle},center:{latitude:t.latitude||-41.486373,longitude:t.longitude||-72.937377},zoom:9,fit:!0,cluster:{minimumClusterSize:4,zoomOnClick:!0,styles:[{width:32,height:32,textColor:"white",textSize:14}],averageCenter:!0,clusterClass:"cluster-icon"},markersEvents:{click:function(e,t,n,a){E.device.deviceId!=n.deviceId&&(o.debug("Click marker",n),o.debug("------------------"),E.device=n,y.info("Nodo "+E.device.name+" seleccionado"),C(E.device))}}}})}e.$inject=["$rootScope","$scope","$q","$interval","$log","$timeout","$mdDialog","$mdSidenav","authService","uiGmapGoogleMapApi","Devices","Device","UNITS","_","HelperService","ChartService","managerDeviceService","$stateParams","ToastService","MareasService"],angular.module("app.pages.home").controller("HomeController",e)}(),function(){"use strict";function e(e,t,n){e.state("app.pages.alerts",{url:"/alerts",views:{"content@app":{templateUrl:"app/main/pages/alerts/alerts.html",controller:"AlertsController as vm"}}}),t.addPart("app/main/pages/alerts"),n.saveItem("alerts",{title:"Alertas",icon:"icono-advertencia2-HaibuSmart",state:"app.pages.alerts",translate:"ALERTS.TITLE_NAV",weight:5})}e.$inject=["$stateProvider","$translatePartialLoaderProvider","msNavigationServiceProvider"],angular.module("app.pages.alerts",[]).config(e)}(),function(){"use strict";function e(e,t){var n=this;n.alerts=t,e.debug(n.alerts)}e.$inject=["$log","Alerts"],angular.module("app.pages.alerts").controller("AlertsController",e)}(),function(){"use strict";function e(e,t,n){e.state("app.auth_reset",{url:"/reset?access_token",views:{"main@":{templateUrl:"app/core/layouts/content-only.html",controller:"MainController as vm"},"content@app.auth_reset":{templateUrl:"app/main/auth/reset/reset.html",controller:"ResetController as vm"}},onEnter:["$stateParams","$state","$timeout",function(e,t,n){e.access_token||n(function(){t.go("app.auth_login")},500)}],bodyClass:"reset"}),t.addPart("app/main/auth/reset")}e.$inject=["$stateProvider","$translatePartialLoaderProvider","msNavigationServiceProvider"],angular.module("app.auth.reset",[]).config(e)}(),function(){"use strict";function e(e,t,n,a,o,r,i,s){function d(){}function l(a){e.loader=!0,r.setPassword(n.access_token,u.resetForm.password).then(function(e){i.debug(e),c(a,e)})["catch"](function(e){if((e.status=401)&&e.data){var n=e.data.error;(n.code="AUTHORIZATION_REQUIRED")&&t.resetForm.password.$setValidity("AUTHORIZATION_REQUIRED",!1)}})["finally"](function(){e.loader=!1})}function c(e,t){s.show(s.alert().parent(angular.element(document.querySelector("document.body"))).clickOutsideToClose(!1).title("Reiniciar contraseña").textContent("Se ha actualizado la contraseña con éxito").ariaLabel("Reiniciar contraseña").ok("Aceptar").targetEvent(e)).then(function(){a.go("app.auth_login")})}var u=this;u.reset=l,d()}e.$inject=["$rootScope","$scope","$stateParams","$state","$timeout","authService","$log","$mdDialog"],angular.module("app.auth.reset").controller("ResetController",e)}(),function(){"use strict";function e(e,t,n){e.state("app.auth_register",{url:"/register",views:{"main@":{templateUrl:"app/core/layouts/content-only.html",controller:"MainController as vm"},"content@app.auth_register":{templateUrl:"app/main/auth/register/register.html",controller:"RegisterController as vm"}},bodyClass:"register"}),t.addPart("app/main/auth/register")}e.$inject=["$stateProvider","$translatePartialLoaderProvider","msNavigationServiceProvider"],angular.module("app.auth.register",[]).config(e)}(),function(){"use strict";function e(e,t,n,a,o,r,i,s){function d(n){e.loader=!0;var a=angular.copy(c.registerForm);delete a.passwordConfirm,c.isLoading=!0,o.register(a).then(function(e){l(n,e)})["catch"](function(e){if(i.debug(e),(e.status=442)&&e.data){var n=e.data.error;angular.forEach(n.details.codes,function(e,n){t.registerForm[n]&&t.registerForm[n].$setValidity(e[0],!1)})}})["finally"](function(){c.isLoading=!1,e.loader=!1})}function l(e,t){s.show(s.alert().parent(angular.element(document.querySelector("document.body"))).clickOutsideToClose(!1).title("Registro ").textContent(t.firstName+" "+t.lastName+" te has registrado con éxito.").ariaLabel("Registro").ok("Aceptar").targetEvent(e)).then(function(){n.go("app.auth_login")})}var c=this;c.register=d,c.isLoading=!1,c.registerForm={}}e.$inject=["$rootScope","$scope","$state","$timeout","authService","uiHelper","$log","$mdDialog"],angular.module("app.auth.register").controller("RegisterController",e)}(),function(){"use strict";function e(e,t,n){e.state("app.auth_login",{url:"/",views:{"main@":{templateUrl:"app/core/layouts/content-only.html",controller:"MainController as vm"},"content@app.auth_login":{templateUrl:"app/main/auth/login/login.html",controller:"LoginController as vm"}},bodyClass:"login"}),t.addPart("app/main/auth/login")}e.$inject=["$stateProvider","$translatePartialLoaderProvider","msNavigationServiceProvider"],angular.module("app.auth.login",[]).config(e)}(),function(){"use strict";function e(e,t,n,a,o,r,i,s,d,l,c){function u(){a.clearAll(),l.onStopAllWatches(),n.reset()}function m(){e.loader=!0,i.login(f.loginForm,f.rememberMe).then(function(e){r(function(){o.go("app.pages.home")},250)})["catch"](function(n){if(d.debug(n),(n.status=401)&&n.data){var a=n.data.error;(a.code="LOGIN_FAILED")&&(t.loginForm.password.$setValidity(a.code,!1),r(function(){t.loginForm.password.$setValidity(a.code,!0)},2e3))}e.loader=!1})}function p(e){c.show({controller:v,controllerAs:"vm",templateUrl:"app/main/auth/login/forgot-password.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0,fullscreen:!1}).then(function(t){g(e,t)})}function g(e,t){c.show(c.alert().parent(angular.element(document.querySelector("document.body"))).clickOutsideToClose(!1).title("Envio de correo").textContent("Se ha enviado con éxito un correo a "+t.email).ariaLabel("Registro").ok("Aceptar").targetEvent(e))}function v(e,t,n,a){function o(){c.hide()}function r(){c.cancel()}function i(t){13!==event.which||e.forgotForm.$invalid||s()}function s(){t.loader=!0,a.resetPassword(d.email).then(function(e){c.hide(e)})["catch"](function(t){if(n.debug(t),(t.status=404)&&t.data){var a=t.data.error;(a.code="EMAIL_NOT_FOUND")&&e.forgotForm.email.$setValidity("EMAIL_NOT_FOUND",!1)}})["finally"](function(){t.loader=!1})}var d=this;d.hide=o,d.cancel=r,d.keypress=i,d.reset=s}v.$inject=["$scope","$rootScope","$log","authService"];var f=this;f.login=m,f.isLoading=!1,f.rememberMe=!1,f.loginForm={},f.forgotPassword=p,u()}e.$inject=["$rootScope","$scope","managerDeviceService","localStorageService","$state","$timeout","authService","uiHelper","$log","MQTTUtils","$mdDialog"],angular.module("app.auth.login").controller("LoginController",e)}(),function(){"use strict";angular.module("app.core",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngSanitize","ngMaterial","pascalprecht.translate","ui.router"])}(),function(){"use strict";function e(e,t){function n(){a()&&(o.flipped=!o.flipped,t.toggleClass("flipped",o.flipped))}function a(){return angular.isDefined(e.flippable)&&e.flippable===!0}var o=this;o.flipped=!1,o.flip=n}function t(){return{restrict:"E",scope:{flippable:"=?"},controller:"MsWidgetController",transclude:!0,compile:function(e){return e.addClass("ms-widget"),function(e,t,n,a,o){o(function(e){t.empty(),t.append(e)})}}}}function n(){return{restrict:"E",require:"^msWidget",transclude:!0,compile:function(e){return e.addClass("ms-widget-front"),function(e,t,n,a,o){o(function(e){t.empty(),t.append(e)}),e.flipWidget=a.flip}}}}function a(){return{restrict:"E",require:"^msWidget",transclude:!0,compile:function(e){return e.addClass("ms-widget-back"),function(e,t,n,a,o){o(function(e){t.empty(),t.append(e)}),e.flipWidget=a.flip}}}}e.$inject=["$scope","$element"],angular.module("app.core").controller("MsWidgetController",e).directive("msWidget",t).directive("msWidgetFront",n).directive("msWidgetBack",a)}(),function(){"use strict";function e(){function e(e){n.scrollEl=e}function t(){return n.scrollEl}var n=this;n.scrollEl=void 0,n.setScrollEl=e,n.getScrollEl=t}function t(){return{scope:{msTimeline:"=?",loadMore:"&?msTimelineLoadMore"},controller:"MsTimelineController",compile:function(e){return e.addClass("ms-timeline"),function(e,t,n,a){function o(){l.scrollTop()+l.height()+c>s.position().top&&(s.addClass("show"),i(),e.loadMore().then(function(){s.removeClass("show"),r()},function(){s.remove()}))}function r(){l.on("scroll",o)}function i(){l.off("scroll",o)}var s=angular.element('<div class="ms-timeline-loader md-accent-bg md-whiteframe-4dp"><span class="spinner animate-rotate"></span></div>');t.append(s);var d={scrollEl:"#content"};d=angular.extend(d,e.msTimeline,{});var l=angular.element(d.scrollEl);a.setScrollEl(l);var c=144;r(),e.$on("$destroy",function(){i()})}}}}function n(e,t){return{scope:!0,require:"^msTimeline",compile:function(n){return n.addClass("ms-timeline-item").addClass("hidden"),function(n,a,o,r){function i(){a.find("ms-card")?n.$on("msCard::cardTemplateLoaded",function(t,n){var a=angular.element(n[0]);s(a).then(function(){e(function(){c=!0})})}):s(a).then(function(){e(function(){c=!0})}),m.on("scroll",d),d()}function s(e){var n=t.defer(),a=e.find("img");return a.length>0?a.on("load",function(){n.resolve("Image is loaded")}):n.resolve("No images"),n.promise}function d(){m.scrollTop()+m.height()>a.position().top+l&&(e(function(){u=!0}),m.off("scroll",d))}var l=72,c=!1,u=!1,m=r.getScrollEl();i();var p=n.$watch(function(){return c&&u},function(e,t){angular.equals(e,t)||e&&(a.removeClass("hidden").addClass("animate"),p())},!0)}}}}n.$inject=["$timeout","$q"],angular.module("app.core").controller("MsTimelineController",e).directive("msTimeline",t).directive("msTimelineItem",n)}(),function(){"use strict";function e(e){function t(e){C.orientation=e||"horizontal"}function n(e){C.mainForm=e}function a(e,t,n){var a={element:e,scope:t,form:n,stepNumber:t.step||C.steps.length+1,stepTitle:t.stepTitle,stepTitleTranslate:t.stepTitleTranslate};return C.steps.push(a),C.steps.sort(function(e,t){return e.stepNumber-t.stepNumber}),a}function o(){C.setCurrentStep(C.currentStepNumber)}function r(){e(function(){for(var e=0;e<C.steps.length;e++)C.steps[e].form.$setPristine(),C.steps[e].form.$setUntouched();C.mainForm.$setPristine(),C.mainForm.$setUntouched(),c()})}function i(e){if(S(e))if(C.currentStepNumber=e,"horizontal"===C.orientation){for(var t=0;t<C.steps.length;t++)C.steps[t].element.hide();C.steps[C.currentStepNumber-1].element.show()}else if("vertical"===C.orientation){for(var n=0;n<C.steps.length;n++)C.steps[n].element.find(".ms-stepper-step-content").hide();C.steps[C.currentStepNumber-1].element.find(".ms-stepper-step-content").show()}}function s(e){h(e)||C.setCurrentStep(e)}function d(){for(var e=C.currentStepNumber-1,t=e;t>=1;t--)if(!h(t)){e=t;break}C.setCurrentStep(e)}function l(){for(var e=C.currentStepNumber+1,t=e;t<=C.steps.length;t++)if(!h(t)){e=t;break}C.setCurrentStep(e)}function c(){C.setCurrentStep(1)}function u(){C.setCurrentStep(C.steps.length)}function m(){return 1===C.currentStepNumber}function p(){return C.currentStepNumber===C.steps.length}function g(e){return S(e)?C.currentStepNumber===e:null}function v(e){if(!S(e))return null;for(var t=!1,n=1;e>n;n++)if(!b(n)){t=!0;break}return t}function f(e){return S(e)?C.steps[e-1].scope.optionalStep:null}function h(e){return S(e)?!!C.steps[e-1].scope.hideStep:null}function y(e){return!h(e.stepNumber)}function b(e){return S(e)?f(e)?!0:C.steps[e-1].form.$valid:null}function S(e){return!(angular.isUndefined(e)||1>e||e>C.steps.length)}function w(){return C.mainForm.$valid}var C=this;C.mainForm=void 0,C.orientation="horizontal",C.steps=[],C.currentStep=void 0,C.currentStepNumber=1,C.setOrientation=t,C.registerMainForm=n,C.registerStep=a,C.setupSteps=o,C.resetForm=r,C.setCurrentStep=i,C.gotoStep=s,C.gotoPreviousStep=d,C.gotoNextStep=l,C.gotoFirstStep=c,C.gotoLastStep=u,C.isFirstStep=m,C.isLastStep=p,C.isStepCurrent=g,C.isStepDisabled=v,C.isStepOptional=f,C.isStepHidden=h,C.filterHiddenStep=y,C.isStepValid=b,C.isStepNumberValid=S,C.isFormValid=w}function t(){return{restrict:"A",scope:{},require:["form","msHorizontalStepper"],priority:1001,controller:"MsStepperController as MsStepper",bindToController:{model:"=ngModel"},transclude:!0,
templateUrl:"app/core/directives/ms-stepper/templates/horizontal/horizontal.html",compile:function(e){return e.addClass("ms-stepper"),function(e,t,n,a){var o=a[0],r=a[1];r.setOrientation("horizontal"),r.registerMainForm(o),r.setupSteps()}}}}function n(){return{restrict:"E",require:["form","^msHorizontalStepper"],priority:1e3,scope:{step:"=?",stepTitle:"=?",stepTitleTranslate:"=?",optionalStep:"=?",hideStep:"=?"},compile:function(e){return e.addClass("ms-stepper-step"),function(e,t,n,a){var o=a[0],r=a[1];e.optionalStep=angular.isDefined(n.optionalStep),r.registerStep(t,e,o),t.hide()}}}}function a(e){return{restrict:"A",scope:{},require:["form","msVerticalStepper"],priority:1001,controller:"MsStepperController as MsStepper",bindToController:{model:"=ngModel"},transclude:!0,templateUrl:"app/core/directives/ms-stepper/templates/vertical/vertical.html",compile:function(t){return t.addClass("ms-stepper"),function(t,n,a,o){var r=o[0],i=o[1];e(function(){i.setOrientation("vertical"),i.registerMainForm(r),i.setupSteps()})}}}}function o(){return{restrict:"E",require:["form","^msVerticalStepper"],priority:1e3,scope:{step:"=?",stepTitle:"=?",stepTitleTranslate:"=?",optionalStep:"=?",hideStep:"=?"},transclude:!0,templateUrl:"app/core/directives/ms-stepper/templates/vertical/step/vertical-step.html",compile:function(e){return e.addClass("ms-stepper-step"),function(e,t,n,a){var o=a[0],r=a[1];e.optionalStep=angular.isDefined(n.optionalStep),e.stepInfo=r.registerStep(t,e,o),e.MsStepper=r,t.find(".ms-stepper-step-content").hide()}}}}e.$inject=["$timeout"],a.$inject=["$timeout"],angular.module("app.core").controller("MsStepperController",e).directive("msHorizontalStepper",t).directive("msHorizontalStepperStep",n).directive("msVerticalStepper",a).directive("msVerticalStepperStep",o)}(),function(){"use strict";function e(e){return{restrict:"E",link:function(t,n){var a=t.$on("msSplashScreen::remove",function(){e.leave(n).then(function(){a(),t=n=null})})}}}e.$inject=["$animate"],angular.module("app.core").directive("msSplashScreen",e)}(),function(){"use strict";function e(){return{restrict:"A",require:"^mdSidenav",link:function(e,t,n,a){e.$watch(function(){return a.isOpen()&&!a.isLockedOpen()},function(e){angular.isUndefined(e)||(t.parent().toggleClass("full-height",e),angular.element("html").toggleClass("sidenav-open",e))})}}}angular.module("app.core").directive("msSidenavHelper",e)}(),function(){"use strict";function e(e,t,n,a,o,r){function i(){b.loadShortcuts().then(function(e){b.shortcuts=e,b.shortcuts.length>0&&(b.results=e)}),e.$watch("MsShortcuts.query",function(e,t){angular.isUndefined(e)||angular.equals(e,t)||(b.resultsLoading=!0,b.populateResults().then(function(e){b.results=e},function(){b.results=[]})["finally"](function(){b.resultsLoading=!1}))})}function s(){for(var e=[],t=r.getFlatNavigation(),n=o.defer(),i=0;i<t.length;i++)t[i].uisref&&e.push(t[i]);if(b.query){e=e.filter(function(e){return angular.lowercase(e.title).search(angular.lowercase(b.query))>-1?!0:void 0});for(var s=0;s<e.length;s++){e[s].hasShortcut=!1;for(var d=0;d<b.shortcuts.length;d++)if(b.shortcuts[d]._id===e[s]._id){e[s].hasShortcut=!0;break}}}else b.shortcuts.length>0&&(e=b.shortcuts);return b.selectedResultIndex=0,a(function(){n.resolve(e)},250),n.promise}function d(){var e,n=o.defer();return e=angular.fromJson(t.get("FUSE.shortcuts"))||[],n.resolve(e),n.promise}function l(){var e=o.defer();return t.put("FUSE.shortcuts",angular.toJson(b.shortcuts)),a(function(){e.resolve({success:!0})},250),e.promise}function c(e){e.hasShortcut=!0,b.shortcuts.push(e),b.saveShortcuts()}function u(e){e.hasShortcut=!1;for(var t=0;t<b.shortcuts.length;t++)b.shortcuts[t]._id===e._id&&(b.shortcuts.splice(t,1),b.query||(0===b.shortcuts.length?b.results=null:t>=b.shortcuts.length&&(b.selectedResultIndex=b.shortcuts.length-1)));b.saveShortcuts()}function m(e){e.hasShortcut?b.removeShortcut(e):b.addShortcut(e)}function p(e){e.preventDefault()}function g(e){var t=e.keyCode,n=[38,40];switch(n.indexOf(t)>-1&&e.preventDefault(),t){case 13:b.handleResultClick(b.results[b.selectedResultIndex]);break;case 38:b.selectedResultIndex-1>=0&&(b.selectedResultIndex--,b.ensureSelectedResultIsVisible());break;case 40:b.selectedResultIndex+1<b.results.length&&(b.selectedResultIndex++,b.ensureSelectedResultIsVisible())}}function v(e){b.ignoreMouseEvents||(b.selectedResultIndex=e)}function f(){b.ignoreMouseEvents=!0,a.cancel(b.mouseEventIgnoreTimeout),b.mouseEventIgnoreTimeout=a(function(){b.ignoreMouseEvents=!1},250)}function h(){var e=n.find("#ms-shortcut-add-menu").find(".results"),t=angular.element(e.find(".result")[b.selectedResultIndex]);if(e&&t){var a=t.position().top-8,o=t.position().top+t.outerHeight()+8;b.temporarilyIgnoreMouseEvents(),e.scrollTop()>a&&e.scrollTop(a),o>e.height()+e.scrollTop()&&e.scrollTop(o-e.height())}}function y(){b.mobileBarActive=!b.mobileBarActive}var b=this;b.query="",b.queryOptions={debounce:300},b.resultsLoading=!1,b.selectedResultIndex=0,b.ignoreMouseEvents=!1,b.mobileBarActive=!1,b.results=null,b.shortcuts=[],b.sortableOptions={ghostClass:"ghost",forceFallback:!0,fallbackClass:"dragging",onSort:function(){b.saveShortcuts()}},b.populateResults=s,b.loadShortcuts=d,b.saveShortcuts=l,b.addShortcut=c,b.removeShortcut=u,b.handleResultClick=m,b.absorbEvent=p,b.handleKeydown=g,b.handleMouseenter=v,b.temporarilyIgnoreMouseEvents=f,b.ensureSelectedResultIsVisible=h,b.toggleMobileBar=y,i()}function t(){return{restrict:"E",scope:{},require:"msShortcuts",controller:"MsShortcutsController as MsShortcuts",bindToController:{},templateUrl:"app/core/directives/ms-shortcuts/ms-shortcuts.html",compile:function(e){return e.addClass("ms-shortcuts"),function(e,t){}}}}e.$inject=["$scope","$cookies","$document","$timeout","$q","msNavigationService"],angular.module("app.core").controller("MsShortcutsController",e).directive("msShortcuts",t)}(),function(){"use strict";function e(e,t,n){function a(){e.$watch("MsSearchBar.query",function(t,n){if(!angular.isUndefined(t)&&!angular.equals(t,n)&&!p.collapsed){var a=e.$parent.$eval(p.onSearch,{query:t}),o=angular.isArray(a),r=a&&!!a.then;o&&p.populateResults(a),r&&(p.resultsLoading=!0,a.then(function(e){p.populateResults(e)},function(){p.populateResults([])})["finally"](function(){p.resultsLoading=!1}))}})}function o(e){if(!p.collapsed){var t=angular.isArray(e),n=null===e;(t||n)&&(p.selectedResultIndex=0,p.results=e)}}function r(){p.collapsed=!1,e.expand(),p.onExpand&&angular.isFunction(p.onExpand)&&p.onExpand()}function i(){p.query="",p.populateResults(null),p.collapsed=!0,e.collapse(),p.onCollapse&&angular.isFunction(p.onCollapse)&&p.onCollapse()}function s(e){e.preventDefault()}function d(e){var t=e.keyCode,n=[27,38,40];switch(n.indexOf(t)>-1&&e.preventDefault(),t){case 13:p.handleResultClick(p.results[p.selectedResultIndex]);break;case 27:p.collapse();break;case 38:p.selectedResultIndex-1>=0&&(p.selectedResultIndex--,p.ensureSelectedResultIsVisible());break;case 40:if(!p.results)return;p.selectedResultIndex+1<p.results.length&&(p.selectedResultIndex++,p.ensureSelectedResultIsVisible())}}function l(e){p.ignoreMouseEvents||(p.selectedResultIndex=e)}function c(){p.ignoreMouseEvents=!0,n.cancel(p.mouseEventIgnoreTimeout),p.mouseEventIgnoreTimeout=n(function(){p.ignoreMouseEvents=!1},250)}function u(e){p.onResultClick&&p.onResultClick({item:e}),p.collapse()}function m(){var e=t.find(".ms-search-bar-results"),n=angular.element(e.find(".result")[p.selectedResultIndex]);if(e&&n){var a=n.position().top-8,o=n.position().top+n.outerHeight()+8;p.temporarilyIgnoreMouseEvents(),e.scrollTop()>a&&e.scrollTop(a),o>e.height()+e.scrollTop()&&e.scrollTop(o-e.height())}}var p=this;p.collapsed=!0,p.query="",p.queryOptions={debounce:p.debounce||0},p.resultsLoading=!1,p.results=null,p.selectedResultIndex=0,p.ignoreMouseEvents=!1,p.populateResults=o,p.expand=r,p.collapse=i,p.absorbEvent=s,p.handleKeydown=d,p.handleMouseenter=l,p.temporarilyIgnoreMouseEvents=c,p.handleResultClick=u,p.ensureSelectedResultIsVisible=m,a()}function t(e){return{restrict:"E",scope:{},require:"msSearchBar",controller:"MsSearchBarController as MsSearchBar",bindToController:{debounce:"=?",onSearch:"@",onResultClick:"&?",onExpand:"&?",onCollapse:"&?"},templateUrl:"app/core/directives/ms-search-bar/ms-search-bar.html",compile:function(t){return t.addClass("ms-search-bar"),function(t,n){function a(){i=n.find("#ms-search-bar-input")}function o(){n.addClass("expanded"),s.addClass("ms-search-bar-expanded"),i.focus()}function r(){n.removeClass("expanded"),s.removeClass("ms-search-bar-expanded")}var i,s=e.find("body");t.collapse=r,t.expand=o,a()}}}}e.$inject=["$scope","$element","$timeout"],t.$inject=["$document"],angular.module("app.core").controller("MsSearchBarController",e).directive("msSearchBar",t)}(),function(){"use strict";function e(){function e(e){t=angular.extend({},t,e)}var t={wheelSpeed:1,wheelPropagation:!1,swipePropagation:!0,minScrollbarLength:null,maxScrollbarLength:null,useBothWheelAxes:!1,useKeyboard:!0,suppressScrollX:!1,suppressScrollY:!1,scrollXMarginOffset:0,scrollYMarginOffset:0,stopPropagationOnClick:!0};this.config=e,this.$get=function(){function e(){return t}var n={getConfig:e};return n}}function t(e,t,n,a){return{restrict:"AE",compile:function(o){return a.getConfig("disableCustomScrollbars")||a.getConfig("disableCustomScrollbarsOnMobile")&&n.isMobile()?void 0:(o.addClass("ms-scroll"),function(n,a,o){function r(){PerfectScrollbar.update(a[0])}var i={};o.msScroll&&(i=n.$eval(o.msScroll)),i=angular.extend({},t.getConfig(),i),e(function(){PerfectScrollbar.initialize(a[0],i)},0),a.on("mouseenter",r),n.$watch(function(){return a.prop("scrollHeight")},function(e,t){angular.isUndefined(e)||angular.equals(e,t)||r()}),n.$watch(function(){return a.prop("scrollWidth")},function(e,t){angular.isUndefined(e)||angular.equals(e,t)||r()}),n.$on("$destroy",function(){a.off("mouseenter"),PerfectScrollbar.destroy(a[0])})})}}}t.$inject=["$timeout","msScrollConfig","msUtils","fuseConfig"],angular.module("app.core").provider("msScrollConfig",e).directive("msScroll",t)}(),function(){"use strict";function e(){return{restrict:"A",link:function(e,t){var n=angular.element('<div class="ms-responsive-table-wrapper"></div>');t.after(n),n.append(t)}}}angular.module("app.core").directive("msResponsiveTable",e)}(),function(){"use strict";function e(){return{restrict:"A",scope:{msRandomClass:"="},link:function(e,t){var n=e.msRandomClass[Math.floor(Math.random()*e.msRandomClass.length)];t.addClass(n)}}}angular.module("app.core").directive("msRandomClass",e)}(),function(){"use strict";function e(){function e(e,t){if(!angular.isString(e))return void i.error("path must be a string (eg. `dashboard.project`)");for(var n=e.split("."),o=n[n.length-1],s=a(n),d=!1,l=0;l<s.length;l++)if(s[l]._id===o){d=s[l];break}d?(angular.extend(d,t),d.uisref=r(d)):(t.children=[],(angular.isUndefined(t.weight)||!angular.isNumber(t.weight))&&(t.weight=1),t._id=o,t._path=e,t.uisref=r(t),s.push(t))}function t(e){if(!angular.isString(e))return void i.error("path must be a string (eg. `dashboard.project`)");for(var t=s,n=e.split("."),a=0;a<n.length;a++)for(var o=n[a],r=0;r<t.length;r++)if(t[r]._id===o){if(t[r]._path===e)return t.splice(r,1),!0;t=t[r].children;break}return!1}function n(e){e||(e=s,e.sort(o));for(var t=0;t<e.length;t++){var a=e[t].children;a.length>1&&a.sort(o),a.length>0&&n(a)}}function a(e){var t=s;if(1===e.length)return t;e.pop();for(var n=0;n<e.length;n++){for(var a=e[n],o=!0,r=0;r<t.length;r++)if(t[r]._id===a){t=t[r].children,o=!1;break}if(o){var i={_id:a,_path:e.join("."),title:a,weight:1,children:[]};t.push(i),t=i.children}}return t}function o(e,t){return parseInt(e.weight)-parseInt(t.weight)}function r(e){var t="";return angular.isDefined(e.state)&&(t=e.state,angular.isDefined(e.stateParams)&&angular.isObject(e.stateParams)&&(t=t+"("+angular.toJson(e.stateParams)+")")),t}var i=angular.injector(["ng"]).get("$log"),s=[],d=this;d.saveItem=e,d.deleteItem=t,d.sortByWeight=n,this.$get=function(){function a(){s=[],h&&(h.vm.navigation=s)}function o(e,t){f={node:e,scope:t}}function r(){return f}function i(e){if(e){for(var t=0;t<s.length;t++)if(s[t]._id===e)return[s[t]];return null}return s}function d(e){var t=i(e);return v(t)}function l(e){h=e}function c(e){y=e}function u(){return y}function m(e){b=e}function p(){return b}function g(){h.toggleFolded()}function v(e){for(var t=[],n=0;n<e.length;n++){var a=angular.copy(e[n]);a.children=[],t.push(a),e[n].children.length>0&&(t=t.concat(v(e[n].children)))}return t}var f=null,h=null,y=null,b=null,S={saveItem:e,deleteItem:t,sort:n,clearNavigation:a,setActiveItem:o,getActiveItem:r,getNavigation:i,getFlatNavigation:d,setNavigationScope:l,setFolded:c,getFolded:u,setFoldedOpen:m,getFoldedOpen:p,toggleFolded:g};return S}}function t(e,t){function n(){t.sort()}function a(){angular.element("body").toggleClass("ms-navigation-horizontal-mobile-menu-active")}var o=this;e.root?o.navigation=t.getNavigation(e.root):o.navigation=t.getNavigation(),o.toggleHorizontalMobileMenu=a,n()}function n(e,t,n,a){return{restrict:"E",scope:{folded:"=",root:"@"},controller:"MsNavigationController as vm",templateUrl:"app/core/directives/ms-navigation/templates/vertical.html",transclude:!0,compile:function(o){return o.addClass("ms-navigation"),function(o,r){function i(){null===a.getFolded()&&a.setFolded(o.folded),a.getFolded()&&(t(function(){e.$broadcast("msNavigation::collapse")}),p.addClass("ms-navigation-folded"),d())}function s(t){if(a.setFolded(t),t)e.$broadcast("msNavigation::collapse"),p.addClass("ms-navigation-folded"),d();else{var n=a.getActiveItem();n&&n.scope.$emit("msNavigation::stateMatched"),p.removeClass("ms-navigation-folded ms-navigation-folded-open"),c()}}function d(){r.parent().append(g),t(function(){g.on("mouseenter touchstart",u)})}function l(){p.find("#main").append(v),v.on("mouseenter touchstart",m)}function c(){v.remove()}function u(e){e&&e.preventDefault(),a.setFoldedOpen(!0);var t=a.getActiveItem();t&&t.scope.$emit("msNavigation::stateMatched"),p.addClass("ms-navigation-folded-open"),g.remove(),l()}function m(t){t&&t.preventDefault(),a.setFoldedOpen(!1),e.$broadcast("msNavigation::collapse"),p.removeClass("ms-navigation-folded-open"),v.remove(),d()}var p=angular.element("body"),g=angular.element('<div id="ms-navigation-fold-expander"></div>'),v=angular.element('<div id="ms-navigation-fold-collapser"></div>'),f=n("navigation");a.setNavigationScope(o),i(),o.$watch(function(){return f.isLockedOpen()},function(t,n){if(!angular.isUndefined(t)&&!angular.equals(t,n)){var o=a.getFolded();if(o)if(t)e.$broadcast("msNavigation::collapse");else{var r=a.getActiveItem();r&&r.scope.$emit("msNavigation::stateMatched")}}}),o.$watch("folded",function(e,t){angular.isUndefined(e)||angular.equals(e,t)||s(e)}),o.toggleFolded=function(){var e=a.getFolded();s(!e)},o.$on("$stateChangeStart",function(){f.close()}),o.$on("$destroy",function(){v.off("mouseenter touchstart"),g.off("mouseenter touchstart")})}}}}function a(e,t,n,a,o,r){function i(){if(m.hasChildren=m.node.children.length>0,m.group=!(!angular.isDefined(m.node.group)||m.node.group!==!0),!m.hasChildren||m.group?m.collapsable=!1:m.collapsable=!(!angular.isUndefined(m.node.collapsable)&&"boolean"==typeof m.node.collapsable&&m.node.collapsable!==!0),m.collapsable?m.collapsed=!(!angular.isUndefined(m.node.collapsed)&&"boolean"==typeof m.node.collapsed&&m.node.collapsed!==!0):m.collapsed=!1,m.node.state===o.current.name||o.includes(m.node.state)){if(angular.isDefined(m.node.stateParams)&&angular.isDefined(o.params)&&!angular.equals(m.node.stateParams,o.params))return;e.$emit("msNavigation::stateMatched"),r.setActiveItem(m.node,e)}e.$on("msNavigation::stateMatched",function(){m.collapsable&&m.collapsed&&e.$evalAsync(function(){m.collapsed=!1})}),e.$on("msNavigation::collapse",function(e,t){if(!m.collapsed&&m.collapsable)if(angular.isUndefined(t))m.collapse();else{var n=t.split("."),a=[],o=r.getActiveItem();if(o&&(a=o.node._path.split(".")),n.indexOf(m.node._id)>-1)return;if(a.indexOf(m.node._id)>-1)return;m.collapse()}}),e.$on("$stateChangeSuccess",function(){if(m.node.state===o.current.name){if(angular.isDefined(m.node.stateParams)&&angular.isDefined(o.params)&&!angular.equals(m.node.stateParams,o.params))return;r.setActiveItem(m.node,e),n.$broadcast("msNavigation::collapse",m.node._path)}if(o.includes(m.node.state)){if(angular.isDefined(m.node.stateParams)&&angular.isDefined(o.params)&&!angular.equals(m.node.stateParams,o.params))return;e.$emit("msNavigation::stateMatched")}})}function s(){m.collapsed?m.expand():m.collapse()}function d(){var t=m.element.children("ul"),n=t[0].offsetHeight;e.$evalAsync(function(){m.collapsed=!0,m.element.addClass("collapsing"),a.animate(t,{display:"block",height:n+"px"},{height:"0px"},m.animateHeightClass).then(function(){t.css({display:"",height:""}),m.element.removeClass("collapsing")}),e.$broadcast("msNavigation::collapse")})}function l(){var t=m.element.children("ul");t.css({position:"absolute",visibility:"hidden",display:"block",height:"auto"});var o=t[0].offsetHeight;t.css({position:"",visibility:"",display:"",height:""}),e.$evalAsync(function(){m.collapsed=!1,m.element.addClass("expanding"),a.animate(t,{display:"block",height:"0px"},{height:o+"px"},m.animateHeightClass).then(function(){t.css({height:""}),m.element.removeClass("expanding")}),n.$broadcast("msNavigation::collapse",m.node._path)})}function c(){return m.node["class"]}function u(){return angular.isDefined(m.node.hidden)&&angular.isFunction(m.node.hidden)?m.node.hidden():!1}var m=this;m.element=t,m.node=e.node,m.hasChildren=void 0,m.collapsed=void 0,m.collapsable=void 0,m.group=void 0,m.animateHeightClass="animate-height",m.toggleCollapsed=s,m.collapse=d,m.expand=l,m.getClass=c,m.isHidden=u,i()}function o(){return{restrict:"A",bindToController:{node:"=msNavigationNode"},controller:"MsNavigationNodeController as vm",compile:function(e){return e.addClass("ms-navigation-node"),function(e,t,n,a){t.addClass(a.getClass()),a.group&&t.addClass("group")}}}}function r(){return{restrict:"A",require:"^msNavigationNode",compile:function(e){return e.addClass("ms-navigation-item"),function(e,t,n,a){a.collapsable&&t.on("click",a.toggleCollapsed),e.$on("$destroy",function(){t.off("click")})}}}}function i(e){return{restrict:"E",scope:{root:"@"},controller:"MsNavigationController as vm",templateUrl:"app/core/directives/ms-navigation/templates/horizontal.html",transclude:!0,compile:function(t){return t.addClass("ms-navigation-horizontal"),function(t){e.setNavigationScope(t)}}}}function s(e,t,n,a,o){function r(){if(s.isActive=!1,s.hasChildren=s.node.children.length>0,s.group=!(!angular.isDefined(s.node.group)||s.node.group!==!0),s.node.state===a.current.name||a.includes(s.node.state)){if(angular.isDefined(s.node.stateParams)&&angular.isDefined(a.params)&&!angular.equals(s.node.stateParams,a.params))return;e.$emit("msNavigation::stateMatched"),o.setActiveItem(s.node,e)}e.$on("msNavigation::stateMatched",function(){s.hasChildren&&e.$evalAsync(function(){s.isActive=!0})}),e.$on("msNavigation::clearActive",function(){if(s.hasChildren){var t=[],n=o.getActiveItem();n&&(t=n.node._path.split(".")),t.indexOf(s.node._id)>-1?e.$evalAsync(function(){s.isActive=!0}):e.$evalAsync(function(){s.isActive=!1})}}),e.$on("$stateChangeSuccess",function(){if(s.node.state===a.current.name||a.includes(s.node.state)){if(angular.isDefined(s.node.stateParams)&&angular.isDefined(a.params)&&!angular.equals(s.node.stateParams,a.params))return;o.setActiveItem(s.node,e),n.$broadcast("msNavigation::clearActive")}})}function i(){return s.node["class"]}var s=this;s.element=t,s.node=e.node,s.hasChildren=void 0,s.group=void 0,s.getClass=i,r()}function d(){return{restrict:"A",bindToController:{node:"=msNavigationHorizontalNode"},controller:"MsNavigationHorizontalNodeController as vm",compile:function(e){return e.addClass("ms-navigation-horizontal-node"),function(e,t,n,a){t.addClass(a.getClass()),a.group&&t.addClass("group")}}}}function l(e){return{restrict:"A",require:"^msNavigationHorizontalNode",compile:function(t){return t.addClass("ms-navigation-horizontal-item"),function(t,n,a,o){function r(){o.hasChildren&&!e("gt-md")&&n.toggleClass("expanded")}n.on("click",r),t.$on("$destroy",function(){n.off("click")})}}}}t.$inject=["$scope","msNavigationService"],n.$inject=["$rootScope","$timeout","$mdSidenav","msNavigationService"],a.$inject=["$scope","$element","$rootScope","$animate","$state","msNavigationService"],i.$inject=["msNavigationService"],s.$inject=["$scope","$element","$rootScope","$state","msNavigationService"],l.$inject=["$mdMedia"],angular.module("app.core").provider("msNavigationService",e).controller("MsNavigationController",t).directive("msNavigation",n).controller("MsNavigationNodeController",a).directive("msNavigationNode",o).directive("msNavigationItem",r).directive("msNavigationHorizontal",i).controller("MsNavigationHorizontalNodeController",s).directive("msNavigationHorizontalNode",d).directive("msNavigationHorizontalItem",l)}(),function(){"use strict";function e(){function e(e,t){r={scope:e,element:t}}function t(){return r.scope.isNavFoldedOpen()}function n(){r.scope.toggleFold()}function a(){r.scope.openFolded()}function o(){r.scope.closeFolded()}var r={},i={setFoldable:e,isNavFoldedOpen:t,toggleFold:n,openFolded:a,closeFolded:o};return i}function t(e,t,n){return{restrict:"A",link:function(a,o,r){function i(){return p}function s(){m=!m,m?d():u()}function d(){g.addClass("ms-nav-folded"),t.$broadcast("msNav::forceCollapse"),o.scrollTop(0),h.append(v),v.on("mouseenter touchstart",function(e){l(e),p=!0})}function l(e){angular.isDefined(e)&&e.preventDefault(),g.addClass("ms-nav-folded-open"),t.$broadcast("msNav::expandMatchingToggles"),h.find(v).remove(),h.parent().append(f),f.on("mouseenter touchstart",function(e){c(e),p=!1})}function c(e){angular.isDefined(e)&&e.preventDefault(),t.$broadcast("msNav::forceCollapse"),o.scrollTop(0),g.removeClass("ms-nav-folded-open"),h.parent().find(f).remove(),h.append(v),v.on("mouseenter touchstart",function(e){l(e),p=!0})}function u(){g.removeClass("ms-nav-folded ms-nav-folded-open"),t.$broadcast("msNav::expandMatchingToggles"),o.off("mouseenter mouseleave")}var m="true"===r.msNavIsFolded,p=!1,g=angular.element(e[0].body),v=angular.element('<div id="ms-nav-fold-open-overlay"></div>'),f=angular.element('<div id="ms-nav-fold-close-overlay"></div>'),h=o.parent();n.setFoldable(a,o,m),m?d():u(),a.toggleFold=s,a.openFolded=l,a.closeFolded=c,a.isNavFoldedOpen=i,a.$on("$destroy",function(){v.off("mouseenter touchstart"),f.off("mouseenter touchstart"),o.off("mouseenter mouseleave")})}}}function n(){function e(){return d}function t(){d=!0}function n(){d=!1}function a(e,t){l.push({element:e,scope:t})}function o(){return c}function r(e,t){c.push({element:e,scope:t})}function i(){c=[]}var s=this,d=!1,l=[],c=[];s.isDisabled=e,s.enable=n,s.disable=t,s.setToggleItem=a,s.getLockedItems=o,s.setLockedItem=r,s.clearLockedItems=i}function a(e,t,n){return{restrict:"E",scope:{},controller:"MsNavController",compile:function(a){return a.addClass("ms-nav"),function(a){e.$broadcast("msNav::expandMatchingToggles");var o=e.$on("$stateChangeSuccess",function(){e.$broadcast("msNav::expandMatchingToggles"),t.when("navigation").then(function(e){e.close(),n.isNavFoldedOpen()&&n.closeFolded()})});a.$on("$destroy",function(){o()})}}}}function o(){return{restrict:"A",compile:function(e){return e.addClass("ms-nav-title"),function(){}}}}function r(){return{restrict:"AE",compile:function(e){return e.addClass("ms-nav-button"),function(){}}}}function i(e,t,n,a){return{restrict:"A",require:"^msNav",scope:!0,compile:function(o,r){return o.addClass("ms-nav-toggle"),angular.isUndefined(r.collapsed)&&(r.collapsed=!0),o.attr("collapsed",r.collapsed),function(o,r,i,s){function d(){s.isDisabled()||(s.disable(),l()?(s.clearLockedItems(),o.$emit("msNav::pushToLockedList"),e.$broadcast("msNav::collapse"),u().then(function(){s.enable()})):o.$broadcast("msNav::forceCollapse"))}function l(){return"true"===r.attr("collapsed")}function c(){return!l()}function u(){var e=t.defer();if(c())return e.reject({error:!0}),e.promise;r.attr("collapsed",!1);var a=angular.element(r.find("ms-nav-toggle-items")[0]);a.css({position:"absolute",visibility:"hidden",display:"block",height:"auto"});var i=a[0].offsetHeight;return a.css({position:"",visibility:"",display:"",height:""}),o.$evalAsync(function(){n.animate(a,{display:"block",height:"0px"},{height:i+"px"},p.expandAnimation).then(function(){a.addClass(p.expanded),a.css({height:""}),e.resolve({success:!0})})}),e.promise}function m(){var e=t.defer();if(l())return e.reject({error:!0}),e.promise;r.attr("collapsed",!0);var a=angular.element(r.find("ms-nav-toggle-items")[0]),i=a[0].offsetHeight;return o.$evalAsync(function(){n.animate(a,{height:i+"px"},{height:"0px"},p.collapseAnimation).then(function(){a.removeClass(p.expanded),a.css({display:"",height:""}),e.resolve({success:!0})})}),e.promise}var p={expanded:"expanded",expandAnimation:"expand-animation",collapseAnimation:"collapse-animation"},g=r.find("a"),v=[],f=/\(.*\)/g;angular.forEach(g,function(e){var t=angular.element(e).attr("ui-sref");angular.isUndefined(t)||(t=t.replace(f,""),v.push(t))}),s.setToggleItem(r,o),r.children(".ms-nav-button").on("click",d),o.$on("$destroy",function(){r.children(".ms-nav-button").off("click")}),o.$on("msNav::collapse",function(){var e=s.getLockedItems(),t=!1;angular.forEach(e,function(e){angular.equals(e.scope,o)&&(t=!0)}),t||m().then(function(){s.enable()})}),o.$on("msNav::forceCollapse",function(){m().then(function(){s.enable()})}),o.$on("msNav::expandMatchingToggles",function(){var e=a.current.name,t=!1;angular.forEach(v,function(n){e===n&&(t=!0)}),t?u():m()}),o.$on("msNav::pushToLockedList",function(){s.setLockedItem(r,o)})}}}}t.$inject=["$document","$rootScope","msNavFoldService"],a.$inject=["$rootScope","$mdComponentRegistry","msNavFoldService"],i.$inject=["$rootScope","$q","$animate","$state"],angular.module("app.core").factory("msNavFoldService",e).directive("msNavIsFolded",t).controller("MsNavController",n).directive("msNav",a).directive("msNavTitle",o).directive("msNavButton",r).directive("msNavToggle",i)}(),function(){"use strict";function e(e,t,n,a){function o(e,t){c.selectedPalette=e,c.selectedHues=t}function r(e,t){d(e,t),l(),n.hide()}function i(){c.selectedColor={palette:"",hue:"","class":""},o(!1,!1),l()}function s(){if(!c.modelCtrl.$viewValue||""===c.modelCtrl.$viewValue)return void i();var e,t;if("class"===c.msModelType){var n=c.modelCtrl.$viewValue.split("-");n.length>=5?(e=n[1]+"-"+n[2],t=n[3]):(e=n[1],t=n[2])}else"obj"===c.msModelType&&(e=c.modelCtrl.$viewValue.palette,t=c.modelCtrl.$viewValue.hue||500);d(e,t)}function d(t,n){c.selectedColor={palette:t,hue:n,"class":"md-"+t+"-"+n+"-bg",bgColorValue:a.rgba(c.palettes[t][n].value),fgColorValue:a.rgba(c.palettes[t][n].contrast)},"obj"!==c.msModelType||angular.equals(c.selectedColor,c.modelCtrl.$viewValue)||l(),o(t,c.palettes[t]),e.$selectedColor=c.selectedColor}function l(){"class"===c.msModelType?c.modelCtrl.$setViewValue(c.selectedColor["class"]):"obj"===c.msModelType&&c.modelCtrl.$setViewValue(c.selectedColor)}var c=this;c.palettes=t,c.selectedPalette=!1,c.selectedHues=!1,e.$selectedColor={},c.activateHueSelection=o,c.selectColor=r,c.removeColor=i,e.$watch("ngModel",s)}function t(){return{require:["msMaterialColorPicker","ngModel"],restrict:"E",scope:{ngModel:"=",msModelType:"@?"},controller:"msMaterialColorPickerController as vm",transclude:!0,templateUrl:"app/core/directives/ms-material-color-picker/ms-material-color-picker.html",link:function(e,t,n,a,o){var r=a[0];r.modelCtrl=a[1],r.msModelType=e.msModelType||"class",o(e,function(e){e=e.filter(function(e,t){return 1===t.nodeType?!0:!1}),e.length&&t.find("ms-color-picker-button").replaceWith(e)})}}}e.$inject=["$scope","$mdColorPalette","$mdMenu","fuseGenerator"],angular.module("app.core").controller("msMaterialColorPickerController",e).directive("msMaterialColorPicker",t)}(),function(){"use strict";function e(e,t,n,a){function o(){l.options=l.options?angular.extend(c,l.options):c,i()}function r(e,n){if("undefined"!=typeof imagesLoaded){var a=t.imagesLoaded(e);a.on("done",function(){n()})}else n()}function i(){e.$watch(function(){return l.container.width()},function(e,t){e!==t&&s()})}function s(){function t(){l.containerPos=l.container[0].getBoundingClientRect(),d(),e.$broadcast("msMasonry:relayoutStarted"),l.items=l.container.find("ms-masonry-item");for(var t=Array.apply(null,new Array(l.columnCount)).map(function(){return 0}),n=0;n<l.items.length;n++){var a,o,r,i,s=l.items[n];s=angular.element(s),s.scope()&&s.scope().$broadcast("msMasonryItem:startReLayout"),s.css({width:l.columnWidth}),l.options.respectItemOrder?(r=n%l.columnCount,i=t[r]):(i=Math.min.apply(Math,t),r=t.indexOf(i)),t[r]=i+s[0].getBoundingClientRect().height,a=Math.round(r*l.columnWidth),o=i,s.css({transform:"translate3d("+a+"px,"+o+"px,0px)"}),s.addClass("placed"),s.scope()&&s.scope().$broadcast("msMasonryItem:finishReLayout")}}u&&a.cancel(u),u=a(function(){t(),e.$broadcast("msMasonry:relayoutFinished")},l.options.reLayoutDebounce)}function d(){l.columnCount=l.options.columnCount,n("gt-md")?l.columnCount=l.options.columnCount:n("md")?l.columnCount=l.columnCount>l.options.responsive.md?l.options.responsive.md:l.columnCount:n("sm")?l.columnCount=l.columnCount>l.options.responsive.sm?l.options.responsive.sm:l.columnCount:l.columnCount=l.options.responsive.xs,l.columnWidth=l.containerPos.width/l.columnCount}var l=this,c={columnCount:5,respectItemOrder:!1,reLayoutDebounce:400,responsive:{md:3,sm:2,xs:1}},u=!0;l.options=null,l.container=[],l.containerPos="",l.columnWidth="",l.items=[],l.reLayout=s,l.initialize=o,l.waitImagesLoaded=r,e.$on("msMasonry:relayout",function(){s()})}function t(e){function t(t,n){return{pre:function(e,a,o,r){r.options=angular.fromJson(n.options||"{}"),r.container=t},post:function(t,n,a,o){e(function(){o.initialize()})}}}return{restrict:"AEC",controller:"msMasonryController",compile:t}}function n(){function e(e,t,n,a){a.waitImagesLoaded(t,function(){a.reLayout()}),e.$on("msMasonryItem:finishReLayout",function(){e.$watch(function(){return t.height()},function(e,t){e!==t&&a.reLayout()})}),t.on("$destroy",function(){a.reLayout()})}return{restrict:"AEC",require:"^msMasonry",priority:1,link:e}}e.$inject=["$scope","$window","$mdMedia","$timeout"],t.$inject=["$timeout"],angular.module("app.core").controller("msMasonryController",e).directive("msMasonry",t).directive("msMasonryItem",n)}(),function(){"use strict";function e(e){return{restrict:"E",scope:{},transclude:!0,templateUrl:"app/core/directives/ms-info-bar/ms-info-bar.html",link:function(t,n){function a(){o.removeClass(r),n.remove(),t.$destroy()}var o=e.find("body"),r="ms-info-bar-active";o.addClass(r),t.removeInfoBar=a}}}e.$inject=["$document"],angular.module("app.core").directive("msInfoBar",e)}(),function(){"use strict";function e(){function e(e){m.forms.push(e)}function t(){i()||m.selectedIndex--}function n(){s()||m.selectedIndex++}function a(){m.selectedIndex=0}function o(){m.selectedIndex=r()-1}function r(){return m.forms.length}function i(){return 0===m.selectedIndex}function s(){return m.selectedIndex===r()-1}function d(){return angular.isDefined(m.forms[m.selectedIndex])&&m.forms[m.selectedIndex].$invalid}function l(){return m.selectedIndex>0&&angular.isDefined(m.forms[m.selectedIndex-1])&&m.forms[m.selectedIndex-1].$invalid}function c(){for(var e=0;e<m.forms.length;e++)if(m.forms[e].$invalid)return!0;return!1}function u(){m.selectedIndex=0;for(var e=0;e<m.forms.length;e++)m.forms[e].$setPristine(),m.forms[e].$setUntouched()}var m=this;m.forms=[],m.selectedIndex=0,m.registerForm=e,m.previousStep=t,m.nextStep=n,m.firstStep=a,m.lastStep=o,m.totalSteps=r,m.isFirstStep=i,m.isLastStep=s,m.currentStepInvalid=d,m.previousStepInvalid=l,m.formsIncomplete=c,m.resetForm=u}function t(){return{restrict:"E",scope:!0,controller:"MsFormWizardController as msWizard",
compile:function(e){return e.addClass("ms-form-wizard"),function(){}}}}function n(){return{restrict:"A",require:["form","^msFormWizard"],compile:function(e){return e.addClass("ms-form-wizard-form"),function(e,t,n,a){var o=a[0],r=a[1];r.registerForm(o)}}}}angular.module("app.core").controller("MsFormWizardController",e).directive("msFormWizard",t).directive("msFormWizardForm",n)}(),function(){"use strict";function e(){function e(e){n=angular.extend({},n,e)}var t=this,n={formatter:function(e){return e?""===e?e:new Date(e):""},parser:function(e){return e?moment(e).add(moment(e).utcOffset(),"m").toDate():""}};t.config=e,t.$get=function(){return n}}function t(e){return{require:"ngModel",priority:1,link:function(t,n,a,o){o.$formatters.push(e.formatter),o.$parsers.push(e.parser)}}}t.$inject=["msDatepickerFixConfig"],angular.module("app.core").provider("msDatepickerFixConfig",e).directive("msDatepickerFix",t)}(),function(){"use strict";function e(){return{restrict:"E",scope:{templatePath:"=template",card:"=ngModel",vm:"=viewModel"},template:'<div class="ms-card-content-wrapper" ng-include="templatePath" onload="cardTemplateLoaded()"></div>',compile:function(e){return e.addClass("ms-card"),function(e,t){function n(){e.$emit("msCard::cardTemplateLoaded",t)}e.cardTemplateLoaded=n}}}}angular.module("app.core").directive("msCard",e)}(),function(){"use strict";function e(e,t,n){function a(){return n.PALETTES}function o(){return n.THEMES}function r(n){return angular.isUndefined(s.themes.list[n])?angular.isUndefined(s.themes.list["default"])?void t.error('You must have at least one theme named "default"'):(t.warn('The theme "'+n+'" does not exist! Falling back to the "default" theme.'),s.themes.active.name="default",s.themes.active.theme=s.themes.list["default"],void e.put("selectedTheme",s.themes.active.name)):(s.themes.active.name=n,s.themes.active.theme=s.themes.list[n],void e.put("selectedTheme",n))}function i(e){s.themes.list=e}var s={getRegisteredPalettes:a,getRegisteredThemes:o,setActiveTheme:r,setThemesList:i,themes:{list:{},active:{name:"",theme:{}}}};return s}e.$inject=["$cookies","$log","$mdTheming"],angular.module("app.core").service("fuseTheming",e)}(),function(){"use strict";function e(e,t,n){var a;angular.injector(["ngCookies"]).invoke(["$cookies",function(e){a=e}]);var o=a.getObject("customTheme");o&&(n.custom=o),e.alwaysWatchTheme(!0),angular.forEach(t,function(t){e.definePalette(t.name,t.options)}),angular.forEach(n,function(t,n){e.theme(n).primaryPalette(t.primary.name,t.primary.hues).accentPalette(t.accent.name,t.accent.hues).warnPalette(t.warn.name,t.warn.hues).backgroundPalette(t.background.name,t.background.hues)})}e.$inject=["$mdThemingProvider","fusePalettes","fuseThemes"],angular.module("app.core").config(e)}(),function(){"use strict";var e={"default":{primary:{name:"fuse-paleblue",hues:{"default":"700","hue-1":"500","hue-2":"600","hue-3":"400"}},accent:{name:"light-blue",hues:{"default":"600","hue-1":"400","hue-2":"700","hue-3":"A100"}},warn:{name:"red"},background:{name:"grey",hues:{"default":"A100","hue-1":"A100","hue-2":"100","hue-3":"300"}}},pinkTheme:{primary:{name:"blue-grey",hues:{"default":"800","hue-1":"600","hue-2":"400","hue-3":"A100"}},accent:{name:"pink",hues:{"default":"400","hue-1":"300","hue-2":"600","hue-3":"A100"}},warn:{name:"blue"},background:{name:"grey",hues:{"default":"A100","hue-1":"A100","hue-2":"100","hue-3":"300"}}},tealTheme:{primary:{name:"fuse-blue",hues:{"default":"900","hue-1":"600","hue-2":"500","hue-3":"A100"}},accent:{name:"teal",hues:{"default":"500","hue-1":"400","hue-2":"600","hue-3":"A100"}},warn:{name:"deep-orange"},background:{name:"grey",hues:{"default":"A100","hue-1":"A100","hue-2":"100","hue-3":"300"}}}};angular.module("app.core").constant("fuseThemes",e)}(),function(){"use strict";var e=[{name:"fuse-blue",options:{50:"#ebf1fa",100:"#c2d4ef",200:"#9ab8e5",300:"#78a0dc",400:"#5688d3",500:"#3470ca",600:"#2e62b1",700:"#275498",800:"#21467e",900:"#1a3865",A100:"#c2d4ef",A200:"#9ab8e5",A400:"#5688d3",A700:"#275498",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 A100",contrastStrongLightColors:"300 400"}},{name:"fuse-paleblue",options:{50:"#ececee",100:"#c5c6cb",200:"#9ea1a9",300:"#7d818c",400:"#5c616f",500:"#3c4252",600:"#353a48",700:"#2d323e",800:"#262933",900:"#1e2129",A100:"#c5c6cb",A200:"#9ea1a9",A400:"#5c616f",A700:"#2d323e",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 A100",contrastStrongLightColors:"300 400"}}];angular.module("app.core").constant("fusePalettes",e)}(),function(){"use strict";function e(e,t,n){function a(){var e=angular.copy(n.getRegisteredThemes()),t=angular.copy(n.getRegisteredPalettes());angular.forEach(e,function(e){l[e.name]={},angular.forEach(e.colors,function(n,a){l[e.name][a]={name:n.name,levels:{"default":{color:i(t[n.name][n.hues["default"]].value),contrast1:i(t[n.name][n.hues["default"]].contrast,1),contrast2:i(t[n.name][n.hues["default"]].contrast,2),contrast3:i(t[n.name][n.hues["default"]].contrast,3),contrast4:i(t[n.name][n.hues["default"]].contrast,4)},hue1:{color:i(t[n.name][n.hues["hue-1"]].value),contrast1:i(t[n.name][n.hues["hue-1"]].contrast,1),contrast2:i(t[n.name][n.hues["hue-1"]].contrast,2),contrast3:i(t[n.name][n.hues["hue-1"]].contrast,3),contrast4:i(t[n.name][n.hues["hue-1"]].contrast,4)},hue2:{color:i(t[n.name][n.hues["hue-2"]].value),contrast1:i(t[n.name][n.hues["hue-2"]].contrast,1),contrast2:i(t[n.name][n.hues["hue-2"]].contrast,2),contrast3:i(t[n.name][n.hues["hue-2"]].contrast,3),contrast4:i(t[n.name][n.hues["hue-2"]].contrast,4)},hue3:{color:i(t[n.name][n.hues["hue-3"]].value),contrast1:i(t[n.name][n.hues["hue-3"]].contrast,1),contrast2:i(t[n.name][n.hues["hue-3"]].contrast,2),contrast3:i(t[n.name][n.hues["hue-3"]].contrast,3),contrast4:i(t[n.name][n.hues["hue-3"]].contrast,4)}}}})}),o(l);var a={};angular.forEach(l,function(e,t){a={},a["@themeName"]=t,angular.forEach(e,function(e,t){angular.forEach(e.levels,function(e,n){angular.forEach(e,function(e,o){a["@"+t+d(n)+d(o)]=e})})}),r(a)})}function o(t){var a=angular.copy(t);angular.forEach(a,function(e){angular.forEach(e,function(t,n){e[n]=t.levels,e[n].color=t.levels["default"].color,e[n].contrast1=t.levels["default"].contrast1,e[n].contrast2=t.levels["default"].contrast2,e[n].contrast3=t.levels["default"].contrast3,e[n].contrast4=t.levels["default"].contrast4,delete e[n]["default"]})}),n.setThemesList(a);var o=e.get("selectedTheme");o?n.setActiveTheme(o):n.setActiveTheme("default")}function r(e){var t='/* Content hack because they wont fix */\n/* https://github.com/angular/material/pull/8067 */\n[md-theme="@themeName"] md-content.md-hue-1,\nmd-content.md-@themeName-theme.md-hue-1 {\n    color: @backgroundHue1Contrast1;\n    background-color: @backgroundHue1Color;\n}\n\n[md-theme="@themeName"] md-content.md-hue-2,\nmd-content.md-@themeName-theme.md-hue-2 {\n    color: @backgroundHue2Contrast1;\n    background-color: @backgroundHue2Color;\n}\n\n[md-theme="@themeName"] md-content.md-hue-3,\n md-content.md-@themeName-theme.md-hue-3 {\n    color: @backgroundHue3Contrast1;\n    background-color: @backgroundHue3Color;\n}\n\n/* Text Colors */\n[md-theme="@themeName"] a {\n    color: @accentDefaultColor;\n}\n\n[md-theme="@themeName"] .secondary-text,\n[md-theme="@themeName"] .icon {\n    color: @backgroundDefaultContrast2;\n}\n\n[md-theme="@themeName"] .hint-text,\n[md-theme="@themeName"] .disabled-text {\n    color: @backgroundDefaultContrast3;\n}\n\n[md-theme="@themeName"] .fade-text,\n[md-theme="@themeName"] .divider {\n    color: @backgroundDefaultContrast4;\n}\n\n/* Primary */\n[md-theme="@themeName"] .md-primary-bg {\n    background-color: @primaryDefaultColor;\n    color: @primaryDefaultContrast1;\n}\n\n[md-theme="@themeName"] .md-primary-bg .secondary-text,\n[md-theme="@themeName"] .md-primary-bg .icon {\n    color: @primaryDefaultContrast2;\n}\n\n[md-theme="@themeName"] .md-primary-bg .hint-text,\n[md-theme="@themeName"] .md-primary-bg .disabled-text {\n    color: @primaryDefaultContrast3;\n}\n\n[md-theme="@themeName"] .md-primary-bg .fade-text,\n[md-theme="@themeName"] .md-primary-bg .divider {\n    color: @primaryDefaultContrast4;\n}\n\n/* Primary, Hue-1 */\n[md-theme="@themeName"] .md-primary-bg.md-hue-1 {\n    background-color: @primaryHue1Color;\n    color: @primaryHue1Contrast1;\n}\n\n[md-theme="@themeName"] .md-primary-bg.md-hue-1 .secondary-text,\n[md-theme="@themeName"] .md-primary-bg.md-hue-1 .icon {\n    color: @primaryHue1Contrast2;\n}\n\n[md-theme="@themeName"] .md-primary-bg.md-hue-1 .hint-text,\n[md-theme="@themeName"] .md-primary-bg.md-hue-1 .disabled-text {\n    color: @primaryHue1Contrast3;\n}\n\n[md-theme="@themeName"] .md-primary-bg.md-hue-1 .fade-text,\n[md-theme="@themeName"] .md-primary-bg.md-hue-1 .divider {\n    color: @primaryHue1Contrast4;\n}\n\n/* Primary, Hue-2 */\n[md-theme="@themeName"] .md-primary-bg.md-hue-2 {\n    background-color: @primaryHue2Color;\n    color: @primaryHue2Contrast1;\n}\n\n[md-theme="@themeName"] .md-primary-bg.md-hue-2 .secondary-text,\n[md-theme="@themeName"] .md-primary-bg.md-hue-2 .icon {\n    color: @primaryHue2Contrast2;\n}\n\n[md-theme="@themeName"] .md-primary-bg.md-hue-2 .hint-text,\n[md-theme="@themeName"] .md-primary-bg.md-hue-2 .disabled-text {\n    color: @primaryHue2Contrast3;\n}\n\n[md-theme="@themeName"] .md-primary-bg.md-hue-2 .fade-text,\n[md-theme="@themeName"] .md-primary-bg.md-hue-2 .divider {\n    color: @primaryHue2Contrast4;\n}\n\n/* Primary, Hue-3 */\n[md-theme="@themeName"] .md-primary-bg.md-hue-3 {\n    background-color: @primaryHue3Color;\n    color: @primaryHue3Contrast1;\n}\n\n[md-theme="@themeName"] .md-primary-bg.md-hue-3 .secondary-text,\n[md-theme="@themeName"] .md-primary-bg.md-hue-3 .icon {\n    color: @primaryHue3Contrast1;\n}\n\n[md-theme="@themeName"] .md-primary-bg.md-hue-3 .hint-text,\n[md-theme="@themeName"] .md-primary-bg.md-hue-3 .disabled-text {\n    color: @primaryHue3Contrast3;\n}\n\n[md-theme="@themeName"] .md-primary-bg.md-hue-3 .fade-text,\n[md-theme="@themeName"] .md-primary-bg.md-hue-3 .divider {\n    color: @primaryHue3Contrast4;\n}\n\n/* Primary foreground */\n[md-theme="@themeName"] .md-primary-fg {\n    color: @primaryDefaultColor !important;\n}\n\n/* Primary foreground, Hue-1 */\n[md-theme="@themeName"] .md-primary-fg.md-hue-1 {\n    color: @primaryHue1Color !important;\n}\n\n/* Primary foreground, Hue-2 */\n[md-theme="@themeName"] .md-primary-fg.md-hue-2 {\n    color: @primaryHue2Color !important;\n}\n\n/* Primary foreground, Hue-3 */\n[md-theme="@themeName"] .md-primary-fg.md-hue-3 {\n    color: @primaryHue3Color !important;\n}\n\n/* Accent */\n[md-theme="@themeName"] .md-accent-bg {\n    background-color: @accentDefaultColor;\n    color: @accentDefaultContrast1;\n}\n\n[md-theme="@themeName"] .md-accent-bg .secondary-text,\n[md-theme="@themeName"] .md-accent-bg .icon {\n    color: @accentDefaultContrast2;\n}\n\n[md-theme="@themeName"] .md-accent-bg .hint-text,\n[md-theme="@themeName"] .md-accent-bg .disabled-text {\n    color: @accentDefaultContrast3;\n}\n\n[md-theme="@themeName"] .md-accent-bg .fade-text,\n[md-theme="@themeName"] .md-accent-bg .divider {\n    color: @accentDefaultContrast4;\n}\n\n/* Accent, Hue-1 */\n[md-theme="@themeName"] .md-accent-bg.md-hue-1 {\n    background-color: @accentHue1Color;\n    color: @accentHue1Contrast1;\n}\n\n[md-theme="@themeName"] .md-accent-bg.md-hue-1 .secondary-text,\n[md-theme="@themeName"] .md-accent-bg.md-hue-1 .icon {\n    color: @accentHue1Contrast2;\n}\n\n[md-theme="@themeName"] .md-accent-bg.md-hue-1 .hint-text,\n[md-theme="@themeName"] .md-accent-bg.md-hue-1 .disabled-text {\n    color: @accentHue1Contrast3;\n}\n\n[md-theme="@themeName"] .md-accent-bg.md-hue-1 .fade-text,\n[md-theme="@themeName"] .md-accent-bg.md-hue-1 .divider {\n    color: @accentHue1Contrast4;\n}\n\n/* Accent, Hue-2 */\n[md-theme="@themeName"] .md-accent-bg.md-hue-2 {\n    background-color: @accentHue2Color;\n    color: @accentHue2Contrast1;\n}\n\n[md-theme="@themeName"] .md-accent-bg.md-hue-2 .secondary-text,\n[md-theme="@themeName"] .md-accent-bg.md-hue-2 .icon {\n    color: @accentHue2Contrast2;\n}\n\n[md-theme="@themeName"] .md-accent-bg.md-hue-2 .hint-text,\n[md-theme="@themeName"] .md-accent-bg.md-hue-2 .disabled-text {\n    color: @accentHue2Contrast3;\n}\n\n[md-theme="@themeName"] .md-accent-bg.md-hue-2 .fade-text,\n[md-theme="@themeName"] .md-accent-bg.md-hue-2 .divider {\n    color: @accentHue2Contrast4;\n}\n\n/* Accent, Hue-3 */\n[md-theme="@themeName"] .md-accent-bg.md-hue-3 {\n    background-color: @accentHue3Color;\n    color: @accentHue3Contrast1;\n}\n\n[md-theme="@themeName"] .md-accent-bg.md-hue-3 .secondary-text,\n[md-theme="@themeName"] .md-accent-bg.md-hue-3 .icon {\n    color: @accentHue3Contrast1;\n}\n\n[md-theme="@themeName"] .md-accent-bg.md-hue-3 .hint-text,\n[md-theme="@themeName"] .md-accent-bg.md-hue-3 .disabled-text {\n    color: @accentHue3Contrast3;\n}\n\n[md-theme="@themeName"] .md-accent-bg.md-hue-3 .fade-text,\n[md-theme="@themeName"] .md-accent-bg.md-hue-3 .divider {\n    color: @accentHue3Contrast4;\n}\n\n/* Accent foreground */\n[md-theme="@themeName"] .md-accent-fg {\n    color: @accentDefaultColor !important;\n}\n\n/* Accent foreground, Hue-1 */\n[md-theme="@themeName"] .md-accent-fg.md-hue-1 {\n    color: @accentHue1Color !important;\n}\n\n/* Accent foreground, Hue-2 */\n[md-theme="@themeName"] .md-accent-fg.md-hue-2 {\n    color: @accentHue2Color !important;\n}\n\n/* Accent foreground, Hue-3 */\n[md-theme="@themeName"] .md-accent-fg.md-hue-3 {\n    color: @accentHue3Color !important;\n}\n\n/* Warn */\n[md-theme="@themeName"] .md-warn-bg {\n    background-color: @warnDefaultColor;\n    color: @warnDefaultContrast1;\n}\n\n[md-theme="@themeName"] .md-warn-bg .secondary-text,\n[md-theme="@themeName"] .md-warn-bg .icon {\n    color: @warnDefaultContrast2;\n}\n\n[md-theme="@themeName"] .md-warn-bg .hint-text,\n[md-theme="@themeName"] .md-warn-bg .disabled-text {\n    color: @warnDefaultContrast3;\n}\n\n[md-theme="@themeName"] .md-warn-bg .fade-text,\n[md-theme="@themeName"] .md-warn-bg .divider {\n    color: @warnDefaultContrast4;\n}\n\n/* Warn, Hue-1 */\n[md-theme="@themeName"] .md-warn-bg.md-hue-1 {\n    background-color: @warnHue1Color;\n    color: @warnHue1Contrast1;\n}\n\n[md-theme="@themeName"] .md-warn-bg.md-hue-1 .secondary-text,\n[md-theme="@themeName"] .md-warn-bg.md-hue-1 .icon {\n    color: @warnHue1Contrast2;\n}\n\n[md-theme="@themeName"] .md-warn-bg.md-hue-1 .hint-text,\n[md-theme="@themeName"] .md-warn-bg.md-hue-1 .disabled-text {\n    color: @warnHue1Contrast3;\n}\n\n[md-theme="@themeName"] .md-warn-bg.md-hue-1 .fade-text,\n[md-theme="@themeName"] .md-warn-bg.md-hue-1 .divider {\n    color: @warnHue1Contrast4;\n}\n\n/* Warn, Hue-2 */\n[md-theme="@themeName"] .md-warn-bg.md-hue-2 {\n    background-color: @warnHue2Color;\n    color: @warnHue2Contrast1;\n}\n\n[md-theme="@themeName"] .md-warn-bg.md-hue-2 .secondary-text,\n[md-theme="@themeName"] .md-warn-bg.md-hue-2 .icon {\n    color: @warnHue2Contrast2;\n}\n\n[md-theme="@themeName"] .md-warn-bg.md-hue-2 .hint-text,\n[md-theme="@themeName"] .md-warn-bg.md-hue-2 .disabled-text {\n    color: @warnHue2Contrast3;\n}\n\n[md-theme="@themeName"] .md-warn-bg.md-hue-2 .fade-text,\n[md-theme="@themeName"] .md-warn-bg.md-hue-2 .divider {\n    color: @warnHue2Contrast4;\n}\n\n/* Warn, Hue-3 */\n[md-theme="@themeName"] .md-warn-bg.md-hue-3 {\n    background-color: @warnHue3Color;\n    color: @warnHue3Contrast1;\n}\n\n[md-theme="@themeName"] .md-warn-bg.md-hue-3 .secondary-text,\n[md-theme="@themeName"] .md-warn-bg.md-hue-3 .icon {\n    color: @warnHue3Contrast1;\n}\n\n[md-theme="@themeName"] .md-warn-bg.md-hue-3 .hint-text,\n[md-theme="@themeName"] .md-warn-bg.md-hue-3 .disabled-text {\n    color: @warnHue3Contrast3;\n}\n\n[md-theme="@themeName"] .md-warn-bg.md-hue-3 .fade-text,\n[md-theme="@themeName"] .md-warn-bg.md-hue-3 .divider {\n    color: @warnHue3Contrast4;\n}\n\n/* Warn foreground */\n[md-theme="@themeName"] .md-warn-fg {\n    color: @warnDefaultColor !important;\n}\n\n/* Warn foreground, Hue-1 */\n[md-theme="@themeName"] .md-warn-fg.md-hue-1 {\n    color: @warnHue1Color !important;\n}\n\n/* Warn foreground, Hue-2 */\n[md-theme="@themeName"] .md-warn-fg.md-hue-2 {\n    color: @warnHue2Color !important;\n}\n\n/* Warn foreground, Hue-3 */\n[md-theme="@themeName"] .md-warn-fg.md-hue-3 {\n    color: @warnHue3Color !important;\n}\n\n/* Background */\n[md-theme="@themeName"] .md-background-bg {\n    background-color: @backgroundDefaultColor;\n    color: @backgroundDefaultContrast1;\n}\n\n[md-theme="@themeName"] .md-background-bg .secondary-text,\n[md-theme="@themeName"] .md-background-bg .icon {\n    color: @backgroundDefaultContrast2;\n}\n\n[md-theme="@themeName"] .md-background-bg .hint-text,\n[md-theme="@themeName"] .md-background-bg .disabled-text {\n    color: @backgroundDefaultContrast3;\n}\n\n[md-theme="@themeName"] .md-background-bg .fade-text,\n[md-theme="@themeName"] .md-background-bg .divider {\n    color: @backgroundDefaultContrast4;\n}\n\n/* Background, Hue-1 */\n[md-theme="@themeName"] .md-background-bg.md-hue-1 {\n    background-color: @backgroundHue1Color;\n    color: @backgroundHue1Contrast1;\n}\n\n[md-theme="@themeName"] .md-background-bg.md-hue-1 .secondary-text,\n[md-theme="@themeName"] .md-background-bg.md-hue-1 .icon {\n    color: @backgroundHue1Contrast2;\n}\n\n[md-theme="@themeName"] .md-background-bg.md-hue-1 .hint-text,\n[md-theme="@themeName"] .md-background-bg.md-hue-1 .disabled-text {\n    color: @backgroundHue1Contrast3;\n}\n\n[md-theme="@themeName"] .md-background-bg.md-hue-1 .fade-text,\n[md-theme="@themeName"] .md-background-bg.md-hue-1 .divider {\n    color: @backgroundHue1Contrast4;\n}\n\n/* Background, Hue-2 */\n[md-theme="@themeName"] .md-background-bg.md-hue-2 {\n    background-color: @backgroundHue2Color;\n    color: @backgroundHue2Contrast1;\n}\n\n[md-theme="@themeName"] .md-background-bg.md-hue-2 .secondary-text,\n[md-theme="@themeName"] .md-background-bg.md-hue-2 .icon {\n    color: @backgroundHue2Contrast2;\n}\n\n[md-theme="@themeName"] .md-background-bg.md-hue-2 .hint-text,\n[md-theme="@themeName"] .md-background-bg.md-hue-2 .disabled-text {\n    color: @backgroundHue2Contrast3;\n}\n\n[md-theme="@themeName"] .md-background-bg.md-hue-2 .fade-text,\n[md-theme="@themeName"] .md-background-bg.md-hue-2 .divider {\n    color: @backgroundHue2Contrast4;\n}\n\n/* Background, Hue-3 */\n[md-theme="@themeName"] .md-background-bg.md-hue-3 {\n    background-color: @backgroundHue3Color;\n    color: @backgroundHue3Contrast1;\n}\n\n[md-theme="@themeName"] .md-background-bg.md-hue-3 .secondary-text,\n[md-theme="@themeName"] .md-background-bg.md-hue-3 .icon {\n    color: @backgroundHue3Contrast1;\n}\n\n[md-theme="@themeName"] .md-background-bg.md-hue-3 .hint-text,\n[md-theme="@themeName"] .md-background-bg.md-hue-3 .disabled-text {\n    color: @backgroundHue3Contrast3;\n}\n\n[md-theme="@themeName"] .md-background-bg.md-hue-3 .fade-text,\n[md-theme="@themeName"] .md-background-bg.md-hue-3 .divider {\n    color: @backgroundHue3Contrast4;\n}\n\n/* Background foreground */\n[md-theme="@themeName"] .md-background-fg {\n    color: @backgroundDefaultColor !important;\n}\n\n/* Background foreground, Hue-1 */\n[md-theme="@themeName"] .md-background-fg.md-hue-1 {\n    color: @backgroundHue1Color !important;\n}\n\n/* Background foreground, Hue-2 */\n[md-theme="@themeName"] .md-background-fg.md-hue-2 {\n    color: @backgroundHue2Color !important;\n}\n\n/* Background foreground, Hue-3 */\n[md-theme="@themeName"] .md-background-fg.md-hue-3 {\n    color: @backgroundHue3Color !important;\n}',n=new RegExp(Object.keys(e).join("|"),"gi"),a=t.replace(n,function(t){return e[t]}),o=angular.element("head"),r=angular.element('<style type="text/css"></style>');r.html(a),o.append(r)}function i(e,n){var a=n||!1;return 4===e.length&&255===e[0]&&255===e[1]&&255===e[2]&&e.splice(3,4),a&&(e=s(e,a)),3===e.length?"rgb("+e.join(",")+")":4===e.length?"rgba("+e.join(",")+")":void t.error("Invalid number of arguments supplied in the color array: "+e.length+"\nThe array must have 3 or 4 colors.")}function s(e,t){var n={white:{1:"1",2:"0.7",3:"0.3",4:"0.12"},black:{1:"0.87",2:"0.54",3:"0.26",4:"0.12"}};return 255===e[0]&&255===e[1]&&255===e[2]?e[3]=n.white[t]:0===e[0]&&0===e[1]&&0===e[2]&&(e[3]=n.black[t]),e}function d(e){return e.charAt(0).toUpperCase()+e.slice(1)}var l={},c={generate:a,rgba:i};return c}e.$inject=["$cookies","$log","fuseTheming"],angular.module("app.core").factory("fuseGenerator",e)}(),function(){"use strict";function e(e,t){function n(e){t.setActiveTheme(e)}function a(){return t.themes.active}function o(){var e=angular.element("body");e.toggleClass("boxed","boxed"===i.layoutMode)}function r(){e.put("layoutStyle",i.layoutStyle),location.reload()}var i=this;i.themes=t.themes,i.layoutModes=[{label:"Boxed",value:"boxed"},{label:"Wide",value:"wide"}],i.layoutStyles=[{label:"Vertical Navigation",value:"verticalNavigation",figure:"/assets/images/theme-options/vertical-nav.jpg"},{label:"Vertical Navigation with Fullwidth Toolbar",value:"verticalNavigationFullwidthToolbar",figure:"/assets/images/theme-options/vertical-nav-with-full-toolbar.jpg"},{label:"Vertical Navigation with Fullwidth Toolbar 2",value:"verticalNavigationFullwidthToolbar2",figure:"/assets/images/theme-options/vertical-nav-with-full-toolbar-2.jpg"},{label:"Horizontal Navigation",value:"horizontalNavigation",figure:"/assets/images/theme-options/horizontal-nav.jpg"},{label:"Content with Toolbar",value:"contentWithToolbar",figure:"/assets/images/theme-options/content-with-toolbar.jpg"},{label:"Content Only",value:"contentOnly",figure:"/assets/images/theme-options/content-only.jpg"}],i.layoutMode="wide",i.layoutStyle=e.get("layoutStyle")||"verticalNavigation",i.setActiveTheme=n,i.getActiveTheme=a,i.updateLayoutMode=o,i.updateLayoutStyle=r}function t(e){return{restrict:"E",scope:{},controller:"MsThemeOptionsController as vm",templateUrl:"app/core/theme-options/theme-options.html",compile:function(t){return t.addClass("ms-theme-options"),function(t){function n(){e("fuse-theme-options").toggle()}t.toggleOptionsSidenav=n}}}}e.$inject=["$cookies","fuseTheming"],t.$inject=["$mdSidenav"],angular.module("app.core").controller("MsThemeOptionsController",e).directive("msThemeOptions",t)}(),function(){"use strict";function e(e){function t(e,t){return t.indexOf(e)>-1}function n(){function t(e){for(var t=0;t<e.length;t++){var n=e[t].string,a=e[t].prop;if(r=e[t].versionSearch||e[t].identity,n){if(-1!==n.indexOf(e[t].subString))return e[t].identity}else if(a)return e[t].identity}}function n(e){var t=e.indexOf(r);if(-1!==t)return parseInt(e.substring(t+r.length+1))}if(s)return s;var a=[{string:e.navigator.userAgent,subString:"Edge",versionSearch:"Edge",identity:"Edge"},{string:e.navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:e.navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:e.navigator.vendor,subString:"Apple",versionSearch:"Version",identity:"Safari"},{prop:e.opera,identity:"Opera"},{string:e.navigator.vendor,subString:"iCab",identity:"iCab"},{string:e.navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:e.navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:e.navigator.vendor,subString:"Camino",identity:"Camino"},{string:e.navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:e.navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:e.navigator.userAgent,subString:"Trident/7",identity:"Explorer",versionSearch:"rv"},{string:e.navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:e.navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],o=[{string:e.navigator.platform,subString:"Win",identity:"Windows"},{string:e.navigator.platform,subString:"Mac",identity:"Mac"},{string:e.navigator.platform,subString:"Linux",identity:"Linux"},{string:e.navigator.platform,subString:"iPhone",identity:"iPhone"},{string:e.navigator.platform,subString:"iPod",identity:"iPod"},{string:e.navigator.platform,subString:"iPad",identity:"iPad"},{string:e.navigator.platform,subString:"Android",identity:"Android"}],r="",i=t(a)||"unknown-browser",d=n(e.navigator.userAgent)||n(e.navigator.appVersion)||"unknown-version",l=t(o)||"unknown-os";return i=i.toLowerCase(),d=i+"-"+d,l=l.toLowerCase(),s={browser:i,version:d,os:l}}function a(){var e=function(){return(65536*(1+Math.random())||0).toString(16).substring(1)};return e()+e()+e()+e()+e()+e()}function o(){return i.mobile()}function r(e,t){-1===t.indexOf(e)?t.push(e):t.splice(t.indexOf(e),1)}var i=new MobileDetect(e.navigator.userAgent),s=null,d={exists:t,detectBrowser:n,guidGenerator:a,isMobile:o,toggleInArray:r};return d}e.$inject=["$window"],angular.module("app.core").factory("msUtils",e)}(),function(){"use strict";function e(){function e(e){i=e}function t(){return i}function n(){return s}function a(e,t){return angular.isString(e)?angular.isArray(t)?void(s[e]={url:i+(t[0]||""),paramDefaults:t[1]||[],actions:t[2]||[],options:t[3]||{}}):void r.error('"resource" must be an array and it must follow $resource definition'):void r.error('"path" must be a string (eg. `dashboard.project`)')}var o=this,r=angular.injector(["ng"]).get("$log"),i="",s=[];o.setBaseUrl=e,o.getBaseUrl=t,o.getApiObject=n,o.register=a,this.$get=["$log","$q","$resource","$rootScope",function(n,o,r,i){function d(e,t){i.$broadcast("msApi::resolveStart");var a=e.split("@"),d=a[0],l=a[1],c=t||{};if(!d||!l)return n.error("msApi.resolve requires correct action parameter (resourceName@methodName)"),!1;var u=o.defer(),m=s[d];if(m){var p=r(m.url,m.paramDefaults,m.actions,m.options);p[l](c,function(e){u.resolve(e),i.$broadcast("msApi::resolveSuccess")},function(e){u.reject(e),i.$broadcast("msApi::resolveError")})}else n.error('Resource "'+d+'" is not defined in the api service!'),u.reject('Resource "'+d+'" is not defined in the api service!');return u.promise}function l(e,t,a,d){i.$broadcast("msApi::requestStart");var l=e.split("@"),c=l[0],u=l[1],m=t||{};if(!c||!u)return n.error("msApi.resolve requires correct action parameter (resourceName@methodName)"),!1;var p=o.defer(),g=s[c];if(g){var v=r(g.url,g.paramDefaults,g.actions,g.options);v[u](m,function(e){i.$broadcast("msApi::requestSuccess"),p.resolve(e),angular.isDefined(a)&&angular.isFunction(a)&&a(e)},function(e){i.$broadcast("msApi::requestError"),p.reject(e),angular.isDefined(d)&&angular.isFunction(d)&&d(e)})}else n.error('Resource "'+c+'" is not defined in the api service!'),p.reject('Resource "'+c+'" is not defined in the api service!');return p.promise}var c={setBaseUrl:e,getBaseUrl:t,register:a,resolve:d,request:l};return c}]}angular.module("app.core").provider("msApi",e)}(),function(){"use strict";function e(e,t,n){function a(n,a){var r=n.split("@"),i=r[0],s=r[1],d=a||{};if(!i||!s)return t.error("apiResolver.resolve requires correct action parameter (ResourceName@methodName)"),!1;var l=e.defer(),c=o(i);return c?c[s](d,function(e){l.resolve(e)},function(e){l.reject(e)}):(t.error('Resource "'+i+'" is not defined in the api service!'),l.reject('Resource "'+i+'" is not defined in the api service!')),l.promise}function o(e){for(var a=e.split("."),o=n,r=0;r<a.length;r++){if(angular.isUndefined(o[a[r]])){t.error('Resource part "'+a[r]+'" is not defined!'),o=!1;break}o=o[a[r]]}return o?o:!1}var r={resolve:a};return r}e.$inject=["$q","$log","api"],angular.module("app.core").factory("apiResolver",e)}(),function(){"use strict";function e(){return function(e,t){if(0===e.length||0===t.length)return e;var n=[];return e.forEach(function(e){var a=t.every(function(t){var n=!1;return e.tags.forEach(function(e){return e.name===t.name?void(n=!0):void 0}),n});a&&n.push(e)}),n}}function t(){return function(e,t){if(0!==e.length&&0!==t.length){if(e.length<t.length)return[];var n=[],a=t.every(function(t){var n=!1;return e.forEach(function(e){return e.name===t.name?void(n=!0):void 0}),n});return a&&n.push(e),n}}}angular.module("app.core").filter("filterByTags",e).filter("filterSingleByTags",t)}(),function(){"use strict";function e(){return function(e,t,n){if(0===e.length||!n||0===n.length)return e;for(var a=[],o=0;o<e.length;o++){for(var r=e[o],i=!1,s=0;s<n.length;s++){var d=n[s];if(r[t].indexOf(d)>-1){i=!0;break}}i&&a.push(r)}return a}}angular.module("app.core").filter("filterByPropIds",e)}(),function(){"use strict";function e(){return function(e,t){if(0===e.length||!t)return e;if(0===t.length)return[];for(var n=[],a=0;a<e.length;a++){for(var o=e[a],r=!1,i=0;i<t.length;i++){var s=t[i];if(o.id===s){r=!0;break}}r&&n.push(o)}return n}}angular.module("app.core").filter("filterByIds",e)}(),function(){"use strict";function e(e){return function(t){return e.trustAsHtml(t)}}function t(){return function(e){return String(e).replace(/<[^>]+>/gm,"")}}function n(){return function(e){return e?e.replace(/ /g,""):""}}function a(){return function(e){return e?"directive"===e.type?e.name.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()}):e.label||e.name:void 0}}e.$inject=["$sce"],angular.module("app.core").filter("toTrusted",e).filter("htmlToPlaintext",t).filter("nospace",n).filter("humanizeDoc",a)}(),function(){"use strict";function e(){return function(e){var t=Date.now()-new Date(e);return 36e5>t?moment(e).fromNow():864e5>t?moment(e).format("HH:mm"):6048e5>t?moment(e).format("dddd"):moment(e).calendar()}}angular.module("app.core").filter("altDate",e)}(),function(){"use strict";function e(e,t,n){return{restrict:"E",compile:function(a,o){var r;return o.code||(r=a.html(),a.empty()),function(a,o,i){function s(e,t){var n=t.find("code"),a=e.split("\n");a=a.filter(function(e){return e.trim().length});var o=a[0].match(/^\s*/)[0],r=new RegExp("^"+o);a=a.map(function(e){return e.replace(r,"").replace(/\s+$/,"")});var s=hljs.highlight(i.language||i.lang,a.join("\n"),!0);s.value=s.value.replace(/=<span class="hljs-value">""<\/span>/gi,"").replace("<head>","").replace("<head/>",""),n.append(s.value).addClass("highlight")}i.code&&(r=a.$eval(i.code));var d=a.$eval(i.shouldInterpolate);t.when(r).then(function(t){if(t){d&&(t=n(t)(a));var r=angular.element('<pre><code class="highlight" ng-non-bindable></code></pre>');o.append(r),e(function(){s(t,r)},34,!1)}})}}}}e.$inject=["$timeout","$q","$interpolate"],angular.module("app.core").directive("hljs",e)}(),function(){"use strict";function e(){function e(e){t=angular.extend({},t,e)}var t={disableCustomScrollbars:!1,disableMdInkRippleOnMobile:!0,disableCustomScrollbarsOnMobile:!0};this.config=e,this.$get=function(){function e(e){return angular.isUndefined(t[e])?!1:t[e]}function n(e,n){t[e]=n}var a={getConfig:e,setConfig:n};return a}}angular.module("app.core").provider("fuseConfig",e)}(),function(){"use strict";angular.module("fuse",["uiGmapgoogle-maps","lbServices","angularMoment","LocalStorageModule","md.data.table","toastr","ngRadialGauge","jkAngularCarousel","app.core","app.auth","app.theme","app.services","app.navigation","app.toolbar","app.pages"])}(),function(){"use strict";function e(e){function t(t,n,a){e.show(e.simple().textContent(t).position(a||"top right").hideDelay(n||3e3))}var n={showToast:t};return n}e.$inject=["$mdToast"],angular.module("fuse").factory("uiHelper",e)}(),function(){"use strict";function e(e){e.addPart("app/toolbar")}e.$inject=["$translatePartialLoaderProvider"],angular.module("app.toolbar",[]).config(e)}(),function(){"use strict";function e(e,t,n,a,o,r,i,s,d,l,c,u,m,p,g,v,f,h,y){function b(){u.getCurrentUser().then(function(e){$.customer=e}),$.selectedLanguage=$.languages[i.preferredLanguage()]}function S(e){r(e).toggle()}function w(e){l.show({controller:_,controllerAs:"vm",templateUrl:"app/toolbar/addNode.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1}).then(function(t){y.onStartWatchDevice(t),h.changeIconMarker(t),t.historyChart=f.createHistory(),t.gagueDO=f.createGague(0,20,"mg/l",[{
min:0,max:4.5,color:"#c74048"},{min:4.5,max:6,color:"#d58d34"},{min:6,max:20,color:"#37af45"}]),t.gagueWT=f.createGague(-40,40,"°C",[{min:-40,max:40,color:"#37af45"}]),g.getLastEvent(t).then(function(e){t.event=e,v.checkOldAlert(t)})["catch"](function(e){d.debug("no cache")}),C(e,t)})}function C(e,t){l.show(l.alert().parent(angular.element(document.querySelector("document.body"))).clickOutsideToClose(!1).title("Agregar Nodo").textContent("El nodo "+t.name+" se ha sido seguido con éxito.").ariaLabel("Agregar de Nodo").ok("Aceptar").targetEvent(e)).then(function(){})}function _(e,t,n,a,o,r){function i(){o.hide()}function s(){o.cancel()}function d(){e.loader=!0;var i=l.deviceForm;i.userId=p.currentUserId,n.debug("Node",i),n.debug("------------"),a.create(i).$promise.then(function(e){r.newDeviceCache(e),o.hide(e)})["catch"](function(e){if((e.status=401)&&e.data){var n=e.data.error;404==n.statusCode&&t.deviceForm.deviceId.$setValidity("not_found",!1)}})["finally"](function(){e.loader=!1})}var l=this;l.hide=i,l.cancel=s,l.add=d}function T(){t.loader=!0,u.logout().then(function(e){a.go("app.auth_login")})["finally"](function(){t.loader=!1})}function E(e){$.selectedLanguage=e,i.use(e.code)}function I(){$.bodyEl.toggleClass("ms-navigation-horizontal-mobile-menu-active")}function k(){c.toggleFolded()}function x(e){for(var t=[],a=c.getFlatNavigation(),r=n.defer(),i=0;i<a.length;i++)a[i].uisref&&t.push(a[i]);return e&&(t=t.filter(function(t){return angular.lowercase(t.title).search(angular.lowercase(e))>-1?!0:void 0})),o(function(){r.resolve(t)},1e3),r.promise}function A(e){e.uisref&&(e.stateParams?a.go(e.state,e.stateParams):a.go(e.state))}_.$inject=["$rootScope","$scope","$log","Device","$mdDialog","managerDeviceService"];var $=this;t.global={search:""},$.bodyEl=angular.element("body"),$.languages={en:{title:"English",translation:"TOOLBAR.ENGLISH",code:"en",flag:"us"},es:{title:"Spanish",translation:"TOOLBAR.SPANISH",code:"es",flag:"es"}},$.toggleSidenav=S,$.logout=T,$.changeLanguage=E,$.addNode=w,$.toggleHorizontalMobileMenu=I,$.toggleMsNavigationFolded=k,$.search=x,$.searchResultClick=A,b(),t.$on("updateProfile",function(e,t){d.debug(t),$.customer=t})}e.$inject=["$scope","$rootScope","$q","$state","$timeout","$mdSidenav","$translate","$mdToast","$log","$mdDialog","msNavigationService","authService","Device","LoopBackAuth","managerDeviceService","AlertService","ChartService","HelperService","MQTTUtils"],angular.module("app.toolbar").controller("ToolbarController",e)}(),function(){"use strict";angular.module("app.theme",[])}(),function(){"use strict";function e(e,t,n){angular.forEach(t,function(t){e.definePalette(t.name,t.options)}),angular.forEach(n,function(t,n){e.theme(n).primaryPalette(t.primary.name,t.primary.hues).accentPalette(t.accent.name,t.accent.hues).warnPalette(t.warn.name,t.warn.hues).backgroundPalette(t.background.name,t.background.hues)})}e.$inject=["$mdThemingProvider","haibuSmartPalettes","haibuSmartThemes"],angular.module("app.theme").config(e)}(),function(){"use strict";var e={haibuSmart:{primary:{name:"haibuSmart-blue",hues:{"default":"A700","hue-1":"A700","hue-2":"A400"}},accent:{name:"haibuSmart-blue",hues:{"default":"800","hue-1":"800","hue-2":"900"}},warn:{name:"haibuSmart-red",hues:{"default":"A700","hue-1":"A400"}},background:{name:"grey",hues:{"default":"A100","hue-1":"A100","hue-2":"100","hue-3":"300"}}}};angular.module("app.theme").constant("haibuSmartThemes",e)}(),function(){"use strict";var e=[{name:"haibuSmart-blue",options:{50:"#000000",100:"#000000",200:"#000000",300:"#000000",400:"#000000",500:"#000000",600:"#000000",700:"#000000",800:"#0075C9",900:"#005A83",A100:"#000000",A200:"#000000",A400:"#0095F4",A700:"#009bde",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 A100",contrastStrongLightColors:"300 400"}},{name:"haibuSmart-red",options:{50:"#c74048",100:"#c74048",200:"#c74048",300:"#c74048",400:"#c74048",500:"#c74048",600:"#c74048",700:"#c74048",800:"#c74048",900:"#c74048",A100:"#c74048",A200:"#c74048",A400:"#c74048",A700:"#c74048",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 A100",contrastStrongLightColors:"300 400"}}];angular.module("app.theme").constant("haibuSmartPalettes",e)}(),function(){"use strict";angular.module("app.services",[])}(),function(){"use strict";function e(e,t){function n(e){t.error(e,"Error")}function a(t){e.show(e.simple().toastClass("toast-success").action("Aceptar").hideDelay(1e4).position("top right").textContent(t))}function o(e){t.info(e,"Información",{timeOut:2e3})}function r(t){e.show(e.simple().toastClass("toast-error").action("Aceptar").hideDelay(1e4).position("top right").textContent(t))}var i={error:r,toastrError:n,success:a,info:o};return i}e.$inject=["$mdToast","toastr"],angular.module("app.services").factory("ToastService",e)}(),function(){"use strict";function e(e,t,n,a,o,r,i,s,d,l,c,u,m){function p(){var e=u,a=m,o="a:"+d+":"+x,r={onSuccess:f,cleanSession:!0,useSSL:!0,userName:l,password:c,onFailure:function(e){n.debug("Fail: ",e),N=$.DISCONNECTED,t(p,k)}};I=new s.Client(e,a,o),I.onConnectionLost=v,I.onMessageArrived=_,I.connect(r)}function g(e,t){var a=new s.Message(JSON.stringify(e));a.destinationName=destinationName,a.qos=t||2,n.debug("Send to "+a.destinationName+", payload: "+JSON.stringify(e)),I.send(a)}function v(e){N=$.DISCONNECTED,t(function(){n.debug("MQTT Client: Reconnecting..."),p()},100),0!==e.errorCode&&n.debug("onConnectionLost:"+e.errorMessage)}function f(){N=$.CONNECTED,n.debug("Client onConnected"),b()}function h(e){for(var t=0;t<e.length;t++){var a="iot-2/type/"+e[t].typeId+"/id/"+e[t].deviceId+"/evt/6/fmt/json";A[a]&&0!=A[a].length||(S(a),N==$.CONNECTED&&(n.debug("subscribe to "+a),I.subscribe(a)))}}function y(e){var t="iot-2/type/"+e.typeId+"/id/"+e.deviceId+"/evt/6/fmt/json";A[t]&&0!=A[t].length||(S(t),N==$.CONNECTED&&(n.debug("subscribe to "+t),I.subscribe(t)))}function b(){for(var e=A,t=0;t<e.length;t++){var a=e[t];n.debug("handle  subscribe to "+a),I.subscribe(a)}}function S(e){-1==A.indexOf(e)&&A.push(e)}function w(){for(var e=0;e<A.length;e++){var t=A[e];n.debug("unsubscribing from "+t),I&&N==$.CONNECTED&&I.unsubscribe(t)}A=[]}function C(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return(e()+e()+"-"+e()+"-4"+e().substr(0,3)+"-"+e()+"-"+e()+e()+e()).toLowerCase()}function _(e){if(n.debug(e),e&&""!==e.payloadString){var t=e.destinationName,a=t.split("/")[2],i=t.split("/")[4],s=t.split("/")[6],d=JSON.parse(e.payloadString).d,l=(new Date).getTime(),c=angular.copy(d),u=o.addWeight(d),m={deviceId:i,deviceType:a,eventType:s,data:u,dataOriginal:c,timestamp:l};n.debug("onMessageArrived:",m),T(m),r.checkAlert(m)}}function T(t){e.$broadcast("update",t)}var E,I,k=1e3,x=C(),A=[],$={CONNECTED:"CONNECTED",DISCONNECTED:"DISCONNECTED"},N=$.DISCONNECTED;return E={connectClient:p,addWatch:S,onStartWatchDevices:h,onStartWatchDevice:y,onStopAllWatches:w,send:g}}e.$inject=["$rootScope","$timeout","$log","$q","HelperService","AlertService","_","MQTT","ORG","USERNAME","PASSWORD","WSBROKER","WSPORT"],angular.module("app.services").factory("MQTTUtils",e)}(),function(){"use strict";function e(e,t,n){function a(){var a=n();return e.get("app/data/mareas/puertomontt.json").then(function(e){var r=[];return angular.forEach(e.data.mareas,function(e){if(n(e.Campo1).diff(a,"days")>=0&&n(e.Campo1).diff(a,"days")<=i){var t=n(e.Campo1);if(e.Campo2){var s=o(e.Campo2),d=t.add(s.hour,"hour").add(s.minute,"minute"),l=e.Campo3.split(" ");r.push({fecha:d.toDate().getTime(),value:l[0],symbol:l[1]})}if(e.Campo4){var s=o(e.Campo4),d=t.add(s.hour,"hour").add(s.minute,"minute"),l=e.Campo5.split(" ");r.push({fecha:d.toDate().getTime(),value:l[0],symbol:l[1]})}if(e.Campo6){var s=o(e.Campo6),d=t.add(s.hour,"hour").add(s.minute,"minute"),l=e.Campo7.split(" ");r.push({fecha:d.toDate().getTime(),value:l[0],symbol:l[1]})}if(e.Campo8){var s=o(e.Campo8),d=t.add(s.hour,"hour").add(s.minute,"minute"),l=e.Campo9.split(" ");r.push({fecha:d.toDate().getTime(),value:l[0],symbol:l[1]})}}}),t.filter(r,function(e){return a<n(e.fecha)?e:void 0})})}function o(e){var t=e.split(":"),n=t[0];n>12&&(n-=12);var a=t[1];return{hour:n,minute:a}}function r(){return puertosJson}var i=1,s={getMarea:a,getPuertos:r};return s}e.$inject=["$http","_","moment"],angular.module("app.services").factory("MareasService",e)}(),function(){"use strict";function e(e,t,n,a,o,r,i,s,d,l,c){function u(e){a.changeIconMarker(e),D.push(e)}function m(e){var t=l.findIndex(D,{deviceId:e.deviceId});-1!=t&&D.splice(t,1)}function p(e){var t=l.findIndex(P,{id:e.id});-1!=t&&P.splice(t,1)}function g(e){return o.register(e).$promise.then(function(e){return d.debug("new register response",e),d.debug("------------------"),u(e),e})}function v(e){return o.update({deviceId:e.deviceId,typeId:e.typeId,deviceInfo:e.deviceInfo,name:e.name}).$promise.then(function(e){return d.debug("update response",e),d.debug("------------------"),e})}function f(e){return o.unregister({deviceId:e.deviceId,typeId:e.typeId}).$promise.then(function(t){return d.debug("unregister response",t),d.debug("------------------"),m(e),t})}function h(e){return e.location?s.when(e.location):o.location({deviceId:e.deviceId,typeId:e.typeId}).$promise.then(function(t){return e.location=t,d.debug("Device location",t),d.debug("------------------"),t})}function y(e){return o.updatelocation({deviceId:e.deviceId,typeId:e.typeId,location:e.location}).$promise.then(function(e){return d.debug("Device new location",e),d.debug("------------------"),e})}function b(){return D?s.when(D):e.devices({id:t.currentUserId}).$promise.then(function(e){var t=l.map(e,function(e){return a.changeIconMarker(e),e});return D=t})}function S(){return P?s.when(P):e.rules({id:t.currentUserId}).$promise.then(function(e){return P=e,e})}function w(e){return e.apiUserId=t.currentUserId,c.replaceOrCreate(e).$promise.then(function(e){for(var t=!1,n=0;n<P.length;n++)if(P[n].id===e.id){P[n]=e,t=!0;break}return t||P.push(e),e})}function C(){return L?s.when(L):e.alerts({id:t.currentUserId}).$promise.then(function(e){return L=e,e})}function _(e){L.unshift(e)}function T(e){var e=e;return c.deleteById({id:e.id}).$promise.then(function(t){return p(e),t})}function E(e){return e.event?s.when(e.event):o.cache({deviceId:e.deviceId,typeId:e.typeId}).$promise.then(function(t){return t.dataOriginal=angular.copy(t.data),t.data=a.addWeight(t.data),a.changeIconMarker(e),d.debug("Device Cache",t),d.debug("------------------"),t})}function I(e){return o.cache({deviceId:e.deviceId,typeId:e.typeId}).$promise.then(function(t){return t.dataOriginal=angular.copy(t.data),t.data=a.addWeight(t.data),a.changeIconMarker(e),d.debug("Device  refresh Cache",t),d.debug("------------------"),t})}function k(e,t,n){return e.history?s.when(e):r.find({filter:{limit:t||100,skip:n||0,order:"timestamp DESC",where:{deviceId:e.deviceId},fields:{payload:!0,timestamp:!0}}}).$promise.then(function(t){return e.history=l.map(t,function(e){return{data:a.addWeight(e.payload),timestamp:e.timestamp}}),d.debug("History from device",e),d.debug("------------------"),e})}function x(e){return o.events.count({id:e.deviceId}).$promise.then(function(e){return d.debug("Count from device event",e.count),d.debug("------------------"),e.count})}function A(e,t,n){return o.events({id:e.deviceId,filter:{limit:t||100,skip:n||0,order:"timestamp DESC",fields:{payload:!0,timestamp:!0}}}).$promise.then(function(t){return t=l.map(t,function(e){return{data:a.addWeight(e.payload),timestamp:e.timestamp}}),d.debug("Reports from device",e),d.debug("------------------"),t})}function $(e){return o.events({id:e.deviceId,filter:{order:"timestamp DESC",fields:{payload:!0,timestamp:!0}}}).$promise.then(function(t){return t=l.map(t,function(e){return{data:a.addWeight(e.payload),timestamp:e.timestamp}}),d.debug("Reports full from device",e),d.debug("------------------"),t})}function N(e){return e.location?i.today({latitude:e.location.latitude,longitude:e.location.longitude}).$promise.then(function(e){return d.debug(e),e}):void 0}function M(){D=null,O=null,P=null,L=null}var D,O,P,L,R={getDevices:b,getRules:S,addRule:w,getAlerts:C,addAlert:_,deleteRule:T,newDeviceCache:u,register:g,update:v,unregister:f,getLastEvent:E,refreshLastEvent:I,getLocacion:h,updateLocation:y,reset:M,getHistory:k,count:x,getReports:A,getReportsFull:$,getWeather:N};return R}e.$inject=["ApiUser","LoopBackAuth","ChartService","HelperService","Device","Event","Weather","$q","$log","_","Ruler"],angular.module("app.services").factory("managerDeviceService",e)}(),angular.module("ngLocale",[],["$provide",function(e){var t={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};e.value("$locale",{DATETIME_FORMATS:{AMPMS:["a. m.","p. m."],DAY:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],ERANAMES:["antes de Cristo","después de Cristo"],ERAS:["a. C.","d. C."],FIRSTDAYOFWEEK:0,MONTH:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],SHORTDAY:["dom.","lun.","mar.","mié.","jue.","vie.","sáb."],SHORTMONTH:["ene.","feb.","mar.","abr.","may.","jun.","jul.","ago.","sep.","oct.","nov.","dic."],STANDALONEMONTH:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],WEEKENDRANGE:[5,6],fullDate:"EEEE, d 'de' MMMM 'de' y",longDate:"d 'de' MMMM 'de' y",medium:"dd-MM-y HH:mm:ss",mediumDate:"dd-MM-y",mediumTime:"HH:mm:ss","short":"dd-MM-yy HH:mm",shortDate:"dd-MM-yy",shortTime:"HH:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:",",GROUP_SEP:".",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:0,minFrac:0,minInt:1,negPre:"¤-",negSuf:"",posPre:"¤",posSuf:""}]},id:"es-cl",localeID:"es_CL",pluralCat:function(e,n){return 1==e?t.ONE:t.OTHER}})}]),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="lbServices"),function(e,t,n){"use strict";function a(e){var t=e.match(/^(?:https?:)?\/\/([^\/]+)/);return t?t[1]:null}var o="/api/v2",r="authorization",i=a(o)?o:location.host,s=t.module("lbServices",["ngResource"]);s.factory("Event",["LoopBackResource","LoopBackAuth","$injector","$q",function(e,t,n,a){var r=e(o+"/events/:id",{id:"@id"},{find:{isArray:!0,url:o+"/events",method:"GET"},count:{url:o+"/events/count",method:"GET"},"::findById::Device::events":{params:{fk:"@fk"},url:o+"/Devices/:id/events/:fk",method:"GET"},"::destroyById::Device::events":{params:{fk:"@fk"},url:o+"/Devices/:id/events/:fk",method:"DELETE"},"::updateById::Device::events":{params:{fk:"@fk"},url:o+"/Devices/:id/events/:fk",method:"PUT"},"::get::Device::events":{isArray:!0,url:o+"/Devices/:id/events",method:"GET"},"::create::Device::events":{url:o+"/Devices/:id/events",method:"POST"},"::createMany::Device::events":{isArray:!0,url:o+"/Devices/:id/events",method:"POST"},"::delete::Device::events":{url:o+"/Devices/:id/events",method:"DELETE"},"::count::Device::events":{url:o+"/Devices/:id/events/count",method:"GET"}});return r.modelName="Event",r}]),s.factory("ApiUser",["LoopBackResource","LoopBackAuth","$injector","$q",function(e,t,n,a){var r=e(o+"/users/:id",{id:"@id"},{prototype$__findById__roles:{params:{fk:"@fk"},url:o+"/users/:id/roles/:fk",method:"GET"},prototype$__destroyById__roles:{params:{fk:"@fk"},url:o+"/users/:id/roles/:fk",method:"DELETE"},prototype$__updateById__roles:{params:{fk:"@fk"},url:o+"/users/:id/roles/:fk",method:"PUT"},prototype$__link__roles:{params:{fk:"@fk"},url:o+"/users/:id/roles/rel/:fk",method:"PUT"},prototype$__unlink__roles:{params:{fk:"@fk"},url:o+"/users/:id/roles/rel/:fk",method:"DELETE"},prototype$__exists__roles:{params:{fk:"@fk"},url:o+"/users/:id/roles/rel/:fk",method:"HEAD"},prototype$__findById__accessTokens:{params:{fk:"@fk"},url:o+"/users/:id/accessTokens/:fk",method:"GET"},prototype$__destroyById__accessTokens:{params:{fk:"@fk"},url:o+"/users/:id/accessTokens/:fk",method:"DELETE"},prototype$__updateById__accessTokens:{params:{fk:"@fk"},url:o+"/users/:id/accessTokens/:fk",method:"PUT"},prototype$__findById__devices:{params:{fk:"@fk"},url:o+"/users/:id/devices/:fk",method:"GET"},prototype$__destroyById__devices:{params:{fk:"@fk"},url:o+"/users/:id/devices/:fk",method:"DELETE"},prototype$__findById__rules:{params:{fk:"@fk"},url:o+"/users/:id/rules/:fk",method:"GET"},prototype$__destroyById__rules:{params:{fk:"@fk"},url:o+"/users/:id/rules/:fk",method:"DELETE"},prototype$__updateById__rules:{params:{fk:"@fk"},url:o+"/users/:id/rules/:fk",method:"PUT"},prototype$__findById__alerts:{params:{fk:"@fk"},url:o+"/users/:id/alerts/:fk",method:"GET"},prototype$__destroyById__alerts:{params:{fk:"@fk"},url:o+"/users/:id/alerts/:fk",method:"DELETE"},prototype$__updateById__alerts:{params:{fk:"@fk"},url:o+"/users/:id/alerts/:fk",method:"PUT"},prototype$__get__roles:{isArray:!0,url:o+"/users/:id/roles",method:"GET"},prototype$__create__roles:{url:o+"/users/:id/roles",method:"POST"},prototype$__delete__roles:{url:o+"/users/:id/roles",method:"DELETE"},prototype$__count__roles:{url:o+"/users/:id/roles/count",method:"GET"},prototype$__get__accessTokens:{isArray:!0,url:o+"/users/:id/accessTokens",method:"GET"},prototype$__create__accessTokens:{url:o+"/users/:id/accessTokens",method:"POST"},prototype$__delete__accessTokens:{url:o+"/users/:id/accessTokens",method:"DELETE"},prototype$__count__accessTokens:{url:o+"/users/:id/accessTokens/count",method:"GET"},prototype$__get__devices:{isArray:!0,url:o+"/users/:id/devices",method:"GET"},prototype$__create__devices:{url:o+"/users/:id/devices",method:"POST"},prototype$__delete__devices:{url:o+"/users/:id/devices",method:"DELETE"},prototype$__count__devices:{url:o+"/users/:id/devices/count",method:"GET"},prototype$__get__rules:{isArray:!0,url:o+"/users/:id/rules",method:"GET"},prototype$__create__rules:{url:o+"/users/:id/rules",method:"POST"},prototype$__delete__rules:{url:o+"/users/:id/rules",method:"DELETE"},prototype$__count__rules:{url:o+"/users/:id/rules/count",method:"GET"},prototype$__get__alerts:{isArray:!0,url:o+"/users/:id/alerts",method:"GET"},prototype$__create__alerts:{url:o+"/users/:id/alerts",method:"POST"},prototype$__delete__alerts:{url:o+"/users/:id/alerts",method:"DELETE"},prototype$__count__alerts:{url:o+"/users/:id/alerts/count",method:"GET"},create:{url:o+"/users",method:"POST"},createMany:{isArray:!0,url:o+"/users",method:"POST"},patchOrCreate:{url:o+"/users",method:"PATCH"},replaceOrCreate:{url:o+"/users/replaceOrCreate",method:"POST"},exists:{url:o+"/users/:id/exists",method:"GET"},findById:{url:o+"/users/:id",method:"GET"},replaceById:{url:o+"/users/:id/replace",method:"POST"},find:{isArray:!0,url:o+"/users",method:"GET"},deleteById:{url:o+"/users/:id",method:"DELETE"},count:{url:o+"/users/count",method:"GET"},prototype$patchAttributes:{url:o+"/users/:id",method:"PATCH"},login:{params:{include:"user"},interceptor:{response:function(e){var n=e.data;return t.setUser(n.id,n.userId,n.user),t.rememberMe=e.config.params.rememberMe!==!1,t.save(),e.resource}},url:o+"/users/login",method:"POST"},logout:{interceptor:{response:function(e){return t.clearUser(),t.clearStorage(),e.resource},responseError:function(e){return t.clearUser(),t.clearStorage(),e.resource}},url:o+"/users/logout",method:"POST"},prototype$verify:{url:o+"/users/:id/verify",method:"POST"},resetPassword:{url:o+"/users/reset",method:"POST"},changePassword:{url:o+"/users/change-password",method:"POST"},setPassword:{url:o+"/users/reset-password",method:"POST"},prototype$addRole:{url:o+"/users/:id/addRole",method:"POST"},prototype$removeRole:{url:o+"/users/:id/removeRole",method:"POST"},prototype$banUser:{url:o+"/users/:id/banUser",method:"POST"},prototype$unlockUser:{url:o+"/users/:id/unlockUser",method:"POST"},"::get::Device::users":{url:o+"/Devices/:id/users",method:"GET"},getCurrent:{url:o+"/users/:id",method:"GET",params:{id:function(){var e=t.currentUserId;return null==e&&(e="__anonymous__"),e}},interceptor:{response:function(e){return t.currentUserData=e.data,e.resource},responseError:function(e){return t.clearUser(),t.clearStorage(),a.reject(e)}},__isGetCurrentUser__:!0}});return r.upsert=r.patchOrCreate,r.updateOrCreate=r.patchOrCreate,r.destroyById=r.deleteById,r.removeById=r.deleteById,r.prototype$updateAttributes=r.prototype$patchAttributes,r.getCachedCurrent=function(){var e=t.currentUserData;return e?new r(e):null},r.isAuthenticated=function(){return null!=this.getCurrentId()},r.getCurrentId=function(){return t.currentUserId},r.modelName="ApiUser",r.devices=function(){var e=n.get("Device"),t=e["::get::ApiUser::devices"];return t.apply(r,arguments)},r.devices.count=function(){var e=n.get("Device"),t=e["::count::ApiUser::devices"];return t.apply(r,arguments)},r.devices.create=function(){var e=n.get("Device"),t=e["::create::ApiUser::devices"];return t.apply(r,arguments)},r.devices.createMany=function(){var e=n.get("Device"),t=e["::createMany::ApiUser::devices"];return t.apply(r,arguments)},r.devices.destroyAll=function(){var e=n.get("Device"),t=e["::delete::ApiUser::devices"];return t.apply(r,arguments)},r.devices.destroyById=function(){var e=n.get("Device"),t=e["::destroyById::ApiUser::devices"];return t.apply(r,arguments)},r.devices.findById=function(){var e=n.get("Device"),t=e["::findById::ApiUser::devices"];return t.apply(r,arguments)},r.rules=function(){var e=n.get("Ruler"),t=e["::get::ApiUser::rules"];return t.apply(r,arguments)},r.rules.count=function(){var e=n.get("Ruler"),t=e["::count::ApiUser::rules"];return t.apply(r,arguments)},r.rules.create=function(){var e=n.get("Ruler"),t=e["::create::ApiUser::rules"];return t.apply(r,arguments)},r.rules.createMany=function(){var e=n.get("Ruler"),t=e["::createMany::ApiUser::rules"];return t.apply(r,arguments)},r.rules.destroyAll=function(){var e=n.get("Ruler"),t=e["::delete::ApiUser::rules"];return t.apply(r,arguments)},r.rules.destroyById=function(){var e=n.get("Ruler"),t=e["::destroyById::ApiUser::rules"];return t.apply(r,arguments)},r.rules.findById=function(){var e=n.get("Ruler"),t=e["::findById::ApiUser::rules"];return t.apply(r,arguments)},r.rules.updateById=function(){var e=n.get("Ruler"),t=e["::updateById::ApiUser::rules"];return t.apply(r,arguments)},r.alerts=function(){var e=n.get("Alert"),t=e["::get::ApiUser::alerts"];return t.apply(r,arguments)},r.alerts.count=function(){var e=n.get("Alert"),t=e["::count::ApiUser::alerts"];return t.apply(r,arguments)},r.alerts.create=function(){var e=n.get("Alert"),t=e["::create::ApiUser::alerts"];return t.apply(r,arguments)},r.alerts.createMany=function(){var e=n.get("Alert"),t=e["::createMany::ApiUser::alerts"];return t.apply(r,arguments)},r.alerts.destroyAll=function(){var e=n.get("Alert"),t=e["::delete::ApiUser::alerts"];return t.apply(r,arguments)},r.alerts.destroyById=function(){var e=n.get("Alert"),t=e["::destroyById::ApiUser::alerts"];return t.apply(r,arguments)},r.alerts.findById=function(){var e=n.get("Alert"),t=e["::findById::ApiUser::alerts"];return t.apply(r,arguments)},r.alerts.updateById=function(){var e=n.get("Alert"),t=e["::updateById::ApiUser::alerts"];return t.apply(r,arguments)},r}]),s.factory("Threshold",["LoopBackResource","LoopBackAuth","$injector","$q",function(e,t,n,a){var r=e(o+"/thresholds/:id",{id:"@id"},{create:{url:o+"/thresholds",method:"POST"},createMany:{isArray:!0,url:o+"/thresholds",method:"POST"},replaceOrCreate:{url:o+"/thresholds/replaceOrCreate",method:"POST"},exists:{url:o+"/thresholds/:id/exists",method:"GET"},findById:{url:o+"/thresholds/:id",method:"GET"},replaceById:{url:o+"/thresholds/:id/replace",method:"POST"},find:{isArray:!0,url:o+"/thresholds",method:"GET"},deleteById:{url:o+"/thresholds/:id",method:"DELETE"},count:{url:o+"/thresholds/count",method:"GET"},"::findById::Device::thresholds":{params:{fk:"@fk"},url:o+"/Devices/:id/thresholds/:fk",method:"GET"},"::destroyById::Device::thresholds":{params:{fk:"@fk"},url:o+"/Devices/:id/thresholds/:fk",method:"DELETE"},"::updateById::Device::thresholds":{params:{fk:"@fk"},url:o+"/Devices/:id/thresholds/:fk",method:"PUT"},"::get::Device::thresholds":{isArray:!0,url:o+"/Devices/:id/thresholds",method:"GET"},"::create::Device::thresholds":{url:o+"/Devices/:id/thresholds",method:"POST"},"::createMany::Device::thresholds":{isArray:!0,url:o+"/Devices/:id/thresholds",method:"POST"},"::delete::Device::thresholds":{url:o+"/Devices/:id/thresholds",method:"DELETE"},"::count::Device::thresholds":{url:o+"/Devices/:id/thresholds/count",method:"GET"}});return r.destroyById=r.deleteById,r.removeById=r.deleteById,r.modelName="Threshold",r}]),s.factory("Device",["LoopBackResource","LoopBackAuth","$injector","$q",function(e,t,n,a){var r=e(o+"/Devices/:id",{id:"@id"},{prototype$__get__users:{url:o+"/Devices/:id/users",method:"GET"},prototype$__findById__thresholds:{params:{fk:"@fk"},url:o+"/Devices/:id/thresholds/:fk",method:"GET"},prototype$__destroyById__thresholds:{params:{fk:"@fk"},url:o+"/Devices/:id/thresholds/:fk",method:"DELETE"},prototype$__updateById__thresholds:{params:{fk:"@fk"},url:o+"/Devices/:id/thresholds/:fk",method:"PUT"},prototype$__findById__events:{params:{fk:"@fk"},url:o+"/Devices/:id/events/:fk",method:"GET"},prototype$__destroyById__events:{params:{fk:"@fk"},url:o+"/Devices/:id/events/:fk",method:"DELETE"},prototype$__updateById__events:{params:{fk:"@fk"},url:o+"/Devices/:id/events/:fk",method:"PUT"},prototype$__findById__rulers:{params:{fk:"@fk"},url:o+"/Devices/:id/rulers/:fk",method:"GET"},prototype$__destroyById__rulers:{params:{fk:"@fk"},url:o+"/Devices/:id/rulers/:fk",method:"DELETE"},prototype$__updateById__rulers:{params:{fk:"@fk"},url:o+"/Devices/:id/rulers/:fk",method:"PUT"},prototype$__findById__alerts:{params:{fk:"@fk"},url:o+"/Devices/:id/alerts/:fk",method:"GET"},prototype$__destroyById__alerts:{params:{fk:"@fk"},url:o+"/Devices/:id/alerts/:fk",method:"DELETE"},prototype$__updateById__alerts:{params:{fk:"@fk"},url:o+"/Devices/:id/alerts/:fk",method:"PUT"},prototype$__get__cage:{url:o+"/Devices/:id/cage",method:"GET"},prototype$__get__thresholds:{isArray:!0,url:o+"/Devices/:id/thresholds",method:"GET"},prototype$__create__thresholds:{url:o+"/Devices/:id/thresholds",method:"POST"},prototype$__delete__thresholds:{url:o+"/Devices/:id/thresholds",method:"DELETE"},prototype$__count__thresholds:{url:o+"/Devices/:id/thresholds/count",method:"GET"},prototype$__get__events:{isArray:!0,url:o+"/Devices/:id/events",method:"GET"},prototype$__create__events:{url:o+"/Devices/:id/events",method:"POST"},prototype$__delete__events:{url:o+"/Devices/:id/events",method:"DELETE"},prototype$__count__events:{url:o+"/Devices/:id/events/count",method:"GET"},prototype$__get__rulers:{isArray:!0,url:o+"/Devices/:id/rulers",method:"GET"},prototype$__create__rulers:{url:o+"/Devices/:id/rulers",method:"POST"},prototype$__delete__rulers:{url:o+"/Devices/:id/rulers",method:"DELETE"},prototype$__count__rulers:{url:o+"/Devices/:id/rulers/count",method:"GET"},prototype$__get__alerts:{isArray:!0,url:o+"/Devices/:id/alerts",method:"GET"},prototype$__create__alerts:{url:o+"/Devices/:id/alerts",method:"POST"},prototype$__delete__alerts:{url:o+"/Devices/:id/alerts",method:"DELETE"},prototype$__count__alerts:{url:o+"/Devices/:id/alerts/count",method:"GET"},create:{url:o+"/Devices",method:"POST"},createMany:{isArray:!0,url:o+"/Devices",method:"POST"},exists:{url:o+"/Devices/:id/exists",method:"GET"},findById:{url:o+"/Devices/:id",method:"GET"},find:{isArray:!0,url:o+"/Devices",method:"GET"},deleteById:{url:o+"/Devices/:id",method:"DELETE"},count:{url:o+"/Devices/count",method:"GET"},info:{url:o+"/Devices/info",method:"POST"},register:{url:o+"/Devices/register",method:"POST"},update:{url:o+"/Devices/update",method:"PUT"},unregister:{url:o+"/Devices/unregister",method:"POST"},location:{url:o+"/Devices/location",method:"POST"},updatelocation:{url:o+"/Devices/location",method:"PUT"},cache:{url:o+"/Devices/cache",method:"POST"},"::findById::ApiUser::devices":{params:{fk:"@fk"},url:o+"/users/:id/devices/:fk",method:"GET"},"::destroyById::ApiUser::devices":{params:{fk:"@fk"},url:o+"/users/:id/devices/:fk",method:"DELETE"},"::get::ApiUser::devices":{isArray:!0,url:o+"/users/:id/devices",method:"GET"},"::create::ApiUser::devices":{url:o+"/users/:id/devices",method:"POST"},"::createMany::ApiUser::devices":{isArray:!0,url:o+"/users/:id/devices",method:"POST"},"::delete::ApiUser::devices":{url:o+"/users/:id/devices",method:"DELETE"},"::count::ApiUser::devices":{url:o+"/users/:id/devices/count",method:"GET"},"::get::Ruler::device":{url:o+"/rules/:id/device",method:"GET"},"::get::Alert::device":{url:o+"/alerts/:id/device",method:"GET"},"::findById::Cage::devices":{params:{fk:"@fk"},url:o+"/cages/:id/devices/:fk",method:"GET"},"::destroyById::Cage::devices":{params:{fk:"@fk"},url:o+"/cages/:id/devices/:fk",method:"DELETE"},"::updateById::Cage::devices":{params:{fk:"@fk"},url:o+"/cages/:id/devices/:fk",method:"PUT"},"::get::Cage::devices":{isArray:!0,url:o+"/cages/:id/devices",method:"GET"},"::create::Cage::devices":{url:o+"/cages/:id/devices",method:"POST"},"::createMany::Cage::devices":{isArray:!0,url:o+"/cages/:id/devices",method:"POST"},"::delete::Cage::devices":{url:o+"/cages/:id/devices",method:"DELETE"},"::count::Cage::devices":{url:o+"/cages/:id/devices/count",method:"GET"}});return r.destroyById=r.deleteById,r.removeById=r.deleteById,r.modelName="Device",r.users=function(){var e=n.get("ApiUser"),t=e["::get::Device::users"];return t.apply(r,arguments)},r.thresholds=function(){var e=n.get("Threshold"),t=e["::get::Device::thresholds"];return t.apply(r,arguments)},r.thresholds.count=function(){var e=n.get("Threshold"),t=e["::count::Device::thresholds"];return t.apply(r,arguments)},r.thresholds.create=function(){var e=n.get("Threshold"),t=e["::create::Device::thresholds"];return t.apply(r,arguments)},r.thresholds.createMany=function(){var e=n.get("Threshold"),t=e["::createMany::Device::thresholds"];return t.apply(r,arguments)},r.thresholds.destroyAll=function(){var e=n.get("Threshold"),t=e["::delete::Device::thresholds"];return t.apply(r,arguments)},r.thresholds.destroyById=function(){var e=n.get("Threshold"),t=e["::destroyById::Device::thresholds"];return t.apply(r,arguments)},r.thresholds.findById=function(){var e=n.get("Threshold"),t=e["::findById::Device::thresholds"];return t.apply(r,arguments)},r.thresholds.updateById=function(){var e=n.get("Threshold"),t=e["::updateById::Device::thresholds"];return t.apply(r,arguments)},r.events=function(){var e=n.get("Event"),t=e["::get::Device::events"];return t.apply(r,arguments)},r.events.count=function(){var e=n.get("Event"),t=e["::count::Device::events"];return t.apply(r,arguments)},r.events.create=function(){var e=n.get("Event"),t=e["::create::Device::events"];return t.apply(r,arguments)},r.events.createMany=function(){var e=n.get("Event"),t=e["::createMany::Device::events"];return t.apply(r,arguments)},r.events.destroyAll=function(){var e=n.get("Event"),t=e["::delete::Device::events"];return t.apply(r,arguments)},r.events.destroyById=function(){var e=n.get("Event"),t=e["::destroyById::Device::events"];return t.apply(r,arguments)},r.events.findById=function(){var e=n.get("Event"),t=e["::findById::Device::events"];return t.apply(r,arguments)},r.events.updateById=function(){var e=n.get("Event"),t=e["::updateById::Device::events"];return t.apply(r,arguments)},r.rulers=function(){var e=n.get("Ruler"),t=e["::get::Device::rulers"];return t.apply(r,arguments)},r.rulers.count=function(){var e=n.get("Ruler"),t=e["::count::Device::rulers"];return t.apply(r,arguments)},r.rulers.create=function(){var e=n.get("Ruler"),t=e["::create::Device::rulers"];return t.apply(r,arguments)},r.rulers.createMany=function(){var e=n.get("Ruler"),t=e["::createMany::Device::rulers"];return t.apply(r,arguments)},r.rulers.destroyAll=function(){var e=n.get("Ruler"),t=e["::delete::Device::rulers"];return t.apply(r,arguments)},r.rulers.destroyById=function(){var e=n.get("Ruler"),t=e["::destroyById::Device::rulers"];
return t.apply(r,arguments)},r.rulers.findById=function(){var e=n.get("Ruler"),t=e["::findById::Device::rulers"];return t.apply(r,arguments)},r.rulers.updateById=function(){var e=n.get("Ruler"),t=e["::updateById::Device::rulers"];return t.apply(r,arguments)},r.alerts=function(){var e=n.get("Alert"),t=e["::get::Device::alerts"];return t.apply(r,arguments)},r.alerts.count=function(){var e=n.get("Alert"),t=e["::count::Device::alerts"];return t.apply(r,arguments)},r.alerts.create=function(){var e=n.get("Alert"),t=e["::create::Device::alerts"];return t.apply(r,arguments)},r.alerts.createMany=function(){var e=n.get("Alert"),t=e["::createMany::Device::alerts"];return t.apply(r,arguments)},r.alerts.destroyAll=function(){var e=n.get("Alert"),t=e["::delete::Device::alerts"];return t.apply(r,arguments)},r.alerts.destroyById=function(){var e=n.get("Alert"),t=e["::destroyById::Device::alerts"];return t.apply(r,arguments)},r.alerts.findById=function(){var e=n.get("Alert"),t=e["::findById::Device::alerts"];return t.apply(r,arguments)},r.alerts.updateById=function(){var e=n.get("Alert"),t=e["::updateById::Device::alerts"];return t.apply(r,arguments)},r.cage=function(){var e=n.get("Cage"),t=e["::get::Device::cage"];return t.apply(r,arguments)},r}]),s.factory("Email",["LoopBackResource","LoopBackAuth","$injector","$q",function(e,t,n,a){var r=e(o+"/Emails/:id",{id:"@id"},{});return r.modelName="Email",r}]),s.factory("Weather",["LoopBackResource","LoopBackAuth","$injector","$q",function(e,t,n,a){var r=e(o+"/weather/:id",{id:"@id"},{today:{url:o+"/weather/:latitude/:longitude/today",method:"GET"},daily:{url:o+"/weather/:latitude/:longitude/daily",method:"GET"}});return r.modelName="Weather",r}]),s.factory("Ruler",["LoopBackResource","LoopBackAuth","$injector","$q",function(e,t,n,a){var r=e(o+"/rules/:id",{id:"@id"},{prototype$__get__device:{url:o+"/rules/:id/device",method:"GET"},create:{url:o+"/rules",method:"POST"},createMany:{isArray:!0,url:o+"/rules",method:"POST"},replaceOrCreate:{url:o+"/rules/replaceOrCreate",method:"POST"},exists:{url:o+"/rules/:id/exists",method:"GET"},findById:{url:o+"/rules/:id",method:"GET"},replaceById:{url:o+"/rules/:id/replace",method:"POST"},find:{isArray:!0,url:o+"/rules",method:"GET"},deleteById:{url:o+"/rules/:id",method:"DELETE"},count:{url:o+"/rules/count",method:"GET"},"::findById::ApiUser::rules":{params:{fk:"@fk"},url:o+"/users/:id/rules/:fk",method:"GET"},"::destroyById::ApiUser::rules":{params:{fk:"@fk"},url:o+"/users/:id/rules/:fk",method:"DELETE"},"::updateById::ApiUser::rules":{params:{fk:"@fk"},url:o+"/users/:id/rules/:fk",method:"PUT"},"::get::ApiUser::rules":{isArray:!0,url:o+"/users/:id/rules",method:"GET"},"::create::ApiUser::rules":{url:o+"/users/:id/rules",method:"POST"},"::createMany::ApiUser::rules":{isArray:!0,url:o+"/users/:id/rules",method:"POST"},"::delete::ApiUser::rules":{url:o+"/users/:id/rules",method:"DELETE"},"::count::ApiUser::rules":{url:o+"/users/:id/rules/count",method:"GET"},"::findById::Device::rulers":{params:{fk:"@fk"},url:o+"/Devices/:id/rulers/:fk",method:"GET"},"::destroyById::Device::rulers":{params:{fk:"@fk"},url:o+"/Devices/:id/rulers/:fk",method:"DELETE"},"::updateById::Device::rulers":{params:{fk:"@fk"},url:o+"/Devices/:id/rulers/:fk",method:"PUT"},"::get::Device::rulers":{isArray:!0,url:o+"/Devices/:id/rulers",method:"GET"},"::create::Device::rulers":{url:o+"/Devices/:id/rulers",method:"POST"},"::createMany::Device::rulers":{isArray:!0,url:o+"/Devices/:id/rulers",method:"POST"},"::delete::Device::rulers":{url:o+"/Devices/:id/rulers",method:"DELETE"},"::count::Device::rulers":{url:o+"/Devices/:id/rulers/count",method:"GET"}});return r.destroyById=r.deleteById,r.removeById=r.deleteById,r.modelName="Ruler",r.device=function(){var e=n.get("Device"),t=e["::get::Ruler::device"];return t.apply(r,arguments)},r}]),s.factory("Alert",["LoopBackResource","LoopBackAuth","$injector","$q",function(e,t,n,a){var r=e(o+"/alerts/:id",{id:"@id"},{prototype$__get__device:{url:o+"/alerts/:id/device",method:"GET"},create:{url:o+"/alerts",method:"POST"},createMany:{isArray:!0,url:o+"/alerts",method:"POST"},patchOrCreate:{url:o+"/alerts",method:"PATCH"},replaceOrCreate:{url:o+"/alerts/replaceOrCreate",method:"POST"},upsertWithWhere:{url:o+"/alerts/upsertWithWhere",method:"POST"},exists:{url:o+"/alerts/:id/exists",method:"GET"},findById:{url:o+"/alerts/:id",method:"GET"},replaceById:{url:o+"/alerts/:id/replace",method:"POST"},find:{isArray:!0,url:o+"/alerts",method:"GET"},findOne:{url:o+"/alerts/findOne",method:"GET"},updateAll:{url:o+"/alerts/update",method:"POST"},deleteById:{url:o+"/alerts/:id",method:"DELETE"},count:{url:o+"/alerts/count",method:"GET"},prototype$patchAttributes:{url:o+"/alerts/:id",method:"PATCH"},createChangeStream:{url:o+"/alerts/change-stream",method:"POST"},"::findById::ApiUser::alerts":{params:{fk:"@fk"},url:o+"/users/:id/alerts/:fk",method:"GET"},"::destroyById::ApiUser::alerts":{params:{fk:"@fk"},url:o+"/users/:id/alerts/:fk",method:"DELETE"},"::updateById::ApiUser::alerts":{params:{fk:"@fk"},url:o+"/users/:id/alerts/:fk",method:"PUT"},"::get::ApiUser::alerts":{isArray:!0,url:o+"/users/:id/alerts",method:"GET"},"::create::ApiUser::alerts":{url:o+"/users/:id/alerts",method:"POST"},"::createMany::ApiUser::alerts":{isArray:!0,url:o+"/users/:id/alerts",method:"POST"},"::delete::ApiUser::alerts":{url:o+"/users/:id/alerts",method:"DELETE"},"::count::ApiUser::alerts":{url:o+"/users/:id/alerts/count",method:"GET"},"::findById::Device::alerts":{params:{fk:"@fk"},url:o+"/Devices/:id/alerts/:fk",method:"GET"},"::destroyById::Device::alerts":{params:{fk:"@fk"},url:o+"/Devices/:id/alerts/:fk",method:"DELETE"},"::updateById::Device::alerts":{params:{fk:"@fk"},url:o+"/Devices/:id/alerts/:fk",method:"PUT"},"::get::Device::alerts":{isArray:!0,url:o+"/Devices/:id/alerts",method:"GET"},"::create::Device::alerts":{url:o+"/Devices/:id/alerts",method:"POST"},"::createMany::Device::alerts":{isArray:!0,url:o+"/Devices/:id/alerts",method:"POST"},"::delete::Device::alerts":{url:o+"/Devices/:id/alerts",method:"DELETE"},"::count::Device::alerts":{url:o+"/Devices/:id/alerts/count",method:"GET"}});return r.upsert=r.patchOrCreate,r.updateOrCreate=r.patchOrCreate,r.patchOrCreateWithWhere=r.upsertWithWhere,r.update=r.updateAll,r.destroyById=r.deleteById,r.removeById=r.deleteById,r.prototype$updateAttributes=r.prototype$patchAttributes,r.modelName="Alert",r.device=function(){var e=n.get("Device"),t=e["::get::Alert::device"];return t.apply(r,arguments)},r}]),s.factory("Center",["LoopBackResource","LoopBackAuth","$injector","$q",function(e,t,n,a){var r=e(o+"/centers/:id",{id:"@id"},{prototype$__findById__cages:{params:{fk:"@fk"},url:o+"/centers/:id/cages/:fk",method:"GET"},prototype$__destroyById__cages:{params:{fk:"@fk"},url:o+"/centers/:id/cages/:fk",method:"DELETE"},prototype$__updateById__cages:{params:{fk:"@fk"},url:o+"/centers/:id/cages/:fk",method:"PUT"},prototype$__get__cages:{isArray:!0,url:o+"/centers/:id/cages",method:"GET"},prototype$__create__cages:{url:o+"/centers/:id/cages",method:"POST"},prototype$__delete__cages:{url:o+"/centers/:id/cages",method:"DELETE"},prototype$__count__cages:{url:o+"/centers/:id/cages/count",method:"GET"},create:{url:o+"/centers",method:"POST"},createMany:{isArray:!0,url:o+"/centers",method:"POST"},patchOrCreate:{url:o+"/centers",method:"PATCH"},replaceOrCreate:{url:o+"/centers/replaceOrCreate",method:"POST"},upsertWithWhere:{url:o+"/centers/upsertWithWhere",method:"POST"},exists:{url:o+"/centers/:id/exists",method:"GET"},findById:{url:o+"/centers/:id",method:"GET"},replaceById:{url:o+"/centers/:id/replace",method:"POST"},find:{isArray:!0,url:o+"/centers",method:"GET"},findOne:{url:o+"/centers/findOne",method:"GET"},updateAll:{url:o+"/centers/update",method:"POST"},deleteById:{url:o+"/centers/:id",method:"DELETE"},count:{url:o+"/centers/count",method:"GET"},prototype$patchAttributes:{url:o+"/centers/:id",method:"PATCH"},createChangeStream:{url:o+"/centers/change-stream",method:"POST"},"::get::Cage::center":{url:o+"/cages/:id/center",method:"GET"}});return r.upsert=r.patchOrCreate,r.updateOrCreate=r.patchOrCreate,r.patchOrCreateWithWhere=r.upsertWithWhere,r.update=r.updateAll,r.destroyById=r.deleteById,r.removeById=r.deleteById,r.prototype$updateAttributes=r.prototype$patchAttributes,r.modelName="Center",r.cages=function(){var e=n.get("Cage"),t=e["::get::Center::cages"];return t.apply(r,arguments)},r.cages.count=function(){var e=n.get("Cage"),t=e["::count::Center::cages"];return t.apply(r,arguments)},r.cages.create=function(){var e=n.get("Cage"),t=e["::create::Center::cages"];return t.apply(r,arguments)},r.cages.createMany=function(){var e=n.get("Cage"),t=e["::createMany::Center::cages"];return t.apply(r,arguments)},r.cages.destroyAll=function(){var e=n.get("Cage"),t=e["::delete::Center::cages"];return t.apply(r,arguments)},r.cages.destroyById=function(){var e=n.get("Cage"),t=e["::destroyById::Center::cages"];return t.apply(r,arguments)},r.cages.findById=function(){var e=n.get("Cage"),t=e["::findById::Center::cages"];return t.apply(r,arguments)},r.cages.updateById=function(){var e=n.get("Cage"),t=e["::updateById::Center::cages"];return t.apply(r,arguments)},r}]),s.factory("Cage",["LoopBackResource","LoopBackAuth","$injector","$q",function(e,t,n,a){var r=e(o+"/cages/:id",{id:"@id"},{prototype$__findById__devices:{params:{fk:"@fk"},url:o+"/cages/:id/devices/:fk",method:"GET"},prototype$__destroyById__devices:{params:{fk:"@fk"},url:o+"/cages/:id/devices/:fk",method:"DELETE"},prototype$__updateById__devices:{params:{fk:"@fk"},url:o+"/cages/:id/devices/:fk",method:"PUT"},prototype$__get__center:{url:o+"/cages/:id/center",method:"GET"},prototype$__get__devices:{isArray:!0,url:o+"/cages/:id/devices",method:"GET"},prototype$__create__devices:{url:o+"/cages/:id/devices",method:"POST"},prototype$__delete__devices:{url:o+"/cages/:id/devices",method:"DELETE"},prototype$__count__devices:{url:o+"/cages/:id/devices/count",method:"GET"},create:{url:o+"/cages",method:"POST"},createMany:{isArray:!0,url:o+"/cages",method:"POST"},patchOrCreate:{url:o+"/cages",method:"PATCH"},replaceOrCreate:{url:o+"/cages/replaceOrCreate",method:"POST"},upsertWithWhere:{url:o+"/cages/upsertWithWhere",method:"POST"},exists:{url:o+"/cages/:id/exists",method:"GET"},findById:{url:o+"/cages/:id",method:"GET"},replaceById:{url:o+"/cages/:id/replace",method:"POST"},find:{isArray:!0,url:o+"/cages",method:"GET"},findOne:{url:o+"/cages/findOne",method:"GET"},updateAll:{url:o+"/cages/update",method:"POST"},deleteById:{url:o+"/cages/:id",method:"DELETE"},count:{url:o+"/cages/count",method:"GET"},prototype$patchAttributes:{url:o+"/cages/:id",method:"PATCH"},createChangeStream:{url:o+"/cages/change-stream",method:"POST"},"::get::Device::cage":{url:o+"/Devices/:id/cage",method:"GET"},"::findById::Center::cages":{params:{fk:"@fk"},url:o+"/centers/:id/cages/:fk",method:"GET"},"::destroyById::Center::cages":{params:{fk:"@fk"},url:o+"/centers/:id/cages/:fk",method:"DELETE"},"::updateById::Center::cages":{params:{fk:"@fk"},url:o+"/centers/:id/cages/:fk",method:"PUT"},"::get::Center::cages":{isArray:!0,url:o+"/centers/:id/cages",method:"GET"},"::create::Center::cages":{url:o+"/centers/:id/cages",method:"POST"},"::createMany::Center::cages":{isArray:!0,url:o+"/centers/:id/cages",method:"POST"},"::delete::Center::cages":{url:o+"/centers/:id/cages",method:"DELETE"},"::count::Center::cages":{url:o+"/centers/:id/cages/count",method:"GET"}});return r.upsert=r.patchOrCreate,r.updateOrCreate=r.patchOrCreate,r.patchOrCreateWithWhere=r.upsertWithWhere,r.update=r.updateAll,r.destroyById=r.deleteById,r.removeById=r.deleteById,r.prototype$updateAttributes=r.prototype$patchAttributes,r.modelName="Cage",r.devices=function(){var e=n.get("Device"),t=e["::get::Cage::devices"];return t.apply(r,arguments)},r.devices.count=function(){var e=n.get("Device"),t=e["::count::Cage::devices"];return t.apply(r,arguments)},r.devices.create=function(){var e=n.get("Device"),t=e["::create::Cage::devices"];return t.apply(r,arguments)},r.devices.createMany=function(){var e=n.get("Device"),t=e["::createMany::Cage::devices"];return t.apply(r,arguments)},r.devices.destroyAll=function(){var e=n.get("Device"),t=e["::delete::Cage::devices"];return t.apply(r,arguments)},r.devices.destroyById=function(){var e=n.get("Device"),t=e["::destroyById::Cage::devices"];return t.apply(r,arguments)},r.devices.findById=function(){var e=n.get("Device"),t=e["::findById::Cage::devices"];return t.apply(r,arguments)},r.devices.updateById=function(){var e=n.get("Device"),t=e["::updateById::Cage::devices"];return t.apply(r,arguments)},r.center=function(){var e=n.get("Center"),t=e["::get::Cage::center"];return t.apply(r,arguments)},r}]),s.factory("LoopBackAuth",function(){function e(){var e=this;a.forEach(function(t){e[t]=n(t)}),this.currentUserData=null}function t(e,t,n){try{var a=o+t;null==n&&(n=""),e[a]=n}catch(r){console.log("Cannot access local/session storage:",r)}}function n(e){var t=o+e;return localStorage[t]||sessionStorage[t]||null}var a=["accessTokenId","currentUserId","rememberMe"],o="$LoopBack$";return e.prototype.save=function(){var e=this,n=this.rememberMe?localStorage:sessionStorage;a.forEach(function(a){t(n,a,e[a])})},e.prototype.setUser=function(e,t,n){this.accessTokenId=e,this.currentUserId=t,this.currentUserData=n},e.prototype.clearUser=function(){this.accessTokenId=null,this.currentUserId=null,this.currentUserData=null},e.prototype.clearStorage=function(){a.forEach(function(e){t(sessionStorage,e,null),t(localStorage,e,null)})},new e}).config(["$httpProvider",function(e){e.interceptors.push("LoopBackAuthRequestInterceptor")}]).factory("LoopBackAuthRequestInterceptor",["$q","LoopBackAuth",function(e,t){return{request:function(o){var s=a(o.url);if(s&&-1===o.url.indexOf(i))return o;if(t.accessTokenId)o.headers[r]=t.accessTokenId;else if(o.__isGetCurrentUser__){var d={body:{error:{status:401}},status:401,config:o,headers:function(){return n}};return e.reject(d)}return o||e.when(o)}}}]).provider("LoopBackResource",function(){this.setAuthHeader=function(e){r=e},this.getAuthHeader=function(){return r},this.setUrlBase=function(e){o=e,i=a(o)||location.host},this.getUrlBase=function(){return o},this.$get=["$resource",function(e){var t=function(t,n,a){var o=e(t,n,a);return o.prototype.$save=function(e,t){var n=o.upsert.call(this,{},this,e,t);return n.$promise||n},o};return t.getUrlBase=function(){return o},t.getAuthHeader=function(){return r},t}]})}(window,window.angular),function(){"use strict";function e(e,t,n,a,o,r,i,s){function d(e,t){var n="/assets/images/icons/";r();e.icon=n+"salmon.png",e.options={labelClass:"smart-icon dark",labelAnchor:"30 50",labelContent:e.name}}function l(e){var t=1*e.WT,n=1*e.DO,a=32.1,o=.01*(t+273.5),r=-173.4292+249.6339/o+143.3483*Math.log(o)+-21.8492*o+a*(-.033096+(.014259+-.0017*o)*o);return Math.exp(r)/.7*n/100}function c(){return[{featureType:"landscape.man_made",elementType:"geometry",stylers:[{color:"#f7f1df"}]},{featureType:"landscape.natural",elementType:"geometry",stylers:[{color:"#d0e3b4"}]},{featureType:"landscape.natural.terrain",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi.business",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"poi.medical",elementType:"geometry",stylers:[{color:"#fbd3da"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#bde6ab"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#ffe15f"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#efd151"}]},{featureType:"road.arterial",elementType:"geometry.fill",stylers:[{color:"#ffffff"}]},{featureType:"road.local",elementType:"geometry.fill",stylers:[{color:"black"}]},{featureType:"transit.station.airport",elementType:"geometry.fill",stylers:[{color:"#cfb2db"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#a2daf2"}]}]}function u(e){var t=s;return a.sortBy(a.map(e,function(e,n){return{id:n,value:e,weight:a.findWhere(t,{id:n})?a.findWhere(t,{id:n}).weight||0:0}}),"weight").reverse()}var m={changeIconMarker:d,mapStyle:c,addWeight:u,DOFormula:l};return m}e.$inject=["$log","Device","$q","_","$filter","moment","$timeout","UNITS"],angular.module("app.services").factory("HelperService",e)}(),function(){"use strict";function e(e){function t(){var e=new Date,t=[{fecha:new Date(e.getTime()-14e6),value:-140.73},{fecha:new Date(e.getTime()-13e6),value:-120.54},{fecha:new Date(e.getTime()-12e6),value:-99.64},{fecha:new Date(e.getTime()-11e6),value:-40.56},{fecha:new Date(e.getTime()-1e7),value:-10.23},{fecha:new Date(e.getTime()-9e6),value:34.32},{fecha:new Date(e.getTime()-8e6),value:54.45},{fecha:new Date(e.getTime()-7e6),value:60.86},{fecha:new Date(e.getTime()-6e6),value:53.42},{fecha:new Date(e.getTime()-5e6),value:44.14},{fecha:new Date(e.getTime()-4e6),value:24.08},{fecha:new Date(e.getTime()-3e6),value:50.96},{fecha:new Date(e.getTime()-2e6),value:100.19},{fecha:new Date(e.getTime()-1e6),value:240.05}];return t}function n(){for(var e=new Date,t=[{key:"ACC X",values:[]},{key:"ACC Y",values:[]},{key:"ACC Z",values:[]}],n=0;10>n;n++)t[0].values.push({fecha:new Date(e.getTime()-1e6*(14-n)),value:Math.floor(200*Math.random()+1)}),t[1].values.push({fecha:new Date(e.getTime()-1e6*(14-n)),value:Math.floor(-1e3*Math.random()-500)}),t[2].values.push({fecha:new Date(e.getTime()-1e6*(14-n)),value:Math.floor(1e3*Math.random()+800)});return t}function a(e,t,n,a){var o=angular.copy(s);return o.lowerLimit=e,o.upperLimit=t,o.unit=n,o.ranges=a,o}function o(){var e=angular.copy(d);return e}function r(){var e=angular.copy(c);return e}function i(){var e=angular.copy(u);return e}var s={value:0,precision:2,ranges:[]},d={options:{chart:{type:"lineChart",noData:"Esperando información...",margin:{top:32,right:32,bottom:32,left:32},showValues:!0,useInteractiveGuideline:!0,duration:2,clipEdge:!0,clipVoronoi:!1,interpolate:"cardinal",showLegend:!0,x:function(e){return e.x},y:function(e){return e.y},xAxis:{ticks:5,showMaxMin:!0,staggerLabels:!0,tickFormat:function(e){var t=new Date(e);return d3.time.format("%d/%m/%Y %H:%M")(t)}},yAxis:{tickFormat:function(e){return d3.format(".1f")(e)}},interactiveLayer:{tooltip:{gravity:"s",classes:"gravity-s"}}}},data:[{key:"Oxigeno",color:"#0075C9",values:[]},{key:"Temperatura",color:"#F9CCC7",values:[]}]},l=new Date;l.setHours(l.getHours()-2);var c={options:{chart:{type:"historicalBarChart",noData:"Esperando información...",color:["#0075C9"],margin:{top:32,right:32,bottom:32,left:32},showValues:!0,isArea:!0,useInteractiveGuideline:!0,duration:500,clipEdge:!0,clipVoronoi:!1,interpolate:"cardinal",showLegend:!1,yDomain:[-300,300],x:function(e){return e.fecha},y:function(e){return e.value},xAxis:{ticks:4,staggerLabels:!0,tickFormat:function(e){var t=new Date(e);return d3.time.format("%d/%m/%Y %H:%M")(t)}},yAxis:{ticks:10},interactiveLayer:{tooltip:{gravity:"s",classes:"gravity-s"}}}},data:[{key:"cm",values:t()}]},u={options:{chart:{type:"lineChart",noData:"Esperando información...",margin:{top:32,right:32,bottom:32,left:32},showValues:!0,isArea:!1,useInteractiveGuideline:!0,duration:500,x:function(e){return e.fecha},y:function(e){return e.value},xAxis:{ticks:4,staggerLabels:!0,tickFormat:function(e){var t=new Date(e);return d3.time.format("%d/%m/%Y %H:%M")(t)}},yAxis:{ticks:4},interactiveLayer:{tooltip:{gravity:"s",classes:"gravity-s"}}}},data:n()},m={createGague:a,createHistory:o,createLineChart:r,createLineChartACC:i};return m}e.$inject=["$log"],angular.module("app.services").factory("ChartService",e)}(),function(){"use strict";function e(e,t,n){function a(t,n){return e.login({rememberMe:n},t).$promise}function o(){return m=null,e.logout().$promise}function r(t){return e.create(t).$promise}function i(){return e.isAuthenticated()}function s(){return m?n.when(m):e.getCurrent().$promise.then(function(e){return m=e,e})}function d(t){return e.resetPassword({email:t}).$promise}function l(t,n){return e.setPassword({access_token:t},{newPassword:n}).$promise}function c(t,n){return e.changePassword({oldPassword:t,newPassword:n}).$promise}function u(t){return e.prototype$patchAttributes(t).$promise.then(function(e){return m=e,e})}var m,p={login:a,logout:o,register:r,isAuthenticated:i,getCurrentUser:s,resetPassword:d,setPassword:l,changePassword:c,updateProfile:u};return p}e.$inject=["ApiUser","$rootScope","$q"],angular.module("app.services").factory("authService",e)}(),function(){"use strict";function AlertService($log,$q,managerDeviceService,ToastService){function checkAlert(data){$q.all([managerDeviceService.getRules(),managerDeviceService.getDevices()]).then(function(response){var rulers=response[0],devices=response[1],device=_.find(devices,function(e){return e.deviceId===data.deviceId});if(device)for(var condition=[],i=0;i<rulers.length;i++)if(condition=angular.copy(rulers[i].condition).split(" "),$log.debug("condition",condition),device.deviceId==rulers[i].deviceId)if(_.isNumber(parseInt(condition[2]))&&!_.isNaN(parseInt(condition[2]))){if(eval(data.dataOriginal[condition[0]]+condition[1]+condition[2])){$log.debug("ALERT --> "+data.dataOriginal[condition[0]]+condition[1]+condition[2]);for(var alert={title:"Nodo "+device.name,event:"Regla cumplida en nodo "+device.name+" "+condition[0]+" "+data.dataOriginal[condition[0]]+" "+condition[1]+" "+condition[2],deviceId:device.deviceId,timestamp:data.timestamp},x=0;x<data.data.length;x++)data.data[x].id==condition[0]?data.data[x].alert=!0:data.data[x].alert=!1;managerDeviceService.addAlert(alert),ToastService.toastrError(alert.event)}}else if(eval(data.dataOriginal[condition[0]]+condition[1]+data.dataOriginal[condition[2]])){$log.debug("ALERT --> "+data.dataOriginal[condition[0]]+condition[1]+condition[2]+data.dataOriginal[condition[2]]);for(var alert={title:"Nodo "+device.name,event:"Regla cumplida en nodo "+device.name+" "+condition[0]+" "+data.dataOriginal[condition[0]]+" "+condition[1]+" "+condition[2]+" "+data.dataOriginal[condition[2]],deviceId:device.deviceId,timestamp:data.timestamp},z=0;z<data.data.length;z++)data.data[z].id==condition[0]||data.data[z].id==condition[2]?data.data[z].alert=!0:data.data[z].alert=!1;managerDeviceService.addAlert(alert),ToastService.toastrError(alert.event)}})}function checkOldAlert(device){$q.all([managerDeviceService.getRules()]).then(function(response){var rulers=response[0],condition=[];$log.debug("Check Old Alert");for(var i=0;i<rulers.length;i++)if(condition=angular.copy(rulers[i].condition).split(" "),$log.debug("Condition",condition),device.deviceId==rulers[i].deviceId)if(_.isNumber(parseInt(condition[2]))&&!_.isNaN(parseInt(condition[2]))){if(eval(device.event.dataOriginal[condition[0]]+condition[1]+condition[2])){$log.debug("ALERT --> "+device.event.dataOriginal[condition[0]]+condition[1]+condition[2]);for(var x=0;x<device.event.data.length;x++)device.event.data[x].id==condition[0]?device.event.data[x].alert=!0:device.event.data[x].alert=!1}}else if(eval(device.event.dataOriginal[condition[0]]+condition[1]+device.event.dataOriginal[condition[2]])){$log.debug("ALERT --> "+device.event.dataOriginal[condition[0]]+condition[1]+condition[2]+device.event.dataOriginal[condition[2]]);for(var z=0;z<device.event.data.length;z++)device.event.data[z].id==condition[0]||device.event.data[z].id==condition[2]?device.event.data[z].alert=!0:device.event.data[z].alert=!1}})}var service={checkAlert:checkAlert,checkOldAlert:checkOldAlert};return service}AlertService.$inject=["$log","$q","managerDeviceService","ToastService"],angular.module("app.services").factory("AlertService",AlertService)}(),/*******************************************************************************
 * Copyright (c) 2013 IBM Corp.
 *
 * All rights reserved. This program and the accompanying materials
 * are made available under the terms of the Eclipse Public License v1.0
 * and Eclipse Distribution License v1.0 which accompany this distribution. 
 *
 * The Eclipse Public License is available at 
 *    http://www.eclipse.org/legal/epl-v10.html
 * and the Eclipse Distribution License is available at 
 *   http://www.eclipse.org/org/documents/edl-v10.php.
 *
 * Contributors:
 *    Andrew Banks - initial API and implementation and initial documentation
 *******************************************************************************/
"undefined"==typeof Paho&&(Paho={}),Paho.MQTT=function(e){function t(e,t){var n=t,a=e[t],r=a>>4,i=a&=15;t+=1;var s,l=0,u=1;do{if(t==e.length)return[null,n];s=e[t++],l+=(127&s)*u,u*=128}while(0!=(128&s));var m=t+l;if(m>e.length)return[null,n];var p=new y(r);switch(r){case c.CONNACK:var g=e[t++];1&g&&(p.sessionPresent=!0),p.returnCode=e[t++];break;case c.PUBLISH:var v=i>>1&3,f=o(e,t);t+=2;var h=d(e,t,f);t+=f,v>0&&(p.messageIdentifier=o(e,t),t+=2);var b=new Paho.MQTT.Message(e.subarray(t,m));1==(1&i)&&(b.retained=!0),8==(8&i)&&(b.duplicate=!0),b.qos=v,b.destinationName=h,p.payloadMessage=b;break;case c.PUBACK:case c.PUBREC:case c.PUBREL:case c.PUBCOMP:case c.UNSUBACK:p.messageIdentifier=o(e,t);break;case c.SUBACK:p.messageIdentifier=o(e,t),t+=2,p.returnCode=e.subarray(t,m)}return[p,m]}function n(e,t,n){return t[n++]=e>>8,t[n++]=e%256,n}function a(e,t,a,o){return o=n(t,a,o),s(e,a,o),o+t}function o(e,t){return 256*e[t]+e[t+1]}function r(e){var t=new Array(1),n=0;do{var a=e%128;e>>=7,e>0&&(a|=128),t[n++]=a}while(e>0&&4>n);return t}function i(e){for(var t=0,n=0;n<e.length;n++){var a=e.charCodeAt(n);a>2047?(a>=55296&&56319>=a&&(n++,t++),t+=3):a>127?t+=2:t++}return t}function s(e,t,n){for(var a=n,o=0;o<e.length;o++){var r=e.charCodeAt(o);if(r>=55296&&56319>=r){var i=e.charCodeAt(++o);if(isNaN(i))throw new Error(v(p.MALFORMED_UNICODE,[r,i]));r=(r-55296<<10)+(i-56320)+65536}127>=r?t[a++]=r:2047>=r?(t[a++]=r>>6&31|192,t[a++]=63&r|128):65535>=r?(t[a++]=r>>12&15|224,t[a++]=r>>6&63|128,t[a++]=63&r|128):(t[a++]=r>>18&7|240,t[a++]=r>>12&63|128,t[a++]=r>>6&63|128,t[a++]=63&r|128)}return t}function d(e,t,n){for(var a,o="",r=t;t+n>r;){var i=e[r++];if(128>i)a=i;else{var s=e[r++]-128;if(0>s)throw new Error(v(p.MALFORMED_UTF,[i.toString(16),s.toString(16),""]));if(224>i)a=64*(i-192)+s;else{var d=e[r++]-128;if(0>d)throw new Error(v(p.MALFORMED_UTF,[i.toString(16),s.toString(16),d.toString(16)]));if(240>i)a=4096*(i-224)+64*s+d;else{var l=e[r++]-128;if(0>l)throw new Error(v(p.MALFORMED_UTF,[i.toString(16),s.toString(16),d.toString(16),l.toString(16)]));if(!(248>i))throw new Error(v(p.MALFORMED_UTF,[i.toString(16),s.toString(16),d.toString(16),l.toString(16)]));a=262144*(i-240)+4096*s+64*d+l}}}a>65535&&(a-=65536,o+=String.fromCharCode(55296+(a>>10)),a=56320+(1023&a)),o+=String.fromCharCode(a)}return o}var l="@VERSION@",c={CONNECT:1,CONNACK:2,PUBLISH:3,PUBACK:4,PUBREC:5,PUBREL:6,PUBCOMP:7,SUBSCRIBE:8,SUBACK:9,UNSUBSCRIBE:10,UNSUBACK:11,PINGREQ:12,PINGRESP:13,DISCONNECT:14},u=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){if(!t.hasOwnProperty(n)){var a="Unknown property, "+n+". Valid properties are:";for(var n in t)t.hasOwnProperty(n)&&(a=a+" "+n);throw new Error(a)}if(typeof e[n]!==t[n])throw new Error(v(p.INVALID_TYPE,[typeof e[n],n]))}},m=function(e,t){return function(){return e.apply(t,arguments)}},p={OK:{code:0,text:"AMQJSC0000I OK."},CONNECT_TIMEOUT:{code:1,text:"AMQJSC0001E Connect timed out."},SUBSCRIBE_TIMEOUT:{code:2,text:"AMQJS0002E Subscribe timed out."},UNSUBSCRIBE_TIMEOUT:{code:3,text:"AMQJS0003E Unsubscribe timed out."},PING_TIMEOUT:{code:4,text:"AMQJS0004E Ping timed out."},INTERNAL_ERROR:{code:5,text:"AMQJS0005E Internal error. Error Message: {0}, Stack trace: {1}"},CONNACK_RETURNCODE:{code:6,text:"AMQJS0006E Bad Connack return code:{0} {1}."},SOCKET_ERROR:{code:7,text:"AMQJS0007E Socket error:{0}."},SOCKET_CLOSE:{code:8,text:"AMQJS0008I Socket closed."},MALFORMED_UTF:{code:9,text:"AMQJS0009E Malformed UTF data:{0} {1} {2}."},UNSUPPORTED:{code:10,text:"AMQJS0010E {0} is not supported by this browser."},INVALID_STATE:{code:11,text:"AMQJS0011E Invalid state {0}."},INVALID_TYPE:{code:12,text:"AMQJS0012E Invalid type {0} for {1}."},INVALID_ARGUMENT:{code:13,text:"AMQJS0013E Invalid argument {0} for {1}."},UNSUPPORTED_OPERATION:{code:14,text:"AMQJS0014E Unsupported operation."},INVALID_STORED_DATA:{code:15,text:"AMQJS0015E Invalid data in local storage key={0} value={1}."},INVALID_MQTT_MESSAGE_TYPE:{code:16,text:"AMQJS0016E Invalid MQTT message type {0}."},MALFORMED_UNICODE:{code:17,text:"AMQJS0017E Malformed Unicode string:{0} {1}."}},g={0:"Connection Accepted",1:"Connection Refused: unacceptable protocol version",2:"Connection Refused: identifier rejected",3:"Connection Refused: server unavailable",4:"Connection Refused: bad user name or password",5:"Connection Refused: not authorized"},v=function(e,t){var n=e.text;if(t)for(var a,o,r=0;r<t.length;r++)if(a="{"+r+"}",o=n.indexOf(a),o>0){var i=n.substring(0,o),s=n.substring(o+a.length);n=i+t[r]+s}return n},f=[0,6,77,81,73,115,100,112,3],h=[0,4,77,81,84,84,4],y=function(e,t){this.type=e;for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n])};y.prototype.encode=function(){var e=(15&this.type)<<4,t=0,o=new Array,s=0;switch(void 0!=this.messageIdentifier&&(t+=2),this.type){case c.CONNECT:switch(this.mqttVersion){case 3:t+=f.length+3;break;case 4:t+=h.length+3}if(t+=i(this.clientId)+2,void 0!=this.willMessage){t+=i(this.willMessage.destinationName)+2;var d=this.willMessage.payloadBytes;d instanceof Uint8Array||(d=new Uint8Array(u)),t+=d.byteLength+2}void 0!=this.userName&&(t+=i(this.userName)+2),void 0!=this.password&&(t+=i(this.password)+2);break;case c.SUBSCRIBE:e|=2;for(var l=0;l<this.topics.length;l++)o[l]=i(this.topics[l]),t+=o[l]+2;t+=this.requestedQos.length;break;case c.UNSUBSCRIBE:e|=2;for(var l=0;l<this.topics.length;l++)o[l]=i(this.topics[l]),t+=o[l]+2;break;case c.PUBREL:e|=2;break;case c.PUBLISH:this.payloadMessage.duplicate&&(e|=8),e=e|=this.payloadMessage.qos<<1,this.payloadMessage.retained&&(e|=1),s=i(this.payloadMessage.destinationName),t+=s+2;var u=this.payloadMessage.payloadBytes;t+=u.byteLength,u instanceof ArrayBuffer?u=new Uint8Array(u):u instanceof Uint8Array||(u=new Uint8Array(u.buffer));break;case c.DISCONNECT:}var m=r(t),p=m.length+1,g=new ArrayBuffer(t+p),v=new Uint8Array(g);if(v[0]=e,v.set(m,1),this.type==c.PUBLISH)p=a(this.payloadMessage.destinationName,s,v,p);else if(this.type==c.CONNECT){switch(this.mqttVersion){case 3:v.set(f,p),p+=f.length;break;case 4:v.set(h,p),p+=h.length}var y=0;this.cleanSession&&(y=2),void 0!=this.willMessage&&(y|=4,y|=this.willMessage.qos<<3,this.willMessage.retained&&(y|=32)),void 0!=this.userName&&(y|=128),void 0!=this.password&&(y|=64),v[p++]=y,p=n(this.keepAliveInterval,v,p)}switch(void 0!=this.messageIdentifier&&(p=n(this.messageIdentifier,v,p)),this.type){case c.CONNECT:p=a(this.clientId,i(this.clientId),v,p),void 0!=this.willMessage&&(p=a(this.willMessage.destinationName,i(this.willMessage.destinationName),v,p),p=n(d.byteLength,v,p),v.set(d,p),p+=d.byteLength),void 0!=this.userName&&(p=a(this.userName,i(this.userName),v,p)),void 0!=this.password&&(p=a(this.password,i(this.password),v,p));break;case c.PUBLISH:v.set(u,p);break;case c.SUBSCRIBE:for(var l=0;l<this.topics.length;l++)p=a(this.topics[l],o[l],v,p),v[p++]=this.requestedQos[l];break;case c.UNSUBSCRIBE:for(var l=0;l<this.topics.length;l++)p=a(this.topics[l],o[l],v,p)}return g};var b=function(e,t,n){this._client=e,this._window=t,this._keepAliveInterval=1e3*n,this.isReset=!1;var a=new y(c.PINGREQ).encode(),o=function(e){return function(){return r.apply(e)}},r=function(){this.isReset?(this.isReset=!1,this._client._trace("Pinger.doPing","send PINGREQ"),this._client.socket.send(a),this.timeout=this._window.setTimeout(o(this),this._keepAliveInterval)):(this._client._trace("Pinger.doPing","Timed out"),this._client._disconnected(p.PING_TIMEOUT.code,v(p.PING_TIMEOUT)))};this.reset=function(){this.isReset=!0,this._window.clearTimeout(this.timeout),this._keepAliveInterval>0&&(this.timeout=setTimeout(o(this),this._keepAliveInterval))},this.cancel=function(){this._window.clearTimeout(this.timeout)}},S=function(e,t,n,a,o){this._window=t,n||(n=30);var r=function(e,t,n){return function(){return e.apply(t,n)}};this.timeout=setTimeout(r(a,e,o),1e3*n),this.cancel=function(){this._window.clearTimeout(this.timeout)}},w=function(t,n,a,o,r){if(!("WebSocket"in e&&null!==e.WebSocket))throw new Error(v(p.UNSUPPORTED,["WebSocket"]));if(!("localStorage"in e&&null!==e.localStorage))throw new Error(v(p.UNSUPPORTED,["localStorage"]));if(!("ArrayBuffer"in e&&null!==e.ArrayBuffer))throw new Error(v(p.UNSUPPORTED,["ArrayBuffer"]));this._trace("Paho.MQTT.Client",t,n,a,o,r),this.host=n,this.port=a,this.path=o,this.uri=t,this.clientId=r,this._localKey=n+":"+a+("/mqtt"!=o?":"+o:"")+":"+r+":",this._msg_queue=[],this._sentMessages={},this._receivedMessages={},this._notify_msg_sent={},this._message_identifier=1,this._sequence=0;for(var i in localStorage)(0==i.indexOf("Sent:"+this._localKey)||0==i.indexOf("Received:"+this._localKey))&&this.restore(i)};w.prototype.host,w.prototype.port,w.prototype.path,w.prototype.uri,w.prototype.clientId,w.prototype.socket,w.prototype.connected=!1,w.prototype.maxMessageIdentifier=65536,w.prototype.connectOptions,w.prototype.hostIndex,w.prototype.onConnectionLost,w.prototype.onMessageDelivered,w.prototype.onMessageArrived,w.prototype.traceFunction,w.prototype._msg_queue=null,w.prototype._connectTimeout,w.prototype.sendPinger=null,w.prototype.receivePinger=null,w.prototype.receiveBuffer=null,w.prototype._traceBuffer=null,w.prototype._MAX_TRACE_ENTRIES=100,w.prototype.connect=function(e){var t=this._traceMask(e,"password");if(this._trace("Client.connect",t,this.socket,this.connected),this.connected)throw new Error(v(p.INVALID_STATE,["already connected"]));if(this.socket)throw new Error(v(p.INVALID_STATE,["already connected"]));this.connectOptions=e,e.uris?(this.hostIndex=0,this._doConnect(e.uris[0])):this._doConnect(this.uri)},w.prototype.subscribe=function(e,t){if(this._trace("Client.subscribe",e,t),!this.connected)throw new Error(v(p.INVALID_STATE,["not connected"]));var n=new y(c.SUBSCRIBE);n.topics=[e],void 0!=t.qos?n.requestedQos=[t.qos]:n.requestedQos=[0],t.onSuccess&&(n.onSuccess=function(e){t.onSuccess({invocationContext:t.invocationContext,grantedQos:e})}),t.onFailure&&(n.onFailure=function(e){t.onFailure({invocationContext:t.invocationContext,errorCode:e})}),t.timeout&&(n.timeOut=new S(this,window,t.timeout,t.onFailure,[{invocationContext:t.invocationContext,errorCode:p.SUBSCRIBE_TIMEOUT.code,errorMessage:v(p.SUBSCRIBE_TIMEOUT)}])),this._requires_ack(n),this._schedule_message(n)},w.prototype.unsubscribe=function(e,t){if(this._trace("Client.unsubscribe",e,t),!this.connected)throw new Error(v(p.INVALID_STATE,["not connected"]));var n=new y(c.UNSUBSCRIBE);n.topics=[e],t.onSuccess&&(n.callback=function(){t.onSuccess({invocationContext:t.invocationContext})}),t.timeout&&(n.timeOut=new S(this,window,t.timeout,t.onFailure,[{invocationContext:t.invocationContext,errorCode:p.UNSUBSCRIBE_TIMEOUT.code,errorMessage:v(p.UNSUBSCRIBE_TIMEOUT)}])),this._requires_ack(n),this._schedule_message(n)},w.prototype.send=function(e){if(this._trace("Client.send",e),!this.connected)throw new Error(v(p.INVALID_STATE,["not connected"]));wireMessage=new y(c.PUBLISH),wireMessage.payloadMessage=e,e.qos>0?this._requires_ack(wireMessage):this.onMessageDelivered&&(this._notify_msg_sent[wireMessage]=this.onMessageDelivered(wireMessage.payloadMessage)),this._schedule_message(wireMessage)},w.prototype.disconnect=function(){if(this._trace("Client.disconnect"),!this.socket)throw new Error(v(p.INVALID_STATE,["not connecting or connected"]));wireMessage=new y(c.DISCONNECT),this._notify_msg_sent[wireMessage]=m(this._disconnected,this),this._schedule_message(wireMessage)},w.prototype.getTraceLog=function(){if(null!==this._traceBuffer){this._trace("Client.getTraceLog",new Date),this._trace("Client.getTraceLog in flight messages",this._sentMessages.length);for(var e in this._sentMessages)this._trace("_sentMessages ",e,this._sentMessages[e]);for(var e in this._receivedMessages)this._trace("_receivedMessages ",e,this._receivedMessages[e]);return this._traceBuffer}},w.prototype.startTrace=function(){null===this._traceBuffer&&(this._traceBuffer=[]),this._trace("Client.startTrace",new Date,l)},w.prototype.stopTrace=function(){delete this._traceBuffer},w.prototype._doConnect=function(e){if(this.connectOptions.useSSL){var t=e.split(":");t[0]="wss",e=t.join(":")}this.connected=!1,this.connectOptions.mqttVersion<4?this.socket=new WebSocket(e,["mqttv3.1"]):this.socket=new WebSocket(e,["mqtt"]),this.socket.binaryType="arraybuffer",this.socket.onopen=m(this._on_socket_open,this),this.socket.onmessage=m(this._on_socket_message,this),this.socket.onerror=m(this._on_socket_error,this),this.socket.onclose=m(this._on_socket_close,this),this.sendPinger=new b(this,window,this.connectOptions.keepAliveInterval),this.receivePinger=new b(this,window,this.connectOptions.keepAliveInterval),this._connectTimeout=new S(this,window,this.connectOptions.timeout,this._disconnected,[p.CONNECT_TIMEOUT.code,v(p.CONNECT_TIMEOUT)])},w.prototype._schedule_message=function(e){this._msg_queue.push(e),this.connected&&this._process_queue()},w.prototype.store=function(e,t){var n={type:t.type,messageIdentifier:t.messageIdentifier,version:1};switch(t.type){case c.PUBLISH:t.pubRecReceived&&(n.pubRecReceived=!0),n.payloadMessage={};for(var a="",o=t.payloadMessage.payloadBytes,r=0;r<o.length;r++)o[r]<=15?a=a+"0"+o[r].toString(16):a+=o[r].toString(16);n.payloadMessage.payloadHex=a,n.payloadMessage.qos=t.payloadMessage.qos,n.payloadMessage.destinationName=t.payloadMessage.destinationName,t.payloadMessage.duplicate&&(n.payloadMessage.duplicate=!0),t.payloadMessage.retained&&(n.payloadMessage.retained=!0),0==e.indexOf("Sent:")&&(void 0===t.sequence&&(t.sequence=++this._sequence),n.sequence=t.sequence);break;default:throw Error(v(p.INVALID_STORED_DATA,[key,n]))}localStorage.setItem(e+this._localKey+t.messageIdentifier,JSON.stringify(n))},w.prototype.restore=function(e){var t=localStorage.getItem(e),n=JSON.parse(t),a=new y(n.type,n);switch(n.type){case c.PUBLISH:for(var o=n.payloadMessage.payloadHex,r=new ArrayBuffer(o.length/2),i=new Uint8Array(r),s=0;o.length>=2;){var d=parseInt(o.substring(0,2),16);o=o.substring(2,o.length),i[s++]=d}var l=new Paho.MQTT.Message(i);l.qos=n.payloadMessage.qos,l.destinationName=n.payloadMessage.destinationName,n.payloadMessage.duplicate&&(l.duplicate=!0),n.payloadMessage.retained&&(l.retained=!0),a.payloadMessage=l;break;default:throw Error(v(p.INVALID_STORED_DATA,[e,t]))}0==e.indexOf("Sent:"+this._localKey)?(a.payloadMessage.duplicate=!0,this._sentMessages[a.messageIdentifier]=a):0==e.indexOf("Received:"+this._localKey)&&(this._receivedMessages[a.messageIdentifier]=a)},w.prototype._process_queue=function(){for(var e=null,t=this._msg_queue.reverse();e=t.pop();)this._socket_send(e),this._notify_msg_sent[e]&&(this._notify_msg_sent[e](),delete this._notify_msg_sent[e])},w.prototype._requires_ack=function(e){var t=Object.keys(this._sentMessages).length;if(t>this.maxMessageIdentifier)throw Error("Too many messages:"+t);for(;void 0!==this._sentMessages[this._message_identifier];)this._message_identifier++;e.messageIdentifier=this._message_identifier,this._sentMessages[e.messageIdentifier]=e,e.type===c.PUBLISH&&this.store("Sent:",e),this._message_identifier===this.maxMessageIdentifier&&(this._message_identifier=1)},w.prototype._on_socket_open=function(){var e=new y(c.CONNECT,this.connectOptions);e.clientId=this.clientId,this._socket_send(e)},w.prototype._on_socket_message=function(e){this._trace("Client._on_socket_message",e.data);for(var t=this._deframeMessages(e.data),n=0;n<t.length;n+=1)this._handleMessage(t[n])},w.prototype._deframeMessages=function(e){var n=new Uint8Array(e);if(this.receiveBuffer){var a=new Uint8Array(this.receiveBuffer.length+n.length);a.set(this.receiveBuffer),a.set(n,this.receiveBuffer.length),n=a,delete this.receiveBuffer}try{for(var o=0,r=[];o<n.length;){var i=t(n,o),s=i[0];if(o=i[1],null===s)break;r.push(s)}o<n.length&&(this.receiveBuffer=n.subarray(o))}catch(d){return void this._disconnected(p.INTERNAL_ERROR.code,v(p.INTERNAL_ERROR,[d.message,d.stack.toString()]))}return r},w.prototype._handleMessage=function(e){this._trace("Client._handleMessage",e);try{switch(e.type){case c.CONNACK:if(this._connectTimeout.cancel(),this.connectOptions.cleanSession){for(var t in this._sentMessages){var n=this._sentMessages[t];localStorage.removeItem("Sent:"+this._localKey+n.messageIdentifier)}this._sentMessages={};for(var t in this._receivedMessages){var a=this._receivedMessages[t];localStorage.removeItem("Received:"+this._localKey+a.messageIdentifier)}this._receivedMessages={}}if(0!==e.returnCode){this._disconnected(p.CONNACK_RETURNCODE.code,v(p.CONNACK_RETURNCODE,[e.returnCode,g[e.returnCode]]));break}this.connected=!0,this.connectOptions.uris&&(this.hostIndex=this.connectOptions.uris.length);var o=new Array;for(var r in this._sentMessages)this._sentMessages.hasOwnProperty(r)&&o.push(this._sentMessages[r]);for(var o=o.sort(function(e,t){return e.sequence-t.sequence}),i=0,s=o.length;s>i;i++){var n=o[i];if(n.type==c.PUBLISH&&n.pubRecReceived){var d=new y(c.PUBREL,{messageIdentifier:n.messageIdentifier});this._schedule_message(d)}else this._schedule_message(n)}this.connectOptions.onSuccess&&this.connectOptions.onSuccess({invocationContext:this.connectOptions.invocationContext}),this._process_queue();break;case c.PUBLISH:this._receivePublish(e);break;case c.PUBACK:var n=this._sentMessages[e.messageIdentifier];n&&(delete this._sentMessages[e.messageIdentifier],localStorage.removeItem("Sent:"+this._localKey+e.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(n.payloadMessage));break;case c.PUBREC:var n=this._sentMessages[e.messageIdentifier];if(n){n.pubRecReceived=!0;var d=new y(c.PUBREL,{messageIdentifier:e.messageIdentifier});this.store("Sent:",n),this._schedule_message(d)}break;case c.PUBREL:var a=this._receivedMessages[e.messageIdentifier];localStorage.removeItem("Received:"+this._localKey+e.messageIdentifier),a&&(this._receiveMessage(a),delete this._receivedMessages[e.messageIdentifier]);var l=new y(c.PUBCOMP,{messageIdentifier:e.messageIdentifier});this._schedule_message(l);break;case c.PUBCOMP:var n=this._sentMessages[e.messageIdentifier];delete this._sentMessages[e.messageIdentifier],localStorage.removeItem("Sent:"+this._localKey+e.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(n.payloadMessage);break;case c.SUBACK:var n=this._sentMessages[e.messageIdentifier];n&&(n.timeOut&&n.timeOut.cancel(),128===e.returnCode[0]?n.onFailure&&n.onFailure(e.returnCode):n.onSuccess&&n.onSuccess(e.returnCode),delete this._sentMessages[e.messageIdentifier]);break;case c.UNSUBACK:var n=this._sentMessages[e.messageIdentifier];n&&(n.timeOut&&n.timeOut.cancel(),n.callback&&n.callback(),delete this._sentMessages[e.messageIdentifier]);break;case c.PINGRESP:this.sendPinger.reset();break;case c.DISCONNECT:this._disconnected(p.INVALID_MQTT_MESSAGE_TYPE.code,v(p.INVALID_MQTT_MESSAGE_TYPE,[e.type]));break;default:this._disconnected(p.INVALID_MQTT_MESSAGE_TYPE.code,v(p.INVALID_MQTT_MESSAGE_TYPE,[e.type]))}}catch(u){return void this._disconnected(p.INTERNAL_ERROR.code,v(p.INTERNAL_ERROR,[u.message,u.stack.toString()]))}},w.prototype._on_socket_error=function(e){this._disconnected(p.SOCKET_ERROR.code,v(p.SOCKET_ERROR,[e.data]))},w.prototype._on_socket_close=function(){this._disconnected(p.SOCKET_CLOSE.code,v(p.SOCKET_CLOSE))},w.prototype._socket_send=function(e){if(1==e.type){var t=this._traceMask(e,"password");this._trace("Client._socket_send",t)}else this._trace("Client._socket_send",e);this.socket.send(e.encode()),this.sendPinger.reset()},w.prototype._receivePublish=function(e){switch(e.payloadMessage.qos){case"undefined":case 0:this._receiveMessage(e);break;case 1:var t=new y(c.PUBACK,{messageIdentifier:e.messageIdentifier});this._schedule_message(t),this._receiveMessage(e);break;case 2:this._receivedMessages[e.messageIdentifier]=e,this.store("Received:",e);var n=new y(c.PUBREC,{messageIdentifier:e.messageIdentifier});this._schedule_message(n);break;default:throw Error("Invaild qos="+wireMmessage.payloadMessage.qos)}},w.prototype._receiveMessage=function(e){this.onMessageArrived&&this.onMessageArrived(e.payloadMessage)},w.prototype._disconnected=function(e,t){this._trace("Client._disconnected",e,t),this.sendPinger.cancel(),this.receivePinger.cancel(),this._connectTimeout&&this._connectTimeout.cancel(),this._msg_queue=[],this._notify_msg_sent={},this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,1===this.socket.readyState&&this.socket.close(),delete this.socket),this.connectOptions.uris&&this.hostIndex<this.connectOptions.uris.length-1?(this.hostIndex++,this._doConnect(this.connectOptions.uris[this.hostIndex])):(void 0===e&&(e=p.OK.code,t=v(p.OK)),this.connected?(this.connected=!1,this.onConnectionLost&&this.onConnectionLost({errorCode:e,errorMessage:t})):4===this.connectOptions.mqttVersion&&this.connectOptions.mqttVersionExplicit===!1?(this._trace("Failed to connect V4, dropping back to V3"),this.connectOptions.mqttVersion=3,this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri)):this.connectOptions.onFailure&&this.connectOptions.onFailure({invocationContext:this.connectOptions.invocationContext,errorCode:e,errorMessage:t}))},w.prototype._trace=function(){if(this.traceFunction){for(var e in arguments)"undefined"!=typeof arguments[e]&&(arguments[e]=JSON.stringify(arguments[e]));var t=Array.prototype.slice.call(arguments).join("");this.traceFunction({severity:"Debug",message:t})}if(null!==this._traceBuffer)for(var e=0,n=arguments.length;n>e;e++)this._traceBuffer.length==this._MAX_TRACE_ENTRIES&&this._traceBuffer.shift(),0===e?this._traceBuffer.push(arguments[e]):"undefined"==typeof arguments[e]?this._traceBuffer.push(arguments[e]):this._traceBuffer.push("  "+JSON.stringify(arguments[e]))},w.prototype._traceMask=function(e,t){var n={};for(var a in e)e.hasOwnProperty(a)&&(a==t?n[a]="******":n[a]=e[a]);return n};var C=function(e,t,n,a){var o;if("string"!=typeof e)throw new Error(v(p.INVALID_TYPE,[typeof e,"host"]));if(2==arguments.length){a=t,o=e;var r=o.match(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/);if(!r)throw new Error(v(p.INVALID_ARGUMENT,[e,"host"]));e=r[4]||r[2],t=parseInt(r[7]),n=r[8]}else{if(3==arguments.length&&(a=n,n="/mqtt"),"number"!=typeof t||0>t)throw new Error(v(p.INVALID_TYPE,[typeof t,"port"]));if("string"!=typeof n)throw new Error(v(p.INVALID_TYPE,[typeof n,"path"]));var i=-1!=e.indexOf(":")&&"["!=e.slice(0,1)&&"]"!=e.slice(-1);o="ws://"+(i?"["+e+"]":e)+":"+t+n}for(var s=0,d=0;d<a.length;d++){var l=a.charCodeAt(d);l>=55296&&56319>=l&&d++,s++}if("string"!=typeof a||s>65535)throw new Error(v(p.INVALID_ARGUMENT,[a,"clientId"]));var c=new w(o,e,t,n,a);this._getHost=function(){return e},this._setHost=function(){throw new Error(v(p.UNSUPPORTED_OPERATION))},this._getPort=function(){return t},this._setPort=function(){throw new Error(v(p.UNSUPPORTED_OPERATION))},this._getPath=function(){return n},this._setPath=function(){throw new Error(v(p.UNSUPPORTED_OPERATION))},this._getURI=function(){return o},this._setURI=function(){throw new Error(v(p.UNSUPPORTED_OPERATION))},this._getClientId=function(){return c.clientId},this._setClientId=function(){throw new Error(v(p.UNSUPPORTED_OPERATION))},this._getOnConnectionLost=function(){return c.onConnectionLost},this._setOnConnectionLost=function(e){if("function"!=typeof e)throw new Error(v(p.INVALID_TYPE,[typeof e,"onConnectionLost"]));c.onConnectionLost=e},this._getOnMessageDelivered=function(){return c.onMessageDelivered},this._setOnMessageDelivered=function(e){if("function"!=typeof e)throw new Error(v(p.INVALID_TYPE,[typeof e,"onMessageDelivered"]));c.onMessageDelivered=e},this._getOnMessageArrived=function(){return c.onMessageArrived},this._setOnMessageArrived=function(e){if("function"!=typeof e)throw new Error(v(p.INVALID_TYPE,[typeof e,"onMessageArrived"]));c.onMessageArrived=e},this._getTrace=function(){return c.traceFunction},this._setTrace=function(e){if("function"!=typeof e)throw new Error(v(p.INVALID_TYPE,[typeof e,"onTrace"]));c.traceFunction=e},this.connect=function(e){if(e=e||{},u(e,{timeout:"number",userName:"string",password:"string",willMessage:"object",keepAliveInterval:"number",cleanSession:"boolean",useSSL:"boolean",invocationContext:"object",onSuccess:"function",onFailure:"function",hosts:"object",ports:"object",mqttVersion:"number",mqttVersionExplicit:"boolean",uris:"object"}),void 0===e.keepAliveInterval&&(e.keepAliveInterval=60),e.mqttVersion>4||e.mqttVersion<3)throw new Error(v(p.INVALID_ARGUMENT,[e.mqttVersion,"connectOptions.mqttVersion"]));if(void 0===e.mqttVersion?(e.mqttVersionExplicit=!1,e.mqttVersion=4):e.mqttVersionExplicit=!0,void 0!==e.password&&void 0===e.userName)throw new Error(v(p.INVALID_ARGUMENT,[e.password,"connectOptions.password"]));if(e.willMessage){if(!(e.willMessage instanceof _))throw new Error(v(p.INVALID_TYPE,[e.willMessage,"connectOptions.willMessage"]));if(e.willMessage.stringPayload,"undefined"==typeof e.willMessage.destinationName)throw new Error(v(p.INVALID_TYPE,[typeof e.willMessage.destinationName,"connectOptions.willMessage.destinationName"]))}if("undefined"==typeof e.cleanSession&&(e.cleanSession=!0),e.hosts){if(!(e.hosts instanceof Array))throw new Error(v(p.INVALID_ARGUMENT,[e.hosts,"connectOptions.hosts"]));if(e.hosts.length<1)throw new Error(v(p.INVALID_ARGUMENT,[e.hosts,"connectOptions.hosts"]));for(var t=!1,a=0;a<e.hosts.length;a++){if("string"!=typeof e.hosts[a])throw new Error(v(p.INVALID_TYPE,[typeof e.hosts[a],"connectOptions.hosts["+a+"]"]));if(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/.test(e.hosts[a])){if(0==a)t=!0;else if(!t)throw new Error(v(p.INVALID_ARGUMENT,[e.hosts[a],"connectOptions.hosts["+a+"]"]))}else if(t)throw new Error(v(p.INVALID_ARGUMENT,[e.hosts[a],"connectOptions.hosts["+a+"]"]))}if(t)e.uris=e.hosts;else{if(!e.ports)throw new Error(v(p.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));if(!(e.ports instanceof Array))throw new Error(v(p.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));if(e.hosts.length!=e.ports.length)throw new Error(v(p.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));e.uris=[];for(var a=0;a<e.hosts.length;a++){if("number"!=typeof e.ports[a]||e.ports[a]<0)throw new Error(v(p.INVALID_TYPE,[typeof e.ports[a],"connectOptions.ports["+a+"]"]));var r=e.hosts[a],i=e.ports[a],s=-1!=r.indexOf(":");o="ws://"+(s?"["+r+"]":r)+":"+i+n,e.uris.push(o)}}}c.connect(e)},this.subscribe=function(e,t){if("string"!=typeof e)throw new Error("Invalid argument:"+e);if(t=t||{},u(t,{qos:"number",invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),t.timeout&&!t.onFailure)throw new Error("subscribeOptions.timeout specified with no onFailure callback.");if("undefined"!=typeof t.qos&&0!==t.qos&&1!==t.qos&&2!==t.qos)throw new Error(v(p.INVALID_ARGUMENT,[t.qos,"subscribeOptions.qos"]));c.subscribe(e,t)},this.unsubscribe=function(e,t){if("string"!=typeof e)throw new Error("Invalid argument:"+e);if(t=t||{},u(t,{invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),t.timeout&&!t.onFailure)throw new Error("unsubscribeOptions.timeout specified with no onFailure callback.");c.unsubscribe(e,t)},this.send=function(e,t,n,a){var o;if(0==arguments.length)throw new Error("Invalid argument.length");if(1==arguments.length){if(!(e instanceof _)&&"string"!=typeof e)throw new Error("Invalid argument:"+typeof e);if(o=e,"undefined"==typeof o.destinationName)throw new Error(v(p.INVALID_ARGUMENT,[o.destinationName,"Message.destinationName"]));c.send(o)}else o=new _(t),o.destinationName=e,arguments.length>=3&&(o.qos=n),arguments.length>=4&&(o.retained=a),c.send(o)},this.disconnect=function(){c.disconnect()},this.getTraceLog=function(){return c.getTraceLog()},this.startTrace=function(){c.startTrace()},this.stopTrace=function(){c.stopTrace()},this.isConnected=function(){return c.connected}};C.prototype={get host(){return this._getHost()},set host(e){this._setHost(e)},get port(){return this._getPort()},set port(e){this._setPort(e)},get path(){return this._getPath()},set path(e){this._setPath(e)},get clientId(){return this._getClientId()},set clientId(e){this._setClientId(e)},get onConnectionLost(){return this._getOnConnectionLost()},set onConnectionLost(e){this._setOnConnectionLost(e)},get onMessageDelivered(){return this._getOnMessageDelivered()},set onMessageDelivered(e){this._setOnMessageDelivered(e)},get onMessageArrived(){return this._getOnMessageArrived()},set onMessageArrived(e){this._setOnMessageArrived(e)},get trace(){return this._getTrace()},set trace(e){this._setTrace(e)}};var _=function(e){var t;if(!("string"==typeof e||e instanceof ArrayBuffer||e instanceof Int8Array||e instanceof Uint8Array||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array))throw v(p.INVALID_ARGUMENT,[e,"newPayload"]);t=e,this._getPayloadString=function(){return"string"==typeof t?t:d(t,0,t.length)},this._getPayloadBytes=function(){if("string"==typeof t){var e=new ArrayBuffer(i(t)),n=new Uint8Array(e);return s(t,n,0),n}return t};var n=void 0;this._getDestinationName=function(){return n},this._setDestinationName=function(e){if("string"!=typeof e)throw new Error(v(p.INVALID_ARGUMENT,[e,"newDestinationName"]));n=e};var a=0;this._getQos=function(){return a},this._setQos=function(e){if(0!==e&&1!==e&&2!==e)throw new Error("Invalid argument:"+e);a=e};var o=!1;this._getRetained=function(){return o},this._setRetained=function(e){if("boolean"!=typeof e)throw new Error(v(p.INVALID_ARGUMENT,[e,"newRetained"]));o=e};var r=!1;this._getDuplicate=function(){return r},this._setDuplicate=function(e){r=e}};return _.prototype={get payloadString(){return this._getPayloadString()},get payloadBytes(){return this._getPayloadBytes()},get destinationName(){return this._getDestinationName()},set destinationName(e){this._setDestinationName(e)},get qos(){return this._getQos()},set qos(e){this._setQos(e)},get retained(){return this._getRetained()},set retained(e){this._setRetained(e)},get duplicate(){return this._getDuplicate()},set duplicate(e){this._setDuplicate(e)}},{Client:C,Message:_}}(window),function(){"use strict";function e(){}angular.module("app.navigation",[]).config(e)}(),function(){"use strict";function e(e,t,n){function a(){o.folded=!o.folded,n(function(){t.dispatchEvent(new Event("resize"))},200)}var o=this;o.bodyEl=angular.element("body"),o.folded=!1,o.msScrollOptions={suppressScrollX:!0},o.toggleMsNavigationFolded=a,e.$on("$stateChangeSuccess",function(){o.bodyEl.removeClass("ms-navigation-horizontal-mobile-menu-active")})}e.$inject=["$scope","$window","$timeout"],angular.module("app.navigation").controller("NavigationController",e)}(),function(){"use strict";function e(e,t){e.$on("$viewContentAnimationEnded",function(n){n.targetScope.$id===e.$id&&t.$broadcast("msSplashScreen::remove")})}e.$inject=["$scope","$rootScope"],angular.module("fuse").controller("MainController",e)}(),function(){"use strict";function e(){return function(e,t,n){if(!e)return e;for(var a=0;a<t.length;a++)if(t[a].id===e)return n?t[a].symbol:t[a].name?t[a].name:t[a].id;return n?"":e}}angular.module("fuse").filter("parseUnits",e)}(),function(){"use strict";function e(){return function(e,t){if(!e)return[];var n=Object.keys(e);if(n.length<1)return[];var a=new Object,o=0;return angular.forEach(n,function(n,r){return o>=t?!1:(a[n]=e[n],void o++)}),a}}angular.module("fuse").filter("limitObjectTo",e)}(),function(){"use strict";function e(e,t){return function(n,a){var o=3600,r=e(),i=e(n);return t.isNull(n)?"gris":r.diff(i,"seconds")<o?a?"rojo":"verde":"gris"}}e.$inject=["moment","_"],angular.module("fuse").filter("colorState",e)}(),function(){"use strict";function e(){return function(e){return e?e.charAt(0).toUpperCase()+e.substr(1).toLowerCase():""}}angular.module("fuse").filter("capitalize",e)}(),function(){"use strict";function e(){return{restrict:"A",require:"ngModel",scope:{ngModel:"=",serverValidation:"="},link:function(e,t,n,a){function o(e){
a.$setValidity(e,!0)}"string"==typeof e.serverValidation?e.arrServerValidation=[e.serverValidation]:e.arrServerValidation=e.serverValidation;var r=e.arrServerValidation[0];e.$watch("ngModel",function(){r&&a.$error[r]&&angular.forEach(e.arrServerValidation,o)})}}}angular.module("fuse").directive("serverValidation",e)}(),function(){"use strict";function e(e,t,n){if(t.generate(),n.getConfig("disableMdInkRippleOnMobile")&&e.isMobile()){var a=angular.element("body");a.attr("md-no-ink",!0)}e.isMobile()&&angular.element("html").addClass("is-mobile");var o=e.detectBrowser();if(o){var r=o.browser+" "+o.version+" "+o.os;angular.element("html").addClass(r)}}e.$inject=["msUtils","fuseGenerator","fuseConfig"],angular.module("app.core").run(e)}(),function(){"use strict";function e(e,t,n,a){t.debugEnabled(!0),e.config({tabindex:!1}),a.config({disableCustomScrollbars:!1,disableCustomScrollbarsOnMobile:!0,disableMdInkRippleOnMobile:!0}),n.config({wheelPropagation:!0})}e.$inject=["$ariaProvider","$logProvider","msScrollConfigProvider","fuseConfigProvider"],angular.module("app.core").config(e)}(),function(){"use strict";function e(e,t,n,a,o,r,i){o.changeLocale("es"),i.connectClient();var s=e.$on("$stateChangeStart",function(){e.loadingProgress=!0}),d=e.$on("$stateChangeSuccess",function(){t(function(){e.loadingProgress=!1})});e.state=n,e.$on("$destroy",function(){s(),d()});var l=-1===$.inArray(a.path(),["/","/register","/reset"]);e.$on("$locationChangeStart",function(e,t,n){l&&!r.isAuthenticated()&&a.path("/"),"/"==a.path()&&r.isAuthenticated()&&a.path("/home")})}e.$inject=["$rootScope","$timeout","$state","$location","amMoment","authService","MQTTUtils"],angular.module("fuse").run(e)}(),function(){"use strict";function e(e,t,n){n.html5Mode(!0),t.otherwise(function(e,t){var n=e.get("$state");n.go("app.pages.home")}),e.state("app",{"abstract":!0,views:{"main@":{templateUrl:"app/core/layouts/vertical-navigation.html",controller:"MainController as vm"},"toolbar@app":{templateUrl:"app/toolbar/layouts/vertical-navigation/toolbar.html",controller:"ToolbarController as vm"},"navigation@app":{templateUrl:"app/navigation/layouts/vertical-navigation/navigation.html",controller:"NavigationController as vm"}}})}e.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"],angular.module("fuse").config(e)}(),function(){"use strict";function e(){}angular.module("fuse").controller("IndexController",e)}(),function(){"use strict";angular.module("fuse").constant("MQTT",Paho.MQTT).constant("_",_).constant("alasql",alasql).constant("WSBROKER","w6ucey.messaging.internetofthings.ibmcloud.com").constant("WSPORT",443).constant("USERNAME","a-w6ucey-jxx81mg36k").constant("PASSWORD","91iCgtNf0H3LbVkZ)4").constant("ORG","w6ucey").constant("API_KEY","AIzaSyASEjO-aBsHytgEETgtWdJpy9Ec7gSEyLs").constant("UNITS",[{id:"CO",type:"float",symbol:"ppm"},{id:"CO2",type:"float",symbol:"ppm"},{id:"O2",type:"float",symbol:"ppm"},{id:"CH4",type:"float",symbol:"ppm"},{id:"O3",type:"float",symbol:"ppm"},{id:"NH3",type:"float",symbol:"ppm"},{id:"NO2",type:"float",symbol:"ppm"},{id:"LPG",type:"float",symbol:"ppm"},{id:"AP1",type:"float",symbol:"ppm"},{id:"AP2",type:"float",symbol:"ppm"},{id:"SV",type:"float",symbol:"ppm"},{id:"VOC",type:"float",symbol:"ppm"},{id:"NO",type:"float",symbol:"ppm"},{id:"CL2",type:"float",symbol:"ppm"},{id:"ETO",type:"float",symbol:"ppm"},{id:"H2",type:"float",symbol:"ppm"},{id:"H2S",type:"float",symbol:"ppm"},{id:"HCL",type:"float",symbol:"ppm"},{id:"HCN",type:"float",symbol:"ppm"},{id:"PH3",type:"float",symbol:"ppm"},{id:"SO2",type:"float",symbol:"ppm"},{id:"NOISE",weight:2,type:"float",name:"Ruido",symbol:"dBA"},{id:"GP_A",type:"float",symbol:"ppm"},{id:"GP_B",type:"float",symbol:"ppm"},{id:"GP_C",type:"float",symbol:"ppm"},{id:"GP_F",type:"float",symbol:"ppm"},{id:"WF",type:"float",symbol:"l/min"},{id:"PIR",type:"uint_8",name:"Presencia detectada",symbol:"Open/Closed"},{id:"LP",type:"uint_8",symbol:"Open/Closed"},{id:"LL",type:"uint_8",symbol:"Open/Closed"},{id:"HALL",type:"uint_8",symbol:"Open/Closed"},{id:"RIN",type:"uint_8",symbol:"Open/Closed"},{id:"ROUT",type:"uint_8",symbol:"Open/Closed"},{id:"EV_A",type:"uint_8",symbol:"Open/Closed"},{id:"EV_C",type:"uint_8",symbol:"Open/Closed"},{id:"EV_D",type:"uint_8",symbol:"Open/Closed"},{id:"EV_E",type:"uint_8",symbol:"Open/Closed"},{id:"BAT",type:"uint_8",name:"Batería",weight:9999,symbol:"%"},{id:"GPS",type:"float",symbol:"degrees"},{id:"RSSI",type:"int",symbol:""},{id:"MAC",type:"string",symbol:""},{id:"NA",type:"string",symbol:""},{id:"NID",type:"string",symbol:""},{id:"DATE",type:"uint_8",symbol:""},{id:"TIME",type:"uint_8",symbol:""},{id:"GMT",type:"int",symbol:""},{id:"RAM",type:"int",symbol:"bytes"},{id:"IN_TEMP",type:"float",symbol:"ºC"},{id:"ACC",type:"int",name:"Acelerómetros",symbol:"mg"},{id:"ACCX",type:"int",name:"Acelerómetro eje X",symbol:"mg"},{id:"ACCY",type:"int",name:"Acelerómetro eje Y",symbol:"mg"},{id:"ACCZ",type:"int",name:"Acelerómetro eje Z",symbol:"mg"},{id:"MILLIS",type:"ulong",symbol:"ms"},{id:"STR",type:"string",symbol:""},{id:"MBT",type:"string",symbol:""},{id:"MWIFI",type:"string",symbol:""},{id:"UID",type:"string",symbol:""},{id:"RB",type:"string",symbol:""},{id:"PM1",type:"float",symbol:"μg/m3"},{id:"PM2_5",type:"float",symbol:"μg/m3"},{id:"PM10",type:"float",symbol:"μg/m3"},{id:"PART",type:"ulong",symbol:""},{id:"TC",type:"float",weight:2,name:"Temperatura externa",symbol:"ºC"},{id:"TF",type:"float",symbol:"ºF"},{id:"HUM",type:"float",name:"Humedad",symbol:"%RH"},{id:"PRES",type:"float",name:"Presión",symbol:"%RH"},{id:"LUX2",type:"ulong",symbol:"luxes"},{id:"US",type:"int",symbol:"cm"},{id:"SPEED_OG",type:"float",symbol:"km/h"},{id:"COURSE_OG",type:"float",symbol:"degrees"},{id:"ALT",type:"float",symbol:"m"},{id:"HDOP",type:"float",symbol:""},{id:"VDOP",type:"float",symbol:""},{id:"PDOP",type:"float",symbol:""},{id:"SWICA",type:"float",symbol:"ppm"},{id:"SWIFL",type:"float",symbol:"ppm"},{id:"SWIFB",type:"float",symbol:"ppm"},{id:"SWINO3",type:"float",symbol:"ppm"},{id:"SWIBR",type:"float",symbol:"ppm"},{id:"SWICL",type:"float",symbol:"ppm"},{id:"SWICU",type:"float",symbol:"ppm"},{id:"SWIIO",type:"float",symbol:"ppm"},{id:"SWINH4",type:"float",symbol:"ppm"},{id:"SWIAG",type:"float",symbol:"ppm"},{id:"SWIPH",type:"float",symbol:"ppm"},{id:"SWILI",type:"float",symbol:"ppm"},{id:"SWIMG",type:"float",symbol:"ppm"},{id:"SWINO2",type:"float",symbol:"ppm"},{id:"SWICLO4",type:"float",symbol:"ppm"},{id:"SWIK",type:"float",symbol:"ppm"},{id:"SWINA",type:"float",symbol:"ppm"},{id:"SWI_A",type:"float",symbol:"ppm"},{id:"SWI_B",type:"float",symbol:"ppm"},{id:"SWI_C",type:"float",symbol:"ppm"},{id:"SWI_D",type:"float",symbol:"ppm"},{id:"TST",type:"ulong",symbol:"s"},{id:"VAPI",type:"uint_8",symbol:""},{id:"VPROG",type:"uint_8",symbol:""},{id:"VBOOT",type:"uint_8",symbol:""},{id:"PS",type:"uint_8",symbol:""},{id:"RAD",type:"float",symbol:"uSv/h"},{id:"PH",type:"float",symbol:""},{id:"ORP",type:"float",symbol:"voltage"},{id:"DO",type:"float",symbol:"%"},{id:"COND",type:"float",symbol:"uS/cm"},{id:"WT",type:"float",symbol:"ºC"},{id:"TURB",type:"float",symbol:"NTU"},{id:"PH_A",type:"float",symbol:""},{id:"PH_D",type:"float",symbol:""},{id:"ORP_A",type:"float",symbol:"voltage"},{id:"ORP_D",type:"float",symbol:"voltage"},{id:"SOIL1",type:"float",symbol:"Frequency"},{id:"SOIL2",type:"float",symbol:"Frequency"},{id:"SOIL3",type:"float",symbol:"Frequency"},{id:"SOILTC",type:"float",symbol:"ºC"},{id:"SOILTF",type:"float",symbol:"ºC"},{id:"LW",type:"float",name:"Humedad foliar",symbol:"%"},{id:"ANE",type:"float",symbol:"km/h"},{id:"WV",type:"uint_8",name:"Velocidad de viento",symbol:"Direction"},{id:"PLV1",type:"float",name:"Pluviometro",symbol:"mm"},{id:"PLV2",type:"float",symbol:"mm/h"},{id:"PLV3",type:"float",symbol:"mm/day"},{id:"PAR",type:"float",symbol:"μmol*m-2*s-1"},{id:"UV",type:"float",symbol:"μmol*m-2*s-1"},{id:"TD",type:"float",symbol:"mm"},{id:"SD",type:"float",symbol:"mm"},{id:"FD",type:"float",symbol:"mm"},{id:"SOIL_B",type:"float",symbol:""},{id:"SOIL_C",type:"float",symbol:""},{id:"SOIL_E",type:"float",symbol:""},{id:"TCB",type:"float",symbol:"ºC"},{id:"HUMB",type:"float",symbol:"%RH"},{id:"LUM",type:"float",symbol:"Ohms"},{id:"COUNT",type:"int",name:"Contador",symbol:""},{id:"TAKEN",weight:9999999999,type:"uint_8",name:"Estado",symbol:""},{id:"GPS_LAT",type:"float",name:"Latitud",symbol:""},{id:"GPS_LONG",type:"float",name:"Longitud",symbol:""},{id:"CF",name:"Humedad foliar",symbol:""},{id:"WP",type:"float",name:"Pluviometro",symbol:"mm"},{id:"CB",type:"float",name:"Presión",symbol:"%RH"},{id:"WA",type:"uint_8",name:"Velocidad de viento",symbol:""}]).constant("BASEURL","http://184.172.234.206:30437/api/v2")}(),function(){"use strict";function e(e,t,n,a,o,r,i,s){a.setUrlBase(o),i.interceptors.push(["$q","$location","LoopBackAuth",function(e,t,n){return{responseError:function(a){return 401==a.status&&(n.clearUser(),n.clearStorage(),t.nextAfterLogin=t.path(),t.path("/")),e.reject(a)}}}]),e.debugEnabled(!0),t.configure({key:r,v:"3.exp",libraries:"places,weather,geometry,visualization"}),n.useLoader("$translatePartialLoader",{urlTemplate:"{part}/i18n/{lang}.json"}),n.preferredLanguage("es"),n.useSanitizeValueStrategy("sanitize"),angular.extend(s,{autoDismiss:!1,containerId:"toast-container",maxOpened:10,timeOut:0,extendedTimeOut:0,closeButton:!0,tapToDismiss:!1,newestOnTop:!0,positionClass:"toast-top-right",preventDuplicates:!1,preventOpenDuplicates:!1,target:"body"})}e.$inject=["$logProvider","uiGmapGoogleMapApiProvider","$translateProvider","LoopBackResourceProvider","BASEURL","API_KEY","$httpProvider","toastrConfig"],angular.module("fuse").config(e)}(),function(){"use strict";function e(e,t){e.state("app.pages",{"abstract":!0,url:"/dasboard",resolve:{Devices:["managerDeviceService","MQTTUtils",function(e,t){return e.getDevices().then(function(e){return t.onStartWatchDevices(e),e})}],Rules:["managerDeviceService",function(e){return e.getRules()}],Alerts:["managerDeviceService","_",function(e,t){return e.getAlerts().then(function(e){for(var t=0;t<e.length;t++)e[t].timestamp=new Date(e[t].timestamp).getTime();return e})}]}})}e.$inject=["$stateProvider","msNavigationServiceProvider"],angular.module("app.pages",["app.pages.home","app.pages.profile","app.pages.help","app.pages.alerts","app.pages.reports","app.pages.rules","app.pages.nodes"]).config(e)}(),function(){"use strict";function e(e){}e.$inject=["msNavigationServiceProvider"],angular.module("app.auth",["app.auth.login","app.auth.reset","app.auth.register"]).config(e)}(),angular.module("fuse").run(["$templateCache",function(e){e.put("app/toolbar/addNode.html",'<md-dialog class="node-dialog" aria-label="Seguir Nodo"><form name="deviceForm" class="md-inline-form" novalidate>\n<md-toolbar class="md-accent" layout="column"><div class="md-toolbar-tools" layout="row" \nlayout-align="space-between center"><span class="title">Seguir Nodo</span><md-button class="md-icon-button" \nng-click="vm.cancel()" aria-label="Close dialog"><md-icon md-font-icon="icon-close"></md-icon></md-button></div>\n</md-toolbar><md-dialog-content ms-scroll><md-input-container class="md-block"><input type="text" name="name" \nng-model="vm.deviceForm.name" ng-pattern="/^[A-Za-z0-9\\-\\_\\.\\s]{1,36}$/" maxlength="36" placeholder="Nombre del nodo" \nrequired><div ng-messages="deviceForm.name.$error" role="alert"><div ng-message="required"><span>\nDebe especificar el nombre para su nodo.</span></div><div ng-message="maxlength"><span>\nEl nombre del nodo no puede tener mas de 36 caracteres.</span></div></div></md-input-container><md-input-container \nclass="md-block"><input type="text" name="deviceId" ng-model="vm.deviceForm.deviceId" \nng-pattern="/^[A-Za-z0-9\\-\\_\\.]{1,36}$/" maxlength="36" placeholder="Id del nodo" server-validation="[\'not_found\']" \nrequired><div ng-messages="deviceForm.deviceId.$error" role="alert"><div ng-message="required"><span>\nDebe especificar la Id del nodo.</span></div><div ng-message="maxlength"><span>\nLa Id del nodo no puede tener mas de 36 caracteres.</span></div><div ng-message="not_found"><span>\nNo se ha encontrado el nodo especificado.</span></div></div></md-input-container><md-input-container class="md-block">\n<label>Tipo de nodo</label><input name="typeId" ng-pattern="/^[A-Za-z0-9\\-\\_\\.\\s]{1,8}$/" maxlength="8" minlength="8" \nplaceholder="Tipo de nodo" ng-model="vm.deviceForm.typeId" required><div ng-messages="deviceForm.typeId.$error" \nrole="alert"><div ng-message="required"><span>El tipo de nodo es requerido.</span></div><div ng-message="minlength">\n<span>El tipo de nodo no puede tener menos de 8 caracteres.</span></div><div ng-message="maxlength"><span>\nEl tipo de nodo no puede tener más de 8 caracteres.</span></div></div></md-input-container></md-dialog-content>\n<md-dialog-actions layout="row" layout-align="space-between center"><div layout="row" layout-align="start center">\n<md-button type="submit" ng-click="vm.add()" class="send-button md-accent md-raised" \nng-disabled="deviceForm.$invalid || deviceForm.$pristine">Agregar</md-button></div></md-dialog-actions></form>\n</md-dialog>'),e.put("app/core/layouts/content-only.html",'<div id="layout-content-only" class="template-layout" layout="column" flex><md-content id="content" \nclass="animate-slide-up md-hue-2" ui-view="content" flex></md-content></div>'),e.put("app/core/layouts/content-with-toolbar.html",'<div id="layout-content-with-toolbar" class="template-layout" layout="column" flex><md-toolbar id="toolbar" \nclass="md-menu-toolbar md-whiteframe-1dp" ui-view="toolbar"></md-toolbar><md-content id="content" \nclass="animate-slide-up md-hue-2" ui-view="content" flex></md-content><md-sidenav id="quick-panel" \nclass="md-sidenav-right md-whiteframe-4dp" md-component-id="quick-panel" ms-scroll ui-view="quickPanel"></md-sidenav>\n</div>'),e.put("app/core/layouts/horizontal-navigation.html",'<div id="layout-horizontal-navigation" class="template-layout" layout="column" flex><div \nid="toolbar-navigation-container" class="md-whiteframe-1dp" layout="column" layout-align="space-between start">\n<md-toolbar id="toolbar" class="md-menu-toolbar md-whiteframe-1dp" ui-view="toolbar"></md-toolbar><div \nid="horizontal-navigation" ui-view="navigation" layout="row" layout-align="start end" flex></div></div><div \nid="content-container" flex layout="column"><md-content id="content" class="animate-slide-up md-hue-2" ms-scroll \nui-view="content" flex></md-content></div><md-sidenav id="quick-panel" class="md-sidenav-right md-whiteframe-4dp" \nmd-component-id="quick-panel" ms-scroll ui-view="quickPanel"></md-sidenav></div>'),e.put("app/core/layouts/vertical-navigation-fullwidth-toolbar-2.html",'<div id="layout-vertical-navigation-fullwidth-toolbar-2" class="template-layout" layout="column" flex><md-toolbar \nid="toolbar" class="md-menu-toolbar md-whiteframe-1dp md-accent" ui-view="toolbar"></md-toolbar><div \nid="main-container" layout="row" flex><md-sidenav id="vertical-navigation" class="md-primary-bg" \nmd-is-locked-open="$mdMedia(\'gt-sm\')" md-component-id="navigation" ms-scroll ui-view="navigation"></md-sidenav><div \nid="content-container" flex layout="column"><md-content id="content" class="animate-slide-up md-hue-2" ms-scroll \nui-view="content" flex></md-content></div><md-sidenav id="quick-panel" class="md-sidenav-right md-whiteframe-4dp" \nmd-component-id="quick-panel" ms-scroll ui-view="quickPanel"></md-sidenav></div></div>'),e.put("app/core/layouts/vertical-navigation-fullwidth-toolbar.html",'<div id="layout-vertical-navigation-fullwidth-toolbar" class="template-layout" layout="column" flex><md-toolbar \nid="toolbar" class="md-menu-toolbar md-whiteframe-1dp md-accent" ui-view="toolbar"></md-toolbar><div \nid="main-container" layout="row" flex><md-sidenav id="vertical-navigation" class="md-primary-bg" \nmd-is-locked-open="$mdMedia(\'gt-sm\')" md-component-id="navigation" ms-scroll ui-view="navigation"></md-sidenav><div \nid="content-container" flex layout="column"><md-content id="content" class="animate-slide-up md-hue-2" ms-scroll \nui-view="content" flex></md-content></div><md-sidenav id="quick-panel" class="md-sidenav-right md-whiteframe-4dp" \nmd-component-id="quick-panel" ms-scroll ui-view="quickPanel"></md-sidenav></div></div>'),e.put("app/core/layouts/vertical-navigation.html",'<div id="layout-vertical-navigation" class="template-layout" layout="row" flex><md-sidenav id="vertical-navigation" \nclass="md-accent-bg md-hue-2" md-is-locked-open="$mdMedia(\'gt-sm\')" md-component-id="navigation" ms-scroll \nui-view="navigation"></md-sidenav><div id="content-container" flex layout="column"><md-toolbar id="toolbar" \nclass="md-menu-toolbar md-whiteframe-1dp" ui-view="toolbar"></md-toolbar><md-content id="content" \nclass="animate-slide-up md-hue-2" ms-scroll ui-view="content" flex></md-content></div><md-sidenav id="quick-panel" \nclass="md-sidenav-right md-whiteframe-4dp" md-component-id="quick-panel" ms-scroll ui-view="quickPanel"></md-sidenav>\n</div>'),e.put("app/core/theme-options/theme-options.html",'<div class="ms-theme-options-button md-primary-bg" ng-click="toggleOptionsSidenav()"><md-icon md-font-icon="icon-cog" \nclass="white-text"></md-icon></div><md-sidenav md-component-id="fuse-theme-options" class="md-sidenav-right"><div \nclass="ms-theme-options-list" layout="column"><div class="theme-option layout-options"><div class="option-title">\nLayout Style:</div><md-radio-group layout="row" layout-align="start start" layout-wrap ng-model="vm.layoutStyle" \nng-change="vm.updateLayoutStyle()"><md-radio-button ng-repeat="layoutStyle in vm.layoutStyles" \nng-value="layoutStyle.value"><div layout="column" layout-align="center center"><img ng-src="{{layoutStyle.figure}}"> \n<span class="text-center font-size-12 mt-8">{{layoutStyle.label}}</span></div></md-radio-button></md-radio-group></div>\n<md-divider></md-divider><div class="theme-option"><div class="option-title">Layout Mode:</div><md-radio-group \nlayout="row" layout-align="start center" ng-model="vm.layoutMode" ng-change="vm.updateLayoutMode()"><md-radio-button \nng-repeat="layoutMode in vm.layoutModes" ng-value="layoutMode.value">{{layoutMode.label}}</md-radio-button>\n</md-radio-group></div><md-divider></md-divider><div class="theme-option color-palettes"><div class="option-title">\nColor Palette:</div><div layout="row" layout-align="start start" layout-wrap><md-button \nng-repeat="(themeName, theme) in vm.themes.list" class="md-raised theme-button" layout="row" \nlayout-align="center center" aria-label="{{themeName}}" ng-click="vm.setActiveTheme(themeName)" \nng-style="{\'background-color\': theme.primary.color,\'border-color\': theme.accent.color,\'color\': theme.primary.contrast1}" \nng-class="{active: vm.getActiveTheme().name === themeName}"><md-icon ng-style="{\'color\': theme.primary.contrast1}" \nmd-font-icon="icon-palette" class="icon s32"></md-icon></md-button></div></div></div></md-sidenav>'),e.put("app/core/directives/ms-info-bar/ms-info-bar.html",'<div id="ms-info-bar" layout="row" layout-align="start center" flex><div id="ms-info-bar-message" ng-transclude flex>\n</div><md-button id="ms-info-bar-close" class="md-icon-button" aria-label="Close" ng-click="removeInfoBar()"><md-icon \nmd-font-icon="icon-close s24"></md-icon></md-button></div>'),e.put("app/core/directives/ms-material-color-picker/ms-material-color-picker.html",'<md-menu md-position-mode="target-right target"><div ng-click="$mdOpenMenu($event)"><ms-color-picker-button><md-button \naria-label="Row Color" md-menu-origin ng-click="$mdOpenMenu($event)" ng-class="vm.selectedColor.class"><span \nng-show="vm.selectedColor.palette">{{vm.selectedColor.palette}} {{vm.selectedColor.hue}} </span><span \nng-show="!vm.selectedColor.palette">Select Color</span></md-button></ms-color-picker-button></div><md-menu-content \nclass="ms-material-color-picker-menu-content" layout-column><header \nng-class="vm.selectedColor.class || \'md-accent-bg\'" class="md-whiteframe-4dp" layout="row" \nlayout-align="space-between center"><md-button md-prevent-menu-close ng-click="vm.activateHueSelection(false,false)" \nclass="md-icon-button" ng-class="{\'hidden\':!vm.selectedPalette}" aria-label="Palette"><md-icon \nmd-font-icon="icon-arrow-left" class="s20"></md-icon></md-button><span ng-if="vm.selectedColor.palette">\n{{vm.selectedColor.palette}} {{vm.selectedColor.hue}} </span><span ng-if="!vm.selectedColor.palette">Select Color\n</span><md-button class="remove-color-button md-icon-button" ng-click="vm.removeColor()" aria-label="Remove Color">\n<md-icon md-font-icon="icon-delete" class="s20"></md-icon></md-button></header><div class="colors" ms-scroll><div \nng-show="!vm.selectedPalette" layout="row" layout-wrap><div class="color" ng-class="\'md-\'+palette+\'-500-bg\'" \nng-repeat="(palette, hues) in vm.palettes" ng-click="vm.activateHueSelection(palette,hues)" layout="row" \nlayout-align="start end" md-prevent-menu-close md-ink-ripple><span class="label">{{palette}}</span></div></div><div \nng-show="vm.selectedPalette" layout="row" layout-wrap><div class="color" \nng-class="\'md-\'+vm.selectedPalette+\'-\'+hue+\'-bg\'" ng-repeat="(hue, values) in vm.selectedHues" \nng-click="vm.selectColor(vm.selectedPalette,hue)" layout="row" layout-align="start end" md-ink-ripple><span \nclass="label">{{hue}} </span><i ng-if="vm.selectedPalette == vm.selectedColor.palette && hue == vm.selectedColor.hue" \nclass="s16 icon-check"></i></div></div></div></md-menu-content></md-menu>'),e.put("app/core/directives/ms-search-bar/ms-search-bar.html",'<div flex layout="row" layout-align="start center"><label for="ms-search-bar-input"><md-button \nclass="ms-search-bar-expander md-icon-button" aria-label="Expand Search Bar" ng-click="MsSearchBar.expand()" \nng-if="!MsSearchBar.resultsLoading || MsSearchBar.collapsed"><md-icon md-font-icon="icon-magnify" class="icon s24">\n</md-icon></md-button><div class="ms-search-bar-loader" layout="row" layout-align="center center" \nng-if="MsSearchBar.resultsLoading && !MsSearchBar.collapsed"><md-progress-circular class="md-accent" md-diameter="32" \nmd-mode="indeterminate"></md-progress-circular></div></label><input id="ms-search-bar-input" type="text" \nplaceholder="Search" flex ng-model="MsSearchBar.query" ng-model-options="MsSearchBar.queryOptions" \nng-blur="MsSearchBar.collapse()" ng-keydown="MsSearchBar.handleKeydown($event)"><md-button \nclass="ms-search-bar-collapser md-icon-button" ng-click="MsSearchBar.collapse()" aria-label="Collapse Search Bar">\n<md-icon md-font-icon="icon-close" class="icon s24"></md-icon></md-button><div class="ms-search-bar-results" \nng-if="MsSearchBar.results" ms-scroll><div class="no-results" ng-if="MsSearchBar.results.length === 0">No Results!\n</div><div class="result" ng-repeat="result in MsSearchBar.results" ng-click="MsSearchBar.handleResultClick(result)" \nng-mouseenter="MsSearchBar.handleMouseenter($index)" ng-mousedown="MsSearchBar.absorbEvent($event)" \nng-class="{\'selected\': $index == MsSearchBar.selectedResultIndex}" md-ink-ripple><div layout="row" \nlayout-align="start center"><div class="icon-container" layout="row" layout-align="center center"><i \nng-if="result.icon" class="icon {{result.icon}}"></i><div ng-if="!result.icon" class="square md-accent-bg"></div></div>\n<div><div class="title">{{result.title}}</div><div class="description" ng-if="result.description">\n{{result.description}}</div></div></div></div></div></div>'),e.put("app/core/directives/ms-shortcuts/ms-shortcuts.html",'<div class="shortcuts-container" layout="row" layout-align="space-between center" flex \nng-class="{\'mobile-bar-active\': MsShortcuts.mobileBarActive}"><div class="flex-noshrink" layout="row" \nlayout-align="start center" flex><div class="shortcuts hide show-gt-xs" layout="row" layout-align="start center" \nms-scroll ng-if="MsShortcuts.shortcuts.length > 0" ng-sortable="MsShortcuts.sortableOptions"><div \nng-repeat="shortcut in MsShortcuts.shortcuts" layout="row" layout-align="center center"><md-button \nclass="md-icon-button shortcut" aria-label="{{shortcut.title}}" ui-sref="{{shortcut.uisref}}"><md-icon \nng-if="shortcut.icon" md-font-icon="{{shortcut.icon}}" class="icon s24"></md-icon><div ng-if="!shortcut.icon" \nclass="first-letter">{{shortcut.title.charAt(0)}}</div><md-tooltip md-direction="bottom">{{shortcut.title}}\n</md-tooltip></md-button></div></div><md-menu md-offset="8 56" class="shortcut-menu hide show-gt-xs"><md-button \nclass="md-icon-button add-shortcut-button" aria-label="Add shortcut" ng-click="$mdOpenMenu($event)"><md-icon \nmd-menu-origin md-font-icon="icon-star" class="icon amber-600-fg s24"></md-icon><md-tooltip md-direction="bottom">\nClick para agregar o eliminar acceso directo</md-tooltip></md-button><md-menu-content><div id="ms-shortcut-add-menu">\n<div class="shortcut-search" layout="row" layout-align="start center"><div class="search-icon" layout="row" \nlayout-align="center center" ng-if="!MsShortcuts.resultsLoading"><md-icon md-menu-align-target \nmd-font-icon="icon-magnify" class="icon s24"></md-icon></div><div class="shortcut-loader" layout="row" \nlayout-align="center center" ng-if="MsShortcuts.resultsLoading"><md-progress-circular class="md-accent" \nmd-diameter="20" md-mode="indeterminate"></md-progress-circular></div><input type="text" placeholder="Buscar" flex \nng-model="MsShortcuts.query" ng-model-options="MsShortcuts.queryOptions" \nng-keydown="MsShortcuts.handleKeydown($event)"></div><div class="results" ng-if="MsShortcuts.results" ms-scroll><div \nclass="no-results" ng-if="MsShortcuts.results.length === 0">Sin Resultados</div><div class="result" \nng-repeat="result in MsShortcuts.results" ng-click="MsShortcuts.handleResultClick(result)" \nng-mouseenter="MsShortcuts.handleMouseenter($index)" ng-mousedown="MsShortcuts.absorbEvent($event)" \nng-class="{\'selected\': $index == MsShortcuts.selectedResultIndex}" md-prevent-menu-close="md-prevent-menu-close" \nmd-ink-ripple><div layout="row" layout-align="start space-between"><div layout="row" layout-align="start center" flex>\n<div class="icon icon-container" layout="row" layout-align="center center"><i ng-if="result.icon" \nclass="{{result.icon}}"></i><div ng-if="!result.icon" class="square md-accent-bg"></div></div><div><div class="title">\n{{result.title}}</div></div></div><md-icon md-font-icon="icon-pin" class="icon s18" \nng-class="{\'fade-text\': !result.hasShortcut}"></md-icon></div></div></div></div></md-menu-content></md-menu></div>\n<md-button class="md-icon-button toggle-mobile-menu hide-gt-xs" aria-label="Add shortcut" \nng-click="MsShortcuts.toggleMobileBar()"><md-icon md-menu-origin md-font-icon="icon-star" \nclass="icon amber-600-fg s24" ng-hide="MsShortcuts.mobileBarActive"></md-icon><md-icon md-menu-origin \nmd-font-icon="icon-close" class="icon s24" ng-hide="!MsShortcuts.mobileBarActive"></md-icon></md-button></div>'),e.put("app/main/auth/login/forgot-password.html",'<md-dialog class="forgot-password" aria-label="Olvido su contraseña"><form name="forgotForm" novalidate>\n<md-dialog-content><h2 class="md-title">¿Olvidó su contraseña?</h2><div class="h5">\nIngrese el correo registrado previamente para poder reiniciar su contraseña.</div><md-input-container class="md-block" \nmd-no-float><input ng-keypress="vm.keypress($event)" type="text" name="email" ng-model="vm.email" placeholder="Correo" \nserver-validation="[\'EMAIL_NOT_FOUND\']" ng-pattern="/^.+@.+\\..+$/" required><div ng-messages="forgotForm.email.$error" \nrole="alert"><div ng-message="required"><span>El correo es requerido.</span></div><div ng-message="pattern"><span>\nDebe ser un correo valido.</span></div><div ng-message="EMAIL_NOT_FOUND"><span>El correo no se encuentra registrado.\n</span></div></div></md-input-container></md-dialog-content><md-dialog-actions><md-button class="md-primary" \nng-click="vm.cancel()">Cancelar</md-button><md-button class="md-primary" ng-click="vm.reset()" \nng-disabled="forgotForm.$invalid">Aceptar</md-button></md-dialog-actions></form></md-dialog>'),e.put("app/main/auth/login/login.html",'<div id="login" class="flex-scrollable" layout="column" ms-scroll><div id="login-form-wrapper" layout="column" \nlayout-align="center center"><div id="login-form"><div class="logo"><img \nsrc="assets/images/logos/marca-HaibuSmart.png" alt="logo"></div><form name="loginForm" novalidate \nng-submit="vm.login()"><md-input-container class="md-block" md-no-float><input type="text" name="email" \nng-model="vm.loginForm.email" placeholder="Correo" ng-pattern="/^.+@.+\\..+$/" required><div \nng-messages="loginForm.email.$error" role="alert"><div ng-message="required"><span>El correo es requerido.</span></div>\n<div ng-message="pattern"><span>Debe ser un correo valido.</span></div></div></md-input-container><md-input-container \nclass="md-block" md-no-float><input type="password" name="password" ng-model="vm.loginForm.password" \nplaceholder="Password" server-validation="[\'LOGIN_FAILED\']" required><div ng-messages="loginForm.password.$error" \nrole="alert"><div ng-message="required"><span>La contraseña es requerida.</span></div><div ng-message="LOGIN_FAILED">\n<span>Correo o contraseña incorrecta.</span></div></div></md-input-container><div class="remember-forgot-password" \nlayout="row" layout-xs="column" layout-align="space-between center"><md-checkbox class="remember-me" \nng-model="vm.rememberMe" aria-label="Remember Me"><span translate="LOGIN.REMEMBER_ME">Remember Me</span></md-checkbox>\n<a ng-click="vm.forgotPassword($event)" class="forgot-password" translate="LOGIN.FORGOT_PASSWORD">Forgot Password?</a>\n</div><md-button type="submit" class="md-raised md-accent submit-button" aria-label="LOG IN" \nng-disabled="loginForm.$invalid || loginForm.$pristine || vm.isLoading">INGRESAR</md-button></form><div \nclass="register" layout="row" layout-xs="column" layout-align="space-between  center"><span class="text" \ntranslate="LOGIN.DONT_HAVE_ACCOUNT">Don\'t have an account?</span> <a class="link" ui-sref="app.auth_register" \ntranslate="LOGIN.CREATE_ACCOUNT">Create an account</a></div><div class="text-center"><p class="marca">\n© HaibuSmart | Haibu Group</p></div></div></div></div>'),e.put("app/main/auth/register/register.html",'<div id="register" class="flex-scrollable" layout="column" ms-scroll><div id="register-form-wrapper" layout="column" \nlayout-align="center center"><div id="register-form"><div class="logo"><img \nsrc="assets/images/logos/marca-HaibuSmart.png" alt="logo"></div><form name="registerForm" novalidate \nng-submit="vm.register($event)"><md-input-container class="md-block" md-no-float><input name="firstName" \nng-model="vm.registerForm.firstName" placeholder="Nombre" maxlength="30" minlength="4" \nserver-validation="[\'length.min\',\'length.max\']" required><div ng-messages="registerForm.firstName.$error" role="alert">\n<div ng-message="required"><span>El nombre es requerido.</span></div><div ng-message="minlength"><span>\nEl nombre no puede tener menos de 4 caracteres.</span></div><div ng-message="maxlength"><span>\nEl nombre no puede tener mas de 30 caracteres.</span></div><div ng-message="length.man"><span>\nEl nombre no puede tener mas de 30 caracteres.</span></div><div ng-message="length.min"><span>\nEl nombre no puede tener menos de 4 caracteres.</span></div></div></md-input-container><md-input-container \nclass="md-block" md-no-float><input name="lastName" ng-model="vm.registerForm.lastName" placeholder="Apellido" \nmaxlength="30" minlength="4" server-validation="[\'length.min\',\'length.max\']" required><div \nng-messages="registerForm.lastName.$error" role="alert"><div ng-message="required"><span>El apellido es requerido\n</span></div><div ng-message="minlength"><span>El nombre no puede tener menos de 4 caracteres.</span></div><div \nng-message="maxlength"><span>El nombre no puede tener mas de 30 caracteres.</span></div><div ng-message="length.min">\n<span>El nombre no puede tener menos de 4 caracteres.</span></div><div ng-message="length.max"><span>\nEl nombre no puede tener mas de 30 caracteres.</span></div></div></md-input-container><md-input-container \nclass="md-block" md-no-float><input type="text" name="email" ng-model="vm.registerForm.email" placeholder="Correo" \nng-pattern="/^.+@.+\\..+$/" server-validation="[\'uniqueness\']" required><div ng-messages="registerForm.email.$error" \nrole="alert"><div ng-message="required"><span>El correo es requerido.</span></div><div ng-message="pattern"><span>\nDebe ser un correo valido.</span></div><div ng-message="uniqueness"><span>El correo ya se encuentra registrado.</span>\n</div></div></md-input-container><md-input-container class="md-block" md-no-float><input type="password" \nname="password" ng-model="vm.registerForm.password" placeholder="Contraseña" maxlength="30" minlength="8" required><div\n ng-messages="registerForm.password.$error" role="alert"><div ng-message="required"><span>La contraseña es requerida\n</span></div><div ng-message="minlength"><span>La contraseña no puede tener menos de 8 caracteres.</span></div><div \nng-message="maxlength"><span>La contraseña no puede tener mas de 30 caracteres.</span></div></div></md-input-container>\n<md-input-container class="md-block" md-no-float><input type="password" name="passwordConfirm" \nng-model="vm.registerForm.passwordConfirm" placeholder="Confirmar contraseña" \nng-pattern="{{vm.registerForm.password}}" required><div ng-messages="registerForm.passwordConfirm.$error" role="alert">\n<div ng-message="required"><span>La contraseña de confirmación es requerida</span></div><div ng-message="pattern">\n<span>Las contraseñas no son iguales</span></div></div></md-input-container><md-button type="submit" \nclass="md-raised md-accent submit-button" aria-label="Crear mi cuenta" \nng-disabled="registerForm.$invalid || registerForm.$pristine || vm.isLoading">Crear mi cuenta</md-button></form><div \nclass="login" layout="row" layout-xs="column" layout-align="space-between  center"><span class="text">\n¿Ya tienes una cuenta?</span> <a class="link" ui-sref="app.auth_login">Iniciar sesión</a></div><div \nclass="text-center"><p class="marca">© HaibuSmart | Haibu Group</p></div></div></div></div>'),
e.put("app/main/auth/reset/reset.html",'<div id="reset" class="flex-scrollable" layout="column" ms-scroll><div id="reset-form-wrapper" layout="column" \nlayout-align="center center"><div id="reset-form"><div class="logo"><img \nsrc="assets/images/logos/marca-HaibuSmart.png" alt="logo"></div><form name="resetForm" novalidate><md-input-container \nclass="md-block" md-no-float><input type="password" name="password" ng-model="vm.resetForm.password" \nplaceholder="Nueva contraseña" maxlength="30" minlength="8" server-validation="[\'AUTHORIZATION_REQUIRED\']" required>\n<div ng-messages="resetForm.password.$error" role="alert"><div ng-message="required"><span>La contraseña es requerida\n</span></div><div ng-message="minlength"><span>La contraseña no puede tener menos de 8 caracteres.</span></div><div \nng-message="maxlength"><span>La contraseña no puede tener mas de 30 caracteres.</span></div><div \nng-message="AUTHORIZATION_REQUIRED"><span>El token ya ha sido utilizado.</span></div></div></md-input-container>\n<md-input-container class="md-block" md-no-float><input type="password" name="passwordConfirm" \nng-model="vm.resetForm.passwordConfirm" placeholder="Confirmar contraseña" ng-pattern="{{vm.resetForm.password}}" \nrequired><div ng-messages="resetForm.passwordConfirm.$error" role="alert"><div ng-message="required"><span>\nLa contraseña de confirmación es requerida</span></div><div ng-message="pattern"><span>Las contraseñas no son iguales\n</span></div></div></md-input-container><md-button type="submit" class="md-raised md-accent submit-button" \naria-label="LOG IN" ng-click="vm.reset($event)" \nng-disabled="resetForm.$invalid || resetForm.$pristine || vm.isLoading">Reiniciar mi contraseña</md-button></form><div \nclass="login" layout="row" layout-xs="column" layout-align="space-between  center"><span class="text">\n¿Ya tienes una cuenta?</span> <a class="link" ui-sref="app.auth_login">Iniciar sesión</a></div><div \nclass="text-center"><p class="marca">© HaibuSmart | Haibu Group</p></div></div></div></div>'),e.put("app/main/pages/alerts/alerts.html",'<div id="alerts" class="page-layout simple fullwidth"><div class="header md-accent-bg" layout="row" \nlayout-align="space-between"><div layout="column" layout-align="center start"><div class="h1" layout="row" \nlayout-align="start center"><md-icon class="light" md-font-icon="icono-advertencia2-HaibuSmart"></md-icon><span>Alertas\n</span></div></div></div><div class="content"><div class="timeline-item" layout="column" layout-align="center center" \nlayout-gt-md="row" layout-align-gt-md="center start" ng-repeat="alert in vm.alerts | orderBy:\'-timestamp\'"><div \nclass="timeline-detail" flex="50"><div class="time"><span am-time-ago="alert.timestamp "></span></div></div><div \nclass="timeline-card" layout="row" flex="50"><md-card><md-card-content><h2>{{alert.title}}</h2><p>{{alert.event}}</p>\n</md-card-content></md-card></div></div></div></div>'),e.put("app/main/pages/home/home.html",'<div id="home"><div class="header md-primary-bg md-hue-2" layout="row" layout-align="space-between"><div \nlayout="column" layout-align="center start"><div class="h1" layout="row" layout-align="start center"><span \nclass="wellcome mr-8">Bienvenido</span><span class="text-bold">{{vm.user.firstName}} {{vm.user.lastName}}</span></div>\n</div><div layout="column" layout-align="center end" hide-xs><div class="time text-semi" layout="row">\n{{vm.time.now.hour}}:{{vm.time.now.minute}}:{{vm.time.now.second}}</div><div class="full-time text-semi" layout="row">\n{{vm.time.now.weekDay | capitalize}} {{vm.time.now.day}} de {{vm.time.now.month}} de {{vm.time.now.year}}</div></div>\n</div><div class="content"><div class="widget-group" layout="row" flex="100" layout-wrap><ms-widget flippable="false" \nlayout="column" flex="50" flex-gt-xs="25" flex-gt-md="25"><ms-widget-front class="white-bg"><div class="pt-8"><div \nclass="h3 text-center">Bateria</div></div><div class="gauge-color p-8 text-center" width="160" ng-radial-gauge \nranges="vm.device.gagueBAT.ranges" value="vm.device.gagueBAT.value" value-unit="vm.device.gagueBAT.unit" \nprecision="vm.device.gagueBAT.precision" lower-limit="vm.device.gagueBAT.lowerLimit" \nupper-limit="vm.device.gagueBAT.upperLimit" angle="90" needle-color="#0095F4" needle-value-text-size="30"></div><div \nclass="h4 text-center text-semi difference" layout="row" layout-align="center center"><div><md-icon \nng-if="vm.device.gagueBAT.diff>0" md-font-icon="icon-arrow-up"></md-icon><md-icon ng-if="vm.device.gagueBAT.diff<0" \nmd-font-icon="icon-arrow-down"></md-icon></div><div>\n{{vm.device.gagueBAT.diff?(vm.device.gagueBAT.diff| limitTo : 4 )+\'%\':\'\'}}</div></div><p class="h4 text-center mb-8">\n{{(vm.device.gagueBAT.timestamp | date :"short") ||"Sin información"}}</p></ms-widget-front></ms-widget><ms-widget \nflippable="false" layout="column" flex="50" flex-gt-xs="25" flex-gt-md="25"><ms-widget-front class="white-bg"><div \nclass="pt-8"><div class="h3 text-center">Carga Solar</div></div><div class="gauge-color p-8 text-center" width="160" \nng-radial-gauge ranges="vm.device.gagueCHR.ranges" value="vm.device.gagueCHR.value" \nvalue-unit="vm.device.gagueCHR.unit" precision="vm.device.gagueCHR.precision" \nlower-limit="vm.device.gagueCHR.lowerLimit" upper-limit="vm.device.gagueCHR.upperLimit" angle="90" \nneedle-color="#0095F4" needle-value-text-size="30"></div><div class="h4 text-center text-semi difference" layout="row" \nlayout-align="center center"><div><md-icon ng-if="vm.device.gagueCHR.diff>0" md-font-icon="icon-arrow-up"></md-icon>\n<md-icon ng-if="vm.device.gagueCHR.diff<0" md-font-icon="icon-arrow-down"></md-icon></div><div>\n{{vm.device.gagueCHR.diff?(vm.device.gagueCHR.diff| limitTo : 4 )+\'%\':\'\'}}</div></div><p class="h4 text-center mb-8">\n{{(vm.device.gagueCHR.timestamp | date :"short") ||"Sin información"}}</p></ms-widget-front></ms-widget><ms-widget \nflippable="false" layout="column" flex="100" flex-gt-xs="50" flex-gt-md="50"><ms-widget-front class="white-bg"><div \nclass="pt-8"><div class="h3 text-center">Acelerometro</div></div><div><nvd3 class="h-160 remove-x-lines line-chart" \noptions="vm.device.lineChartACC.options" data="vm.device.lineChartACC.data"></nvd3></div></ms-widget-front></ms-widget>\n</div><div class="widget-group" layout="row" flex="100" layout-wrap><ms-widget flippable="false" layout="column" \nflex="100" flex-gt-xs="50" flex-gt-md="50" class="h-340"><ms-widget-front class="white-bg"><div class="pt-8"><div \nclass="h3 text-center">Caudal del rio</div></div><div><nvd3 class="h-250 remove-x-lines line-chart" \noptions="vm.device.lineChart.options" data="vm.device.lineChart.data"></nvd3></div></ms-widget-front></ms-widget>\n<ms-widget flippable="false" layout="column" flex="100" flex-gt-xs="50" flex-gt-md="50" class="h-340"><ms-widget-front>\n<jk-carousel layout-fill flex data="vm.carousel.images" max-width="1200" max-height="800" \nfont-icon-left="icono-izquierda-HaibuSmart" font-icon-right="icono-derecha-HaibuSmart" \ncurrent-index="vm.carousel.currentIndex" auto-slide-time="3000" item-template-url="vm.carousel.templateUrl" \nauto-slide="vm.carouse.autoSlide"></jk-carousel></ms-widget-front></ms-widget></div></div></div>'),e.put("app/main/pages/home/slide-template.html",'<img layout-fill flex ng-src="{{slideItem.src}}">'),e.put("app/main/pages/profile/profile.html",'<div id="profile" class="page-layout simple fullwidth"><div class="content"><form name="profileForm" novalidate \nng-submit="vm.login()"><md-input-container class="md-block" md-no-float><input name="firstName" \nng-model="vm.profileForm.firstName" placeholder="Nombre" maxlength="30" minlength="4" \nserver-validation="[\'length.min\',\'length.max\']" required><div ng-messages="profileForm.firstName.$error" role="alert">\n<div ng-message="required"><span>El nombre es requerido.</span></div><div ng-message="minlength"><span>\nEl nombre no puede tener menos de 4 caracteres.</span></div><div ng-message="maxlength"><span>\nEl nombre no puede tener mas de 30 caracteres.</span></div><div ng-message="length.man"><span>\nEl nombre no puede tener mas de 30 caracteres.</span></div><div ng-message="length.min"><span>\nEl nombre no puede tener menos de 4 caracteres.</span></div></div></md-input-container><md-input-container \nclass="md-block" md-no-float><input name="lastName" ng-model="vm.profileForm.lastName" placeholder="Apellido" \nmaxlength="30" minlength="4" server-validation="[\'length.min\',\'length.max\']" required><div \nng-messages="profileForm.lastName.$error" role="alert"><div ng-message="required"><span>El apellido es requerido</span>\n</div><div ng-message="minlength"><span>El nombre no puede tener menos de 4 caracteres.</span></div><div \nng-message="maxlength"><span>El nombre no puede tener mas de 30 caracteres.</span></div><div ng-message="length.min">\n<span>El nombre no puede tener menos de 4 caracteres.</span></div><div ng-message="length.max"><span>\nEl nombre no puede tener mas de 30 caracteres.</span></div></div></md-input-container><md-input-container \nclass="md-block" md-no-float><input type="text" name="email" ng-model="vm.profileForm.email" placeholder="Correo" \nng-pattern="/^.+@.+\\..+$/" server-validation="[\'uniqueness\']" required><div ng-messages="profileForm.email.$error" \nrole="alert"><div ng-message="required"><span>El correo es requerido.</span></div><div ng-message="pattern"><span>\nDebe ser un correo valido.</span></div><div ng-message="uniqueness"><span>El correo ya se encuentra registrado.</span>\n</div></div></md-input-container><md-button type="submit" class="md-raised md-accent submit-button" \naria-label="Actualizar Datos" ng-click="vm.updateProfile($event)" \nng-disabled="profileForm.$invalid || profileForm.$pristine">Actualizar Datos</md-button></form><form name="passForm" \nnovalidate ng-submit="vm.login()"><md-input-container class="md-block" md-no-float><input type="password" \nname="oldPassword" ng-model="vm.passForm.oldPassword" placeholder="Contraseña Actual" \nserver-validation="[\'INVALID_PASSWORD\']" maxlength="30" minlength="8" required><div \nng-messages="passForm.oldPassword.$error" role="alert"><div ng-message="required"><span>\nLa contraseña actual es requerida</span></div><div ng-message="minlength"><span>\nLa contraseña no puede tener menos de 8 caracteres.</span></div><div ng-message="maxlength"><span>\nLa contraseña no puede tener mas de 30 caracteres.</span></div><div ng-message="INVALID_PASSWORD"><span>\nContraseña actual incorrecta.</span></div></div></md-input-container><md-input-container class="md-block" md-no-float>\n<input type="password" name="newPassword" ng-model="vm.passForm.newPassword" placeholder="Nueva contraseña" \nmaxlength="30" minlength="8" required><div ng-messages="passForm.newPassword.$error" role="alert"><div \nng-message="required"><span>La nueva contraseña es requerida</span></div><div ng-message="minlength"><span>\nLa nueva contraseña no puede tener menos de 8 caracteres.</span></div><div ng-message="maxlength"><span>\nLa nueva contraseña no puede tener mas de 30 caracteres.</span></div></div></md-input-container><md-input-container \nclass="md-block" md-no-float><input type="password" name="passwordConfirm" ng-model="vm.passForm.passwordConfirm" \nplaceholder="Confirmar contraseña" ng-pattern="{{vm.passForm.newPassword}}" required><div \nng-messages="passForm.passwordConfirm.$error" role="alert"><div ng-message="required"><span>\nLa contraseña de confirmación es requerida</span></div><div ng-message="pattern"><span>Las contraseñas no son iguales\n</span></div></div></md-input-container><md-button type="submit" class="md-raised md-accent submit-button" \naria-label="Actualizar" ng-click="vm.updatePassword($event)" \nng-disabled="passForm.$invalid || passForm.$pristine || vm.isLoading">Actualizar mi contraseña</md-button></form></div>\n</div>'),e.put("app/main/pages/reports/reports.html",'<div id="reports" class="page-layout simple fullwidth"><div class="header md-accent-bg" layout="row" \nlayout-align="space-between"><div layout="column" layout-align="center start"><div class="h1" layout="row" \nlayout-align="start center"><md-icon class="light" md-font-icon="icono-reporte2-HaibuSmart"></md-icon><span>Reportes\n</span></div></div><div layout="row" layout-align="start center"><md-button \nclass="md-raised md-secondary smart-button-outline" ng-click="vm.exportCvs($event)" filename="haibu-smart-reporte.csv">\n<span>Exportar XLSX</span></md-button></div></div><div class="content"><md-card><md-toolbar \nclass="md-table-toolbar md-default"><div class="md-toolbar-tools"><div class="select-device">Nodo {{vm.device.name}}\n</div><md-menu md-offset="0 48"><md-button class="md-icon-button device-selector" ng-click="$mdOpenMenu()" \naria-label="Select project" md-menu-origin md-menu-align-target><md-icon md-font-icon="icon-dots-horizontal"></md-icon>\n</md-button><md-menu-content width="3" class="md-background-bg"><md-menu-item ng-repeat="device in vm.devices">\n<md-button ng-click="vm.selectDevices(device)" aria-label="{{device.name}}"><span \nng-class="{\'secondary-text\': vm.device == device}">{{device.name}}</span></md-button></md-menu-item></md-menu-content>\n</md-menu></div></md-toolbar><md-table-container><table md-table md-row-select="vm.options.rowSelection" \nmultiple="{{vm.options.multiSelect}}" ng-model="vm.selected"><thead md-head md-order="vm.query.order" \nmd-on-reorder="vm.getAllSolicitudes"><tr md-row ng-if="vm.device.event.data"><th md-column>Fecha</th><th md-column \nng-repeat="data in vm.device.event.data">{{data.id | parseUnits:vm.sensors}}</th></tr></thead><tbody md-body>\n<md-progress-linear md-mode="indeterminate" ng-show="vm.isLoading" flex></md-progress-linear><tr md-row \nng-if="vm.device.event.data" ng-repeat="event in vm.reports"><td md-cell><span am-time-ago="event.timestamp"></span>\n</td><td md-cell ng-repeat="header in vm.device.event.data"><span \nng-repeat="data in event.data | filter:{id:header.id}:true">{{data.value}}{{data.id | parseUnits:vm.sensors:true}}\n</span></td></tr></tbody></table></md-table-container><md-table-pagination \nmd-label="{page: \'Página:\', rowsPerPage: \'Filas por página:\', of: \'de\'}" md-limit="vm.query.limit" \nmd-limit-options="[5, 10, 15]" md-page="vm.query.page" md-total="{{vm.total}}" md-page-select \nmd-on-paginate="vm.getEvents"></md-table-pagination></md-card></div></div>'),e.put("app/navigation/layouts/vertical-navigation/navigation.html",'<md-toolbar class="navigation-header" layout="row" layout-align="space-between center"><div class="logo" layout="row" \nlayout-align="center center"><img class="logo-image" src="assets/images/logos/marca-HaibuSmart.png" alt="logo"></div>\n<md-icon class="fold-toggle s18" md-font-icon="icon-backburger" hide show-gt-sm \nng-click="vm.toggleMsNavigationFolded()"></md-icon></md-toolbar><ms-navigation class="scrollable" folded="vm.folded" \nms-scroll="vm.msScrollOptions"></ms-navigation><div class="text-center footer"><img class="logo-marca" \nsrc="assets/images/logos/marca-Luxmeter-Energy.png" alt=""><p class="marca">© HaibuSmart | Haibu Group</p></div>'),e.put("app/toolbar/layouts/vertical-navigation/toolbar.html",'<div layout="row" layout-align="start center"><div layout="row" layout-align="start center" flex><md-button \nid="navigation-toggle" class="md-icon-button" ng-click="vm.toggleSidenav(\'navigation\')" hide-gt-sm \naria-label="Toggle navigation" translate translate-attr-aria-label="TOOLBAR.TOGGLE_NAVIGATION"><md-icon \nmd-font-icon="icon-menu" class="icon"></md-icon></md-button><ms-shortcuts></ms-shortcuts><div \nclass="toolbar-separator"></div><div class="pl-8" ng-if="weather" ng-if="weather"><div \nclass="h3 primary-text text-semi">Hoy <img class="icon-weather" \nng-src="assets/images/weather/icon{{weather.icon_code}}.png" alt="icon-weather"></div></div><div class="pr-8" \nng-if="weather"><div class="h3 primary-text">{{weather.temp}}&deg;C {{weather.phrase_32char}}</div></div><div \nclass="toolbar-separator-mini" ng-if="weather"></div><div class="pl-8" ng-if="weather"><img class="logo" \nsrc="assets/images/logos/The-Weather-Company-logo.svg" alt="logo"></div></div><div layout="row" \nlayout-align="start center"><md-progress-circular id="toolbar-progress" ng-disabled="!$root.loadingProgress" \nclass="md-accent" md-diameter="32"></md-progress-circular><div class="toolbar-separator"></div><md-menu-bar \nid="user-menu"><md-menu md-position-mode="left bottom"><md-button class="user-button" ng-click="$mdOpenMenu()" \naria-label="User settings" translate translate-attr-aria-label="TOOLBAR.USER_SETTINGS"><div layout="row" \nlayout-align="space-between center"><div class="avatar-wrapper"><img md-menu-align-target class="avatar" \nsrc="assets/images/avatars/profile.jpg"><md-icon md-font-icon ng-class="vm.userStatus.icon" \nng-style="{\'color\': vm.userStatus.color }" class="icon status s16"></md-icon></div><span class="username" hide \nshow-gt-sm>{{vm.customer.firstName}} {{vm.customer.lastName}}</span><md-icon md-font-icon="icon-chevron-down" \nclass="icon s16" hide-xs></md-icon></div></md-button><md-menu-content width="2"><md-menu-item class="md-indent" \nui-sref="app.pages.profile"><md-icon md-font-icon="icon-account" class="icon"></md-icon><md-button>Mi Perfil\n</md-button></md-menu-item><md-menu-divider></md-menu-divider><md-menu-item class="md-indent"><md-icon \nmd-font-icon="icon-logout" class="icon"></md-icon><md-button ng-click="vm.logout()">Salir</md-button></md-menu-item>\n</md-menu-content></md-menu></md-menu-bar><div class="toolbar-separator"></div></div></div>'),e.put("app/core/directives/ms-navigation/templates/horizontal.html",'<div class="navigation-toggle" hide-gt-sm><md-button class="md-icon-button" ng-click="vm.toggleHorizontalMobileMenu()" \naria-label="Toggle Mobile Navigation"><md-icon md-font-icon="icon-menu"></md-icon></md-button></div><ul \nclass="horizontal"><li ng-repeat="node in vm.navigation" ms-navigation-horizontal-node="node" \nng-class="{\'has-children\': vm.hasChildren}" ng-include="\'navigation-horizontal-nested.html\'"></li></ul><script \ntype="text/ng-template" id="navigation-horizontal-nested.html">\n<div ms-navigation-horizontal-item layout="row" ng-if="!vm.isHidden()">\n\n        <div class="ms-navigation-horizontal-button" ng-if="!node.uisref && node.title"\n             ng-class="{\'active md-accent-bg md-accent-fg\': vm.isActive}">\n            <i class="icon s18 {{node.icon}}" ng-if="node.icon"></i>\n            <span class="title" translate="{{node.translate}}" flex>{{node.title}}</span>\n            <span class="badge white-fg" style="background: {{node.badge.color}}" ng-if="node.badge">{{node.badge.content}}</span>\n            <i class="icon-chevron-right s18 arrow" ng-if="vm.hasChildren"></i>\n        </div>\n\n        <a class="ms-navigation-horizontal-button" ui-sref="{{node.uisref}}" ui-sref-active="active md-accent-bg"\n           ng-class="{\'active md-accent-bg md-accent-fg\': vm.isActive}"\n           ng-if="node.uisref && node.title">\n            <i class="icon s18 {{node.icon}}" ng-if="node.icon"></i>\n            <span class="title" translate="{{node.translate}}" flex>{{node.title}}</span>\n            <span class="badge white-fg" style="background: {{node.badge.color}}" ng-if="node.badge">{{node.badge.content}}</span>\n            <i class="icon-chevron-right s18 arrow" ng-if="vm.hasChildren"></i>\n        </a>\n\n    </div>\n\n    <ul ng-if="vm.hasChildren && !vm.isHidden()">\n        <li ng-repeat="node in node.children" ms-navigation-horizontal-node="node"\n            ng-class="{\'has-children\': vm.hasChildren}"\n            ng-include="\'navigation-horizontal-nested.html\'"></li>\n    </ul>\n</script>'),e.put("app/core/directives/ms-navigation/templates/vertical.html",'<ul><li ng-repeat="node in vm.navigation" ms-navigation-node="node" \nng-class="{\'collapsed\': vm.collapsed, \'has-children\': vm.hasChildren}" ng-include="\'navigation-nested.html\'"></li></ul>\n<script type="text/ng-template" id="navigation-nested.html">\n<div ms-navigation-item layout="row" ng-if="!vm.isHidden()">\n\n        <div class="ms-navigation-button" ng-if="!node.uisref && node.title">\n            <i class="icon s24 {{node.icon}}" ng-if="node.icon"></i>\n            <span class="title" translate="{{node.translate}}" flex>{{node.title}}</span>\n            <span class="badge white-fg" ng-style="{\'background\': node.badge.color}" ng-if="node.badge">{{node.badge.content}}</span>\n            <i class="icon-chevron-right s16 arrow" ng-if="vm.collapsable && vm.hasChildren"></i>\n        </div>\n\n        <a class="ms-navigation-button" ui-sref="{{node.uisref}}" ui-sref-active="active md-accent-bg"\n           ng-if="node.uisref && node.title">\n            <i class="icon s24 {{node.icon}}" ng-if="node.icon"></i>\n            <span class="title" translate="{{node.translate}}" flex>{{node.title}}</span>\n            <span class="badge white-fg" ng-style="{\'background\': node.badge.color}" ng-if="node.badge">{{node.badge.content}}</span>\n            <i class="icon-chevron-right s16 arrow" ng-if="vm.collapsable && vm.hasChildren"></i>\n        </a>\n\n\n\n    </div>\n\n\n    <ul ng-if="vm.hasChildren && !vm.isHidden()">\n        <li ng-repeat="node in node.children" ms-navigation-node="node"\n            ng-class="{\'collapsed\': vm.collapsed, \'has-children\': vm.hasChildren}"\n            ng-include="\'navigation-nested.html\'"></li>\n    </ul>\n</script>'),e.put("app/main/pages/help/help-config/help-config.html",'<div id="help-config" class="page-layout simple tabbed"><div class="header md-accent-bg" layout="row" \nlayout-align="space-between"><div layout="column" layout-align="center start"><div class="h1" layout="row" \nlayout-align="start center"><md-icon class="light" md-font-icon="icono-informacion2-HaibuSmart"></md-icon><span>\nConfiguraciones</span></div></div></div><div class="content" layout="column"><md-tabs md-dynamic-height><md-tab \nlabel="Configuracion con MQTT"><div class="card md-whiteframe-4dp" layout="column"><div layout="column"><div \nclass="h3 primary-text">MQTT</div><p>\nEs un protocolo de transporte de mensajería tipo Cliente Servidor de publicación y subscripción. Es utilizado por los nodos para comunicarse con la nube Iot. Se trata de un protocolo creado especialmente para su uso en el IoT, ya que su flujo de datos está optimizado para la reducción del tráfico de la red.\n</p><p>\nUtiliza un patrón de envío y suscripción de mensajes que provee una distribución de mensajes de uno a muchos y una separación de las aplicaciones. Su objetivo es ofrecer un servicio de publicación/suscripción a fuentes de datos de forma muy sencilla y pensada en implementaciones ligeras donde el HTTP y los servicios web resultan muy pesados.\n</p></div></div><div class="card md-whiteframe-4dp" layout="column"><div layout="column"><div class="h3 primary-text">\nPara la conexión mediante MQTT de un dispositivo dentro de la nube puede utilizar uno de los tres siguientes puertos:\n</div><p><span class="text-bold">Puerto 1883</span>\n: Se envían los datos de manera no segura. La información del dispositivo y las credenciales de autenticación se envía en texto plano.\n</p><p><span class="text-bold">Puerto 8883</span>\n: Se envían los datos de manera segura. La conexión se encripta con TLS v1.2.</p><p><span class="text-bold">Puerto 443\n</span>: Puerto que se utiliza para WebSockets. La conexión es segura gracias a la encriptación de la conexión.</p>\n</div></div><div class="card md-whiteframe-4dp" layout="column"><div layout="column"><div class="h3 primary-text">\nIdentificador del cliente MQTT</div><p>\nCada nodo debe de autenticarse utilizando un ID de cliente en el siguiente formato</p><div class="source-code" \nlayout="column"><div class="h3">d:org_id:type_id:device_id</div></div><div><p><span class="text-bold">d</span>\n: Identifica que el cliente es un nodo.</p><p><span class="text-bold">org_id</span>\n: Representa la id de la organización. En este caso es <span class="text-bold">w6ucey</span></p><p><span \nclass="text-bold">type_id</span>: es el identificador del tipo de nodo que se conecta.</p><p><span class="text-bold">\ndevice_id</span>: el id del nodo que diferencia al nodo entre todos los nodos.</p></div><div class="source-code" \nlayout="column"><div class="h3">Ejemplo: d:w6ucey:SmartParking:23232-2323-23</div></div></div></div><div \nclass="card md-whiteframe-4dp" layout="column"><div layout="column"><div class="h3 primary-text">Autenticación</div><p>\nCada nodo debe de autenticarse utilizando un ID de cliente en el siguiente formato</p><div><p><span class="text-bold">\nNombre del usuario</span>: el nombre de usuario es “use-token-auth”.</p><p><span class="text-bold">\nClave de autentificación</span>: se utiliza la calve de autentificación creada al registrar un nodo</p></div></div>\n</div><div class="card md-whiteframe-4dp" layout="column"><div layout="column"><div class="h3 primary-text">\nEnvió de mensajes</div><p>\nPara que el dispositivo pueda enviar los mensajes a la nube, el cliente debe enviar los mensajes al siguiente topico.\n</p><div class="source-code" layout="column"><div class="h3">iot-2/evt/up/fmt/json</div></div></div></div><div \nclass="card md-whiteframe-4dp" layout="column"><div layout="column"><div class="h3 primary-text">\nFormato de los mensajes</div><p>\nTodos los mensajes son enviados en formato JSON. Estos mensajes se deben enviar con el siguiente formato.</p><div \nclass="source-code" layout="column"><div class="h3">{"d" :{ "id_variable": "valor", "id_variable2": "valor2" } }</div>\n</div></div></div></md-tab><md-tab label="Configuracion con HTTP 1.1"><div class="card md-whiteframe-4dp" \nlayout="column"><div layout="column"><div class="h3 primary-text">HTTP(S)</div><p>\nEs otra opción para poder conectar los nodos a la nube, el envío de eventos se hace mediante una API. Mediante el uso de la API los nodos pueden hacer diferentes peticiones, pero siempre utilizando cabeceras de autorización en los mensajes. En estas cabeceras deben contener las credenciales que autentifiquen al nodo. Además en la petición HTTP se debe especificar el tipo de contenido del mensaje, en este caso siempre serán cabeceras del tipo Application/json.\n</p><p>\nPor otro lado, no se debe de olvidar que este protocolo no está creado especialmente para el IoT, por lo que su consumo de batería al enviar los mensajes y el tamaño de los paquetes es bastante elevado, por lo cual siempre se recomienda conectar los nodos con el protocolo MQTT para así aprovechar los beneficios de este.\n</p></div></div><div class="card md-whiteframe-4dp" layout="column"><div layout="column"><div class="h3 primary-text">\nAPI Rest</div><p>\nPara que el dispositivo pueda enviar los mensajes a la plataforma se debe hacer una solicitud POST el endpoint con el siguiente formato:\n</p><div class="source-code" layout="column"><div class="h3">\nhttps://org_id.messaging.internetofthings.ibmcloud.com/api/v0002/device/types/type_id/devices/device_id/events/up</div>\n</div><div><p><span class="text-bold">org_id</span>: Representa la id de la organización. En este caso es <span \nclass="text-bold">w6ucey</span></p><p><span class="text-bold">type_id</span>\n: es el identificador del tipo de nodo que se conecta.</p><p><span class="text-bold">device_id</span>\n: el id del nodo que diferencia al nodo entre todos los nodos.</p></div></div></div><div \nclass="card md-whiteframe-4dp" layout="column"><div layout="column"><div class="h3 primary-text">Autenticación</div><p>\nTodas las solicitudes deben incluir una cabecera de autorización. La autenticación básica es el único método que se admite. Cuando un dispositivo realiza una solicitud HTTP a través de la API REST, serán necesarias las siguientes credenciales:\n</p><div><p><span class="text-bold">Nombre del usuario</span>: el nombre de usuario es “use-token-auth”.</p><p><span \nclass="text-bold">Clave de autentificación</span>: se utiliza la calve de autentificación creada al registrar un nodo\n</p></div></div></div><div class="card md-whiteframe-4dp" layout="column"><div layout="column"><div \nclass="h3 primary-text">Formato de los mensajes</div><p>\nTodos los mensajes son enviados en formato JSON. Estos mensajes se deben enviar con el siguiente formato.</p><div \nclass="source-code" layout="column"><div class="h3">{"d" :{ "id_variable": "valor", "id_variable2": "valor2" } }</div>\n</div></div></div></md-tab><md-tab label="Configuracion con HTTP 1.0"><div class="card md-whiteframe-4dp" \nlayout="column"><div layout="column"><div class="h3 primary-text">HTTP</div><p>\nEs la opción menos recomendada y se ocupa cuando el nodo no tiene la capacidad de hacer peticiones en el estándar 1.1, el envío de eventos se hace mediante una API. Mediante el uso de la API los nodos pueden hacer diferentes peticiones.\n</p></div></div><div class="card md-whiteframe-4dp" layout="column"><div layout="column"><div class="h3 primary-text">\nAPI Rest</div><p>\nPara que el dispositivo pueda enviar los mensajes a la plataforma se debe hacer una solicitud GET el endpoint con el siguiente formato:\n</p><div class="source-code" layout="column"><div class="h3">\nhttps://middleware-haibu-smart.mybluemix.net/v1/type_id/device_id/up</div></div><div><p><span class="text-bold">type_id\n</span>: es el identificador del tipo de nodo que se conecta.</p><p><span class="text-bold">device_id</span>\n: el id del nodo que diferencia al nodo entre todos los nodos.</p></div></div></div><div \nclass="card md-whiteframe-4dp" layout="column"><div layout="column"><div class="h3 primary-text">\nFormato de los mensajes</div><p>Todos los mensajes son como parametros en el endpoint.</p><div class="source-code" \nlayout="column"><div class="h3">?id_variable=valor&id_variable2=valor2</div></div></div></div></md-tab></md-tabs></div>\n</div>'),e.put("app/main/pages/help/help-units/help-units.html",'<div id="help-units" class="page-layout simple fullwidth"><div class="header md-accent-bg" layout="row" \nlayout-align="space-between"><div layout="column" layout-align="center start"><div class="h1" layout="row" \nlayout-align="start center"><md-icon class="light" md-font-icon="icono-informacion2-HaibuSmart"></md-icon><span>\nTabla de sensores</span></div></div></div><div class="content" scroll><md-card><md-toolbar \nclass="md-table-toolbar md-default"><div class="md-toolbar-tools"><md-icon md-font-icon="icon-magnify"></md-icon><form \nflex name="vm.filter.form"><input type="text" ng-model="vm.query.filter" placeholder="Buscar"></form></div>\n</md-toolbar><md-table-container><table md-table md-row-select="vm.options.rowSelection" \nmultiple="{{vm.options.multiSelect}}" ng-model="vm.selected"><thead md-head><tr md-row><th md-column>Sensor</th><th \nmd-column>Nombre</th><th md-column>Unidad de medida</th></tr></thead><tbody md-body><tr md-row \nng-repeat="sensor in vm.sensors | filter:vm.query.filter | limitTo: vm.query.limit: (vm.query.page - 1) * vm.query.limit">\n<td md-cell>{{sensor.id}}</td><td md-cell>{{sensor.name}}</td><td md-cell>{{sensor.symbol}}</td></tr></tbody></table>\n</md-table-container><md-table-pagination md-label="{page: \'Página:\', rowsPerPage: \'Filas por página:\', of: \'de\'}" \nmd-limit="vm.query.limit" md-limit-options="[5, 10, 15]" md-page="vm.query.page" md-total="{{vm.sensors.length}}" \nmd-page-select md-on-paginate="vm.getEvents"></md-table-pagination></md-card></div></div>'),e.put("app/main/pages/nodes/nodes-create/nodes-create.html",'<div id="nodes-create" class="page-layout simple fullwidth"><div class="header md-accent-bg" layout="row" \nlayout-align="space-between"><div layout="column" layout-align="center start"><div class="h1" layout="row" \nlayout-align="start center"><md-icon class="light" md-font-icon="icono-sensor2-HaibuSmart"></md-icon><span>\nRegistrar Nodo</span></div></div></div><div class="content"><ms-form-wizard flex><md-tabs md-dynamic-height \nmd-selected="msWizard.selectedIndex" md-center-tabs="true"><md-tab><md-tab-label><span \nclass="ms-form-wizard-step-label"><span class="ms-form-wizard-step-number md-accent-bg" ng-if="wizardStep1.$invalid">1\n</span> <span class="ms-form-wizard-step-number md-accent-bg" ng-if="wizardStep1.$valid"><i class="icon-check s16"></i>\n </span><span class="ms-form-wizard-step-text">Tipo de nodo</span></span></md-tab-label><md-tab-body><form \nname="wizardStep1" class="md-inline-form" ms-form-wizard-form novalidate><p>Seleccione el tipo de nodo .</p>\n<md-input-container class="md-block"><label>Tipo de nodo</label><md-select name="typeId" \nng-model="vm.registerForm.typeId" required><md-option ng-repeat="types in  vm.devicetypes" value="{{types.id}}">\n{{types.id}}</md-option></md-select><div ng-messages="wizardStep1.typeId.$error" role="alert"><div \nng-message="required"><span>El tipo de nodo es requerido.</span></div></div></md-input-container></form></md-tab-body>\n</md-tab><md-tab ng-disabled="wizardStep1.$invalid"><md-tab-label><span class="ms-form-wizard-step-label"><span \nclass="ms-form-wizard-step-number md-accent-bg" ng-if="wizardStep2.$invalid">2</span> <span \nclass="ms-form-wizard-step-number md-accent-bg" ng-if="wizardStep2.$valid"><i class="icon-check s16"></i> </span><span \nclass="ms-form-wizard-step-text">Información</span></span></md-tab-label><md-tab-body><form name="wizardStep2" \nms-form-wizard-form novalidate><div class="form-title"></div><p>El <span class="text-bold">Nombre del nodo</span>\n es la única información necesaria</p><div layout="column" layout-gt-xs="row" flex><md-input-container flex="100" \nflex-gt-xs="50"><input type="text" name="name" ng-model="vm.registerForm.name" \nng-pattern="/^[A-Za-z0-9\\-\\_\\.\\s]{1,36}$/" maxlength="36" placeholder="Nombre del nodo" required><div \nng-messages="wizardStep2.name.$error" role="alert"><div ng-message="required"><span>\nDebe especificar el nombre para su nodo.</span></div><div ng-message="maxlength"><span>\nEl nombre del nodo no puede tener mas de 36 caracteres.</span></div></div></md-input-container><md-input-container \nflex="100" flex-gt-xs="50"><input type="text" name="manufacturer" ng-model="vm.registerForm.deviceInfo.manufacturer" \nng-pattern="/^[A-Za-z0-9\\-\\_\\.]{1,36}$/" maxlength="80" placeholder="Fabricante"><div \nng-messages="wizardStep2.manufacturer.$error" role="alert"><div ng-message="maxlength"><span>\nEl fabricante no puede tener mas de 80 caracteres.</span></div></div></md-input-container></div><div layout="column" \nlayout-gt-xs="row" flex><md-input-container flex="100" flex-gt-xs="50"><input type="text" name="serialNumber" \nng-model="vm.registerForm.deviceInfo.serialNumber" ng-pattern="/^[A-Za-z0-9\\-\\_\\.]{1,36}$/" maxlength="80" \nplaceholder="Número de serie"><div ng-messages="wizardStep2.serialNumber.$error" role="alert"><div \nng-message="maxlength"><span>El número de serie no puede tener mas de 80 caracteres.</span></div></div>\n</md-input-container><md-input-container md-input-container flex="100" flex-gt-xs="50"><input type="text" name="model" \nng-model="vm.registerForm.deviceInfo.model" ng-pattern="/^[A-Za-z0-9\\-\\_\\.]{1,36}$/" maxlength="80" \nplaceholder="Modelo"><div ng-messages="wizardStep2.model.$error" role="alert"><div ng-message="maxlength"><span>\nEl modelo no puede tener mas de 80 caracteres.</span></div></div></md-input-container></div><div layout="column" \nlayout-gt-xs="row" flex><md-input-container flex="100" flex-gt-xs="50"><input type="text" name="deviceClass" \nng-model="vm.registerForm.deviceInfo.deviceClass" ng-pattern="/^[A-Za-z0-9\\-\\_\\.]{1,36}$/" maxlength="80" \nplaceholder="Clase"><div ng-messages="wizardStep2.deviceClass.$error" role="alert"><div ng-message="maxlength"><span>\nLa clase no puede tener mas de 80 caracteres.</span></div></div></md-input-container><md-input-container \nmd-input-container flex="100" flex-gt-xs="50"><input type="text" name="description" \nng-model="vm.registerForm.deviceInfo.description" ng-pattern="/^[A-Za-z0-9\\-\\_\\.]{1,36}$/" maxlength="80" \nplaceholder="Descripción"><div ng-messages="wizardStep2.description.$error" role="alert"><div ng-message="maxlength">\n<span>La descripción no puede tener mas de 80 caracteres.</span></div></div></md-input-container></div><div \nlayout="column" layout-gt-xs="row" flex><md-input-container flex="100" flex-gt-xs="50"><input type="text" \nname="fwVersion" ng-model="vm.registerForm.deviceInfo.fwVersion" ng-pattern="/^[A-Za-z0-9\\-\\_\\.]{1,36}$/" \nmaxlength="80" placeholder="Versión de firmware"><div ng-messages="wizardStep2.fwVersion.$error" role="alert"><div \nng-message="maxlength"><span>La versión de firmware no puede tener mas de 80 caracteres.</span></div></div>\n</md-input-container><md-input-container md-input-container flex="100" flex-gt-xs="50"><input type="text" \nname="hwVersion" ng-model="vm.registerForm.deviceInfo.hwVersion" ng-pattern="/^[A-Za-z0-9\\-\\_\\.]{1,36}$/" \nmaxlength="80" placeholder="Versión de hardware"><div ng-messages="wizardStep2.hwVersion.$error" role="alert"><div \nng-message="maxlength"><span>La versión de hardware no puede tener mas de 80 caracteres.</span></div></div>\n</md-input-container></div></form></md-tab-body></md-tab><md-tab \nng-disabled="wizardStep1.$invalid || wizardStep2.$invalid"><md-tab-label><span class="ms-form-wizard-step-label"><span \nclass="ms-form-wizard-step-number md-accent-bg" ng-if="wizardStep3.$invalid">3</span> <span \nclass="ms-form-wizard-step-number md-accent-bg" ng-if="wizardStep3.$valid"><i class="icon-check s16"></i> </span><span \nclass="ms-form-wizard-step-text">Seguridad</span></span></md-tab-label><md-tab-body><form name="wizardStep3" \nms-form-wizard-form novalidate><p>\nTiene dos opciones; la señal de autenticación generada automáticamente y la señal de autenticación proporcionada.</p>\n<md-input-container class="md-block"><input type="text" name="authToken" ng-model="vm.registerForm.authToken" \nng-pattern="/^[A-Za-z0-9\\-\\_\\.\\?\\@\\+\\*\\!\\&\\(\\)]*$/" maxlength="36" minlength="8" \nplaceholder="Señal de autenticación (opcional)"><div ng-messages="wizardStep3.authToken.$error" role="alert"><div \nng-message="pattern">\nLa señal de autenticación puede contener solo caracteres alfanuméricos y los siguientes caracteres especiales: guión ( - ), guión bajo ( _ ), punto de exclamación ( ! ), ampersand ( & ), arroba ( @ ), signo de interrogación ( ? ), asterisco ( * ), signo más ( + ), punto ( . ) o los paréntesis izquierdo y derecho.\n</div><div ng-message="minlength"><span>La señal de autenticación debe tener como mínimo 8 caracteres de longitud.\n</span></div><div ng-message="maxlength"><span>\nLa señal de autenticación debe tener como máximo 36 caracteres de longitud.</span></div></div></md-input-container>\n</form></md-tab-body></md-tab><md-tab \nng-disabled="wizardStep1.$invalid || wizardStep2.$invalid || wizardStep3.$invalid"><md-tab-label><span \nclass="ms-form-wizard-step-label"><span class="ms-form-wizard-step-number md-accent-bg" ng-if="wizardStep4.$invalid">4\n</span> <span class="ms-form-wizard-step-number md-accent-bg" ng-if="wizardStep4.$valid"><i class="icon-check s16"></i>\n </span><span class="ms-form-wizard-step-text">Geolocalización</span></span></md-tab-label><md-tab-body><form \nname="wizardStep4" ms-form-wizard-form novalidate><div class="form-title">Seleccione la geolocalización de su nodo.\n</div><md-input-container class="md-block"><ui-gmap-google-map options="vm.map.options" center="vm.map.center" \nzoom="vm.map.zoom"><ui-gmap-marker coords="vm.map.center" options="vm.options" idkey="1"></ui-gmap-marker>\n</ui-gmap-google-map></md-input-container></form></md-tab-body></md-tab><md-tab \nng-disabled="wizardStep1.$invalid || wizardStep2.$invalid || wizardStep3.$invalid || wizardStep4.$invalid">\n<md-tab-label><span class="ms-form-wizard-step-label"><span class="ms-form-wizard-step-number md-accent-bg" \nng-if="wizardStep5.$invalid">5</span> <span class="ms-form-wizard-step-number md-accent-bg" ng-if="wizardStep5.$valid">\n<i class="icon-check s16"></i> </span><span class="ms-form-wizard-step-text">Resumen</span></span></md-tab-label>\n<md-tab-body><form name="wizardStep5" ms-form-wizard-form novalidate><p>\nCompruebe que toda la información enviada para este nodo es correcta antes de añadirlo.</p><div \nclass="preview layout-align-center-stretch layout-column" flex><div class="md-caption mb-8">Tipo de nodo</div>\n{{vm.registerForm.typeId}}</div><div class="preview layout-align-center-stretch layout-column" flex><div \nclass="md-caption mb-8">Nombre del nodo</div>{{vm.registerForm.name}}</div><div \nclass="preview layout-align-center-stretch layout-column" flex><div class="md-caption mb-8">Señal de autenticación\n</div>{{vm.registerForm.authToken || "Se generará"}}</div><div \nclass="preview layout-align-center-stretch layout-column" flex><div class="md-caption mb-8">Geolocalización</div>\nLatitud: {{vm.map.center.latitude}}<br>Longitud: {{vm.map.center.longitude}}</div></form></md-tab-body></md-tab>\n</md-tabs><div class="navigation" flex layout="row" layout-align="center center"><md-button \nclass="md-raised md-accent" ng-click="msWizard.previousStep()" ng-disabled="msWizard.isFirstStep()">Atrás</md-button>\n<div class="steps"><span ng-repeat="form in msWizard.forms" \nng-class="{\'selected md-accent-bg\':msWizard.selectedIndex === $index}"></span></div><md-button \nclass="md-raised md-accent" ng-click="msWizard.nextStep()" ng-hide="msWizard.isLastStep()" \nng-disabled="msWizard.currentStepInvalid()">Siguiente</md-button><md-button class="md-raised md-accent" \nng-click="vm.sendForm($event)" ng-show="msWizard.isLastStep()" ng-disabled="msWizard.formsIncomplete()">Registrar\n</md-button></div></ms-form-wizard></div></div>'),
e.put("app/main/pages/nodes/nodes-list/nodes-create.html",'<md-dialog class="nodes-create"><md-toolbar class="md-accent" layout="column"><div class="md-toolbar-tools" \nlayout="row" layout-align="space-between center"><span class="title">{{vm.title}}</span><md-button \nclass="md-icon-button" ng-click="vm.cancel()" aria-label="Close dialog"><md-icon md-font-icon="icon-close"></md-icon>\n</md-button></div></md-toolbar><md-dialog-content><ms-form-wizard flex><md-tabs md-dynamic-height \nmd-selected="msWizard.selectedIndex" md-center-tabs="true"><md-tab><md-tab-label><span \nclass="ms-form-wizard-step-label"><span class="ms-form-wizard-step-number md-accent-bg" ng-if="wizardStep1.$invalid">1\n</span> <span class="ms-form-wizard-step-number md-accent-bg" ng-if="wizardStep1.$valid">1 </span><span \nclass="ms-form-wizard-step-text">Tipo</span></span></md-tab-label><md-tab-body><form name="wizardStep1" \nclass="md-inline-form" ms-form-wizard-form novalidate><p class="text-bold">1. Id del nodo.</p><div layout="column">\n<md-input-container flex="100"><label>Seleccione el tipo de nodo</label><input name="typeId" \nng-pattern="/^[A-Za-z0-9\\-\\_\\.\\s]{1,36}$/" maxlength="36" minlength="1" placeholder="Tipo de nodo" \nng-model="vm.device.typeId" required ng-disabled="!vm.newDevice"><div ng-messages="wizardStep1.typeId.$error" \nrole="alert"><div ng-message="required"><span>Debe especificar la tipo del nodo.</span></div><div \nng-message="minlength"><span>El tipo del nodo no puede tener menos de 1 caracteres.</span></div><div \nng-message="maxlength"><span>El tipo del nodo no puede tener más de 36 caracteres.</span></div></div>\n</md-input-container></div></form></md-tab-body></md-tab><md-tab ng-disabled="wizardStep1.$invalid"><md-tab-label><span\n class="ms-form-wizard-step-label"><span class="ms-form-wizard-step-number md-accent-bg" ng-if="wizardStep2.$invalid">2\n</span> <span class="ms-form-wizard-step-number md-accent-bg" ng-if="wizardStep2.$valid">2 </span><span \nclass="ms-form-wizard-step-text">Información</span></span></md-tab-label><md-tab-body><form name="wizardStep2" \nms-form-wizard-form novalidate><div class="form-title"></div><p class="text-bold">2. Información.</p><div \nlayout="column" layout-gt-xs="row" flex><md-input-container flex="100" flex-gt-xs="50"><input type="text" name="name" \nng-model=" vm.device.name" ng-pattern="/^[A-Za-z0-9\\-\\_\\.\\s]{1,36}$/" maxlength="36" placeholder="Nombre del nodo" \nrequired><div ng-messages="wizardStep2.name.$error" role="alert"><div ng-message="required"><span>\nDebe especificar el nombre para su nodo.</span></div><div ng-message="maxlength"><span>\nEl nombre del nodo no puede tener mas de 36 caracteres.</span></div></div></md-input-container><md-input-container \nflex="100" flex-gt-xs="50"><input type="text" name="manufacturer" ng-model=" vm.device.deviceInfo.manufacturer" \nng-pattern="/^[A-Za-z0-9\\-\\_\\.]{1,36}$/" maxlength="80" placeholder="Fabricante"><div \nng-messages="wizardStep2.manufacturer.$error" role="alert"><div ng-message="maxlength"><span>\nEl fabricante no puede tener mas de 80 caracteres.</span></div></div></md-input-container></div><div layout="column" \nlayout-gt-xs="row" flex><md-input-container flex="100" flex-gt-xs="50"><input type="text" name="serialNumber" \nng-model=" vm.device.deviceInfo.serialNumber" ng-pattern="/^[A-Za-z0-9\\-\\_\\.]{1,36}$/" maxlength="80" \nplaceholder="Número de serie"><div ng-messages="wizardStep2.serialNumber.$error" role="alert"><div \nng-message="maxlength"><span>El número de serie no puede tener mas de 80 caracteres.</span></div></div>\n</md-input-container><md-input-container md-input-container flex="100" flex-gt-xs="50"><input type="text" name="model" \nng-model=" vm.device.deviceInfo.model" ng-pattern="/^[A-Za-z0-9\\-\\_\\.]{1,36}$/" maxlength="80" placeholder="Modelo">\n<div ng-messages="wizardStep2.model.$error" role="alert"><div ng-message="maxlength"><span>\nEl modelo no puede tener mas de 80 caracteres.</span></div></div></md-input-container></div></form></md-tab-body>\n</md-tab><md-tab ng-if="vm.newDevice" ng-disabled="wizardStep1.$invalid || wizardStep2.$invalid"><md-tab-label><span \nclass="ms-form-wizard-step-label"><span class="ms-form-wizard-step-number md-accent-bg" ng-if="wizardStep3.$invalid">3\n</span> <span class="ms-form-wizard-step-number md-accent-bg" ng-if="wizardStep3.$valid">3 </span><span \nclass="ms-form-wizard-step-text">Seguridad</span></span></md-tab-label><md-tab-body><form name="wizardStep3" \nms-form-wizard-form novalidate><p class="text-bold">3. Seguridad.</p><div class="h4 text-bold">\nTiene dos opciones; la señal de autenticación generada automáticamente y la señal de autenticación generada.</div>\n<md-input-container class="md-block"><input type="text" name="authToken" ng-model=" vm.device.authToken" \nng-pattern="/^[A-Za-z0-9\\-\\_\\.\\?\\@\\+\\*\\!\\&\\(\\)]*$/" maxlength="36" minlength="8" \nplaceholder="Autenticación automática o generada"><div ng-messages="wizardStep3.authToken.$error" role="alert"><div \nng-message="pattern">\nLa autenticación puede contener solo caracteres alfanuméricos y los siguientes caracteres especiales: guión ( - ), guión bajo ( _ ), punto de exclamación ( ! ), ampersand ( & ), arroba ( @ ), signo de interrogación ( ? ), asterisco ( * ), signo más ( + ), punto ( . ) o los paréntesis izquierdo y derecho.\n</div><div ng-message="minlength"><span>La señal de autenticación debe tener como mínimo 8 caracteres de longitud.\n</span></div><div ng-message="maxlength"><span>\nLa señal de autenticación debe tener como máximo 36 caracteres de longitud.</span></div></div></md-input-container>\n</form></md-tab-body></md-tab><md-tab \nng-disabled="wizardStep1.$invalid || wizardStep2.$invalid || wizardStep3.$invalid"><md-tab-label><span \nclass="ms-form-wizard-step-label"><span class="ms-form-wizard-step-number md-accent-bg" ng-if="wizardStep4.$invalid">\n{{vm.newDevice?"4":"3"}}</span> <span class="ms-form-wizard-step-number md-accent-bg" ng-if="wizardStep4.$valid">\n{{vm.newDevice?"4":"3"}} </span><span class="ms-form-wizard-step-text">Geolocalización</span></span></md-tab-label>\n<md-tab-body><form name="wizardStep4" ms-form-wizard-form novalidate><p class="text-bold">\n{{vm.newDevice?"4":"3"}}. Geolocalización.</p><div class="h4 text-bold">\nSeleccione la geolocalicación de su nodo, puede posicionar el marker con doble click o arrastrandolo a su posición.\n</div><script type="text/ng-template" id="searchbox.tpl.html">\n<input class="searchbox "type="text"  \n                                       	placeholder="Ubicación"\n                                       >\n</script><md-input-container class="md-block"><div class="searchbox-container" id="searchbox-container"></div>\n<ui-gmap-google-map options="vm.map.options" center="vm.map.center" zoom="vm.map.zoom" events="vm.map.events">\n<ui-gmap-search-box ng-if="vm.searchbox.events" template="vm.searchbox.template" events="vm.searchbox.events" \nparentdiv="\'searchbox-container\'"></ui-gmap-search-box><ui-gmap-marker coords="vm.device.location" \noptions="vm.marker.options" idkey="1"></ui-gmap-marker></ui-gmap-google-map></md-input-container></form></md-tab-body>\n</md-tab><md-tab \nng-disabled="wizardStep1.$invalid || wizardStep2.$invalid || wizardStep3.$invalid || wizardStep4.$invalid">\n<md-tab-label><span class="ms-form-wizard-step-label"><span class="ms-form-wizard-step-number md-accent-bg" \nng-if="wizardStep5.$invalid">{{vm.newDevice?"5":"4"}}</span> <span class="ms-form-wizard-step-number md-accent-bg" \nng-if="wizardStep5.$valid">{{vm.newDevice?"5":"4"}} </span><span class="ms-form-wizard-step-text">Resumen</span></span>\n</md-tab-label><md-tab-body><form name="wizardStep5" ms-form-wizard-form novalidate><p>\n{{vm.newDevice?"5":"4"}}. Compruebe que toda la información para este nodo está correcta antes de {{vm.newDevice?"añadirlo":"actualizarlo"}}.\n</p><div class="mb-8" flex><div class="text-bold">Id del nodo</div><div class="h4">{{ vm.device.deviceId}}</div></div>\n<div class="mb-8" flex><div class="text-bold">Tipo de nodo</div><div class="h4">{{ vm.device.typeId}}</div></div><div \nclass="mb-8" flex><div class="text-bold">Nombre del nodo</div><div class="h4">{{ vm.device.name}}</div></div><div \nclass="mb-8" flex ng-if=" vm.device.deviceInfo.manufacturer"><div class="text-bold">Fabricante</div><div class="h4">\n{{ vm.device.deviceInfo.manufacturer}}</div></div><div class="mb-8" flex ng-if=" vm.device.deviceInfo.serialNumber">\n<div class="text-bold">Número de serie</div><div class="h4">{{ vm.device.deviceInfo.serialNumber}}</div></div><div \nclass="mb-8" flex ng-if=" vm.device.deviceInfo.model"><div class="text-bold">Modelo</div><div class="h4">\n{{ vm.device.deviceInfo.model}}</div></div><div class="mb-8" flex ng-if="vm.newDevice"><div class="text-bold">\nSeñal de autenticación</div><div class="h4">{{ vm.device.authToken || "Se generará"}}</div></div><div class="mb-8" \nflex><div class="text-bold">Geolocalización</div><div class="h4">\nCoordenadas: {{vm.device.location.latitude}} , {{vm.device.location.longitude}}</div></div></form></md-tab-body>\n</md-tab></md-tabs><div class="navigation" flex layout="row" layout-align="center center"><md-button \nclass="md-raised md-accent" ng-click="msWizard.previousStep()" ng-disabled="msWizard.isFirstStep()">Atrás</md-button>\n<div class="steps"><span ng-repeat="form in msWizard.forms" \nng-class="{\'selected md-accent-bg\':msWizard.selectedIndex === $index}"></span></div><md-button \nclass="md-raised md-accent" ng-click="msWizard.nextStep()" ng-hide="msWizard.isLastStep()" \nng-disabled="msWizard.currentStepInvalid()">Siguiente</md-button><md-button class="md-raised md-accent" \nng-if="vm.newDevice" ng-click="vm.register($event)" ng-show="msWizard.isLastStep()" \nng-disabled="msWizard.formsIncomplete()">Registrar</md-button><md-button class="md-raised md-accent" \nng-if="!vm.newDevice" ng-click="vm.update($event)" ng-show="msWizard.isLastStep()" \nng-disabled="msWizard.formsIncomplete() ">Actualizar</md-button></div></ms-form-wizard></md-dialog-content></md-dialog>'),e.put("app/main/pages/nodes/nodes-list/nodes-list.html",'<div id="nodes-list" class="page-layout simple fullwidth"><div class="header md-accent-bg" layout="row" \nlayout-align="space-between"><div layout="column" layout-align="center start"><div class="h1" layout="row" \nlayout-align="start center"><md-icon class="light" md-font-icon="icono-senal2-HaibuSmart"></md-icon><span>Nodos</span>\n</div></div><div layout="row" layout-align="start center"><md-button \nclass="md-raised md-secondary smart-button-outline" ng-click="vm.dialogDevice($event)"><span>Registrar Kit</span>\n</md-button></div></div><div class="content"><div layout="row" flex="100" layout-wrap><div layout="column" flex="100" \nflex-gt-xs="50" flex-gt-md="25" layout="column" flex="100" flex-gt-xs="50" flex-gt-md="25" \nng-repeat="device in vm.devices "><div class="white-bg m-8"><md-list-item class="md-2-line" ng-if="!device.loadEvent">\n<div class="md-list-item-text text" layout="column"><h3 class="h4 pt-16 text-semi">{{device.name}}</h3><h4 class="h6">\n{{device.event.data.length?"Última actualización":"Sin registros"}}<p class="h5 text-semi" ng-if="device.event.data">\n<span am-time-ago="device.event.timestamp"></span></p></h4></div><md-menu class="pt-16"><md-button \nclass="md-icon-button" ng-click="$mdOpenMenu()" md-menu-origin md-menu-align-target aria-label="Options"><md-icon \nmd-font-icon="icon-dots-vertical" class="icon"></md-icon></md-button><md-menu-content width="3"><md-menu-item>\n<md-button ng-click="vm.refreshLastEvent($event,device)"><md-icon md-font-icon="icono-refrescar-HaibuSmart" \nclass="icon"></md-icon>Refrescar</md-button></md-menu-item><md-menu-item ng-if="!device.isFollow"><md-button \nng-click="vm.config($event,device)"><md-icon md-font-icon="icon-share" class="icon"></md-icon>Configuración</md-button>\n</md-menu-item><md-menu-item><md-button ng-click="vm.unregister($event,device)"><md-icon \nmd-font-icon="icono-sin-HaibuSmart" class="icon"></md-icon>Eliminar</md-button></md-menu-item><md-menu-item><md-button \nng-click="vm.dialogDevice($event,device)"><md-icon md-font-icon="icono-engranaje2-HaibuSmart" class="icon"></md-icon>\nEditar</md-button></md-menu-item></md-menu-content></md-menu></md-list-item><div ng-if="!device.loadEvent"><div \nclass="pb-8" layout="column" layout-align="center center" ng-if="device.event.data.length"><div \nclass="text-center font-size-62 line-height-62 primary-text font-weight-400 text-semi">\n{{device.event.data[0].value | number : 1}}{{device.event.data[0].id| parseUnits:vm.sensors:true}}</div><div \nclass="h1 text-center text-bold"><span>{{device.event.data[0].id| parseUnits:vm.sensors}}</span><md-icon \nclass="animated infinite pulse {{device.event.timestamp | colorState:device.event.data[0].alert }}" \nmd-font-icon="icon-brightness-1"></md-icon></div></div><div class="text-center pb-8"><md-button \nclass="md-raised md-secondary smart-button" ng-click="vm.detalle($event,device)">Ver Detalle</md-button></div></div>\n<div layout="row" class="p-16" layout-align="space-around" ng-if="device.loadEvent"><md-progress-circular \nmd-mode="indeterminate" md-diameter="90"></md-progress-circular></div></div></div></div></div></div>'),e.put("app/main/pages/rules/rules-create/rules-create.html",'<div id="rules-create" class="page-layout simple fullwidth"><div class="header md-accent-bg" layout="row" \nlayout-align="space-between"><div layout="column" layout-align="center start"><div class="h1" layout="row" \nlayout-align="start center"><md-icon class="light" md-font-icon="icono-medir2-HaibuSmart"></md-icon><span>\n{{vm.isEdit?"Editar Regla":"Crear Regla"}}</span></div></div><div layout="row" layout-align="start center"><md-button \nng-if="vm.isEdit" class="light" ng-click="vm.deleteRule($event)"><span>Eliminar Regla</span></md-button></div></div>\n<div class="content"><md-card><form name="ruleForm" class="md-inline-form" novalidate><md-toolbar class="md-accent">\n<div class="md-toolbar-tools" layout="row" layout-align="space-between center"><h4 class="title"><span>\nInformacion Básica</span></h4></div></md-toolbar><div class="p-16"><md-input-container class="md-block"><label>Nombre\n</label><input name="name" ng-model="vm.rule.name" type="text" required><div ng-messages="ruleForm.name.$error" \nrole="alert"><div ng-message="required"><span>El nombre es requerido.</span></div></div></md-input-container>\n<md-input-container class="md-block"><label>Descripción</label><input name="description" \nng-model="vm.rule.description" type="text"></md-input-container><md-input-container class="md-block"><label>\nSe aplicará en el nodo</label><md-select name="deviceId" ng-model="vm.rule.device" type="text" \nng-change="vm.changeDevice()" required ng-model-options="{trackBy: \'$value.deviceId\'}"><md-option \nng-repeat="device in  vm.devices" ng-value="{{device}}">{{device.name}}</md-option></md-select></md-input-container>\n</div></form></md-card><md-card class="mt-16" ng-if="vm.rule.device"><form name="conditionForm" class="md-inline-form" \nnovalidate><md-toolbar class="md-accent"><div class="md-toolbar-tools" layout="row" \nlayout-align="space-between center"><h4 class="title"><span>Condición</span></h4></div></md-toolbar><div class="p-16">\n<md-input-container class="md-block"><label>Propiedad</label><md-select name="property" \nng-model="vm.condition.property" type="text" required><md-option ng-repeat="data in  vm.rule.device.event.data" \nvalue="{{data.id}}">{{data.id}}</md-option></md-select></md-input-container><md-input-container class="md-block">\n<label>Operación</label><md-select name="operation" ng-model="vm.condition.operation" type="text" required><md-option \nng-repeat="operation in  vm.operations" value="{{operation}}">{{operation}}</md-option></md-select>\n</md-input-container><md-input-container class="md-block"><label>Comprar con</label><md-select name="comparison" \nng-model="vm.condition.comparison" type="text" required><md-option ng-repeat="comparison in  vm.comparisons" \nvalue="{{comparison.id}}">{{comparison.text}}</md-option></md-select></md-input-container><md-input-container \nclass="md-block" ng-if="vm.condition.comparison == \'property\'"><label>Propiedad</label><md-select \nname="propertyComparison" ng-model="vm.condition.propertyComparison" type="text" required><md-option \nng-repeat="data in  vm.rule.device.event.data" value="{{data.id}}">{{data.id}}</md-option></md-select>\n</md-input-container><md-input-container class="md-block" ng-if="vm.condition.comparison == \'static\'"><label>Valor\n</label><input name="propertyComparison" ng-model="vm.condition.propertyComparison" type="number" required><div \nng-messages="propertyComparison.value.$error" role="alert"><div ng-message="required"><span>El valor es requerido.\n</span></div></div></md-input-container><md-button type="submit" ng-click="vm.saveRule($event)" \nclass="md-raised md-secondary smart-button submit-button" ng-disabled="conditionForm.$invalid  || ruleForm.$invalid ">\nGUARDAR</md-button></div></form></md-card></div></div>'),e.put("app/main/pages/rules/rules-list/rules-list.html",'<div id="ruler-list" class="page-layout simple fullwidth"><div class="header md-accent-bg" layout="row" \nlayout-align="space-between"><div layout="column" layout-align="center start"><div class="h1" layout="row" \nlayout-align="start center"><md-icon class="light" md-font-icon="icono-medir2-HaibuSmart"></md-icon><span>Reglas</span>\n</div></div><div layout="row" layout-align="start center"><md-button \nclass="md-raised md-secondary smart-button-outline" ng-click="vm.goCreate()"><span>Agregar Regla</span></md-button>\n</div></div><div class="content" scroll><md-card><md-table-container><table md-table \nmd-row-select="vm.options.rowSelection" multiple="{{vm.options.multiSelect}}" md-progress="vm.promise" \nng-model="vm.selected"><thead md-head md-order="vm.query.order"><tr md-row><th md-column>Nombre</th><th md-column>\nDescripción</th><th md-column>Regla</th></tr></thead><tbody md-body><tr md-row md-select="item" \nmd-on-select="vm.logItem" md-auto-select="vm.options.autoSelect" \nng-repeat="rule in  vm.rules | filter: vm.query.filter | orderBy: vm.query.order | limitTo: vm.query.limit : (vm.query.page -1) * vm.query.limit" \nng-click="vm.editRule($event, rule)"><td md-cell>{{rule.name}}</td><td md-cell>{{rule.description}}</td><td md-cell>\n{{rule.condition}}</td></tr></tbody></table></md-table-container><md-table-pagination \nmd-label="{page: \'Página:\', rowsPerPage: \'Filas por página:\', of: \'de\'}" md-limit="vm.query.limit" \nmd-limit-options="[5, 10, 15]" md-page="vm.query.page" md-total="{{vm.rules.length}}" md-page-select \nmd-on-paginate="vm.getEvents"></md-table-pagination></md-card></div></div>'),e.put("app/core/directives/ms-card/templates/template-1/template-1.html",'<div class="template-1"><div class="media"><img class="image" ng-src="{{card.media.image.src}}" \nalt="{{card.media.image.alt}}" ng-show="card.media.image"></div><div class="content pv-24 ph-16"><div class="title h1" \nng-if="card.title">{{card.title}}</div><div class="subtitle secondary-text" ng-if="card.subtitle">{{card.subtitle}}\n</div><div class="text pt-16" ng-if="card.text">{{card.text}}</div></div></div>'),e.put("app/core/directives/ms-card/templates/template-10/template-10.html",'<div class="template-10 p-16"><div class="pb-16" layout="row" layout-align="space-between center"><div class="info">\n<div class="title secondary-text" ng-if="card.title">{{card.title}}</div><div class="subtitle h2" \nng-if="card.subtitle">{{card.subtitle}}</div></div><div class="media ml-16"><img class="image" \nng-src="{{card.media.image.src}}" alt="{{card.media.image.alt}}" ng-show="card.media.image"></div></div><div \nclass="text">{{card.text}}</div></div>'),e.put("app/core/directives/ms-card/templates/template-2/template-2.html",'<div class="template-2"><div class="header p-16" layout="row" layout-align="start center"><div ng-if="card.avatar"><img\n class="avatar mr-16" ng-src="{{card.avatar.src}}" alt="{{card.avatar.alt}}"></div><div class="info"><div \nclass="title" ng-if="card.title">{{card.title}}</div><div class="subtitle secondary-text" ng-if="card.subtitle">\n{{card.subtitle}}</div></div></div><div class="media"><img class="image" ng-src="{{card.media.image.src}}" \nalt="{{card.media.image.alt}}" ng-show="card.media.image"></div><div class="text p-16" ng-if="card.text">{{card.text}}\n</div></div>'),e.put("app/core/directives/ms-card/templates/template-3/template-3.html",'<div class="template-3 p-16 teal-bg white-fg" layout="row" layout-align="space-between"><div layout="column" \nlayout-align="space-between"><div class="info"><div class="title h1" ng-if="card.title">{{card.title}}</div><div \nclass="subtitle h3 secondary-text" ng-if="card.subtitle">{{card.subtitle}}</div></div><div class="cta"><md-button \nclass="m-0">{{card.cta}}</md-button></div></div><div class="media pl-16"><img class="image" \nng-src="{{card.media.image.src}}" alt="{{card.media.image.alt}}" ng-show="card.media.image"></div></div>'),e.put("app/core/directives/ms-card/templates/template-4/template-4.html",'<div class="template-4"><div class="info white-fg ph-16 pv-24"><div class="title h1" ng-if="card.title">{{card.title}}\n</div><div class="text" ng-if="card.text">{{card.text}}</div></div><div class="media"><img class="image" \nng-src="{{card.media.image.src}}" alt="{{card.media.image.alt}}" ng-show="card.media.image"></div></div>'),e.put("app/core/directives/ms-card/templates/template-5/template-5.html",'<div class="template-5 p-16" layout="row" layout-align="space-between start"><div class="info"><div \nclass="title secondary-text" ng-if="card.title">{{card.title}}</div><div class="event h2" ng-if="card.event">\n{{card.event}}</div></div><div class="media ml-16"><img class="image" ng-src="{{card.media.image.src}}" \nalt="{{card.media.image.alt}}" ng-show="card.media.image"></div></div>'),e.put("app/core/directives/ms-card/templates/template-6/template-6.html",'<div class="template-6"><div class="content pv-24 ph-16"><div class="subtitle secondary-text" ng-if="card.subtitle">\n{{card.subtitle}}</div><div class="title h2" ng-if="card.title">{{card.title}}</div><div class="text pt-8" \nng-if="card.text">{{card.text}}</div></div></div>'),e.put("app/core/directives/ms-card/templates/template-7/template-7.html",'<div class="template-7" layout="row" layout-align="space-between"><div class="info" layout="column" \nlayout-align="space-between" layout-fill flex><div class="p-16"><div class="title h1" ng-if="card.title">{{card.title}}\n</div><div class="subtitle h4 secondary-text" ng-if="card.subtitle">{{card.subtitle}}</div><div class="text h4 pt-8" \nng-if="card.text">{{card.text}}</div></div><div><md-divider></md-divider><div class="p-8" layout="row"><md-icon \nmd-font-icon="icon-star-outline" class="mh-5"></md-icon><md-icon md-font-icon="icon-star-outline" class="mh-5">\n</md-icon><md-icon md-font-icon="icon-star-outline" class="mh-5"></md-icon><md-icon md-font-icon="icon-star-outline" \nclass="mh-5"></md-icon><md-icon md-font-icon="icon-star-outline" class="mh-5"></md-icon></div></div></div><div \nclass="media"><img class="image" ng-src="{{card.media.image.src}}" alt="{{card.media.image.alt}}" \nng-show="card.media.image"></div></div>'),e.put("app/core/directives/ms-card/templates/template-8/template-8.html",'<div class="template-8"><div class="media"><img class="image" ng-src="{{card.media.image.src}}" \nalt="{{card.media.image.alt}}" ng-show="card.media.image"></div><div class="content pv-24 ph-16"><div class="title h1" \nng-if="card.title">{{card.title}}</div><div class="subtitle secondary-text" ng-if="card.subtitle">{{card.subtitle}}\n</div><div class="buttons pt-16"><md-button class="m-0">{{card.button1}}</md-button><md-button class="m-0 md-accent">\n{{card.button2}}</md-button></div><div class="text pt-16" ng-if="card.text">{{card.text}}</div></div></div>'),e.put("app/core/directives/ms-card/templates/template-9/template-9.html",'<div class="template-9"><div class="header p-16" layout="row" layout-align="start center"><div ng-if="card.avatar"><img\n class="avatar mr-16" ng-src="{{card.avatar.src}}" alt="{{card.avatar.alt}}"></div><div class="info"><div \nclass="title" ng-if="card.title">{{card.title}}</div><div class="subtitle secondary-text" ng-if="card.subtitle">\n{{card.subtitle}}</div></div></div><div class="text ph-16 pb-16" ng-if="card.text">{{card.text}}</div><div \nclass="media"><img class="image" ng-src="{{card.media.image.src}}" alt="{{card.media.image.alt}}" \nng-show="card.media.image"></div><div class="buttons m-8"><md-button class="md-icon-button mr-16" \naria-label="Favorite"><md-icon md-font-icon="icon-heart-outline" class="s24"></md-icon></md-button><md-button \nclass="md-icon-button" aria-label="Share"><md-icon md-font-icon="icon-share" class="s24"></md-icon></md-button></div>\n</div>'),e.put("app/core/directives/ms-stepper/templates/horizontal/horizontal.html",'<div class="ms-stepper-horizontal"><div class="ms-stepper-navigation-wrapper"><div class="ms-stepper-navigation" \nlayout="row" layout-align="center center"><md-button class="ms-stepper-navigation-item" \nng-class="{\'current\': MsStepper.isStepCurrent(step.stepNumber), \'valid\': MsStepper.isStepValid(step.stepNumber), \'disabled\': MsStepper.isStepDisabled(step.stepNumber), \'optional\': MsStepper.isStepOptional(step.stepNumber)}" \nng-click="MsStepper.gotoStep(step.stepNumber)" ng-disabled="MsStepper.isStepDisabled(step.stepNumber)" \nng-repeat="step in MsStepper.steps | filter:MsStepper.filterHiddenStep" layout="row" layout-align="start center"><div \nclass="step md-accent-bg" layout="row" layout-align="center center"><span \nng-if="!MsStepper.isStepValid(step.stepNumber) || MsStepper.isStepOptional(step.stepNumber)">{{$index + 1}} </span>\n<span ng-if="MsStepper.isStepValid(step.stepNumber) && !MsStepper.isStepOptional(step.stepNumber)"><i \nclass="icon icon-check s18"></i></span></div><div layout="column" layout-align="start start"><div class="title" \ntranslate="{{step.stepTitleTranslate}}">{{step.stepTitle}}</div><div class="subtitle" \nng-if="MsStepper.isStepOptional(step.stepNumber)">Optional</div></div></md-button></div></div><div \nclass="ms-stepper-steps" ng-transclude></div><div class="ms-stepper-controls" layout="row" \nlayout-align="center center"><md-button class="md-accent md-raised" ng-disabled="MsStepper.isFirstStep()" \nng-click="MsStepper.gotoPreviousStep()">Back</md-button><div class="ms-stepper-dots"><span \nng-repeat="step in MsStepper.steps" ng-hide="MsStepper.isStepHidden(step.stepNumber)" \nng-class="{\'selected md-accent-bg\':MsStepper.currentStepNumber === $index + 1}"></span></div><md-button \nclass="md-accent md-raised" ng-if="!MsStepper.isLastStep()" \nng-disabled="!MsStepper.isStepValid(MsStepper.currentStepNumber)" ng-click="MsStepper.gotoNextStep()">Next</md-button>\n<md-button type="submit" class="md-accent md-raised" ng-click="MsStepper.resetForm()" ng-if="MsStepper.isLastStep()" \nng-disabled="!MsStepper.isFormValid()">Submit</md-button></div></div>'),e.put("app/core/directives/ms-stepper/templates/vertical/vertical.html",'<div class="ms-stepper-vertical"><div class="ms-stepper-vertical-line"></div><div class="ms-stepper-steps" \nng-transclude></div></div>'),e.put("app/main/pages/rules/rules-create/dialogs/conditionItem.html",'<md-dialog class="condition-dialog" aria-label="Nuevo Item"><form name="conditionForm" class="md-inline-form" \nnovalidate><md-toolbar class="md-accent" layout="column"><div class="md-toolbar-tools" layout="row" \nlayout-align="space-between center"><span class="title">{{vm.title}}</span><md-button class="md-icon-button" \nng-click="vm.closeDialog()" aria-label="Cerrar dialog"><md-icon md-font-icon="icon-close"></md-icon></md-button></div>\n</md-toolbar><md-dialog-content ms-scroll><md-input-container class="md-block"><label>Propiedad</label><md-select \nname="property" ng-model="vm.condition.property" type="text" required><md-option \nng-repeat="data in  vm.device.event.data" value="{{data.id}}">{{data.id}}</md-option></md-select></md-input-container>\n<md-input-container class="md-block"><label>Operación</label><md-select name="operation" \nng-model="vm.condition.operation" type="text" required><md-option ng-repeat="operation in  vm.operations" \nvalue="{{operation}}">{{operation}}</md-option></md-select></md-input-container><md-input-container class="md-block">\n<label>Comprar con</label><md-select name="comparison" ng-model="vm.condition.comparison" type="text" required>\n<md-option ng-repeat="comparison in  vm.comparisons" value="{{comparison.id}}">{{comparison.text}}</md-option>\n</md-select></md-input-container><md-input-container class="md-block" ng-if="vm.condition.comparison == \'property\'">\n<label>Propiedad</label><md-select name="propertyComparison" ng-model="vm.condition.propertyComparison" type="text" \nrequired><md-option ng-repeat="data in  vm.device.event.data" value="{{data.id}}">{{data.id}}</md-option></md-select>\n</md-input-container><md-input-container class="md-block" ng-if="vm.condition.comparison == \'static\'"><label>Valor\n</label><input name="value" ng-model="vm.condition.value" type="text" required><div \nng-messages="conditionForm.value.$error" role="alert"><div ng-message="required"><span>El valor es requerido.</span>\n</div></div></md-input-container></md-dialog-content><md-dialog-actions layout="row" \nlayout-align="space-between center"><div layout="row" layout-align="start center"><md-button type="submit" \nng-if="!vm.newCondition" ng-click="vm.saveCondition()" class="send-button md-accent md-raised" \nng-disabled="conditionForm.$invalid || conditionForm.$pristine">GUARDAR</md-button><md-button type="submit" \nng-if="vm.newCondition" ng-click="vm.addNewCondition()" class="send-button md-accent md-raised" \nng-disabled="conditionForm.$invalid || conditionForm.$pristine">Agregar Condición</md-button></div><div layout="row">\n<md-button class="md-icon-button" ng-click="vm.deleteConfirm($event)"><md-icon md-font-icon="icon-delete"></md-icon>\n<md-tooltip>BORRAR</md-tooltip></md-button></div></md-dialog-actions></form></md-dialog>'),e.put("app/core/directives/ms-stepper/templates/vertical/step/vertical-step.html",'<md-button class="ms-stepper-navigation-item" \nng-class="{\'current\': MsStepper.isStepCurrent(stepInfo.stepNumber), \'valid\': MsStepper.isStepValid(stepInfo.stepNumber), \'disabled\': MsStepper.isStepDisabled(stepInfo.stepNumber), \'optional\': MsStepper.isStepOptional(stepInfo.stepNumber)}" \nng-click="MsStepper.gotoStep(stepInfo.stepNumber)" ng-disabled="MsStepper.isStepDisabled(stepInfo.stepNumber)" \nng-hide="MsStepper.isStepHidden(stepInfo.stepNumber)" aria-label="Stepper navigation button" layout="row" \nlayout-align="start center"><div class="step" layout="row" layout-align="center center"><span \nng-if="!MsStepper.isStepValid(stepInfo.stepNumber) || MsStepper.isStepOptional(stepInfo.stepNumber)"><i \nclass="icon icon-checkbox-blank-circle-outline s18 md-accent-fg"></i> </span><span \nng-if="MsStepper.isStepValid(stepInfo.stepNumber) && !MsStepper.isStepOptional(stepInfo.stepNumber)"><i \nclass="icon icon-check-circle s18 md-accent-fg"></i></span></div><div layout="column" layout-align="start start"><div \nclass="title" ng-if="stepInfo.stepTitleTranslate">{{stepInfo.stepTitleTranslate | translate }}</div><div class="title" \nng-if="!stepInfo.stepTitleTranslate">{{stepInfo.stepTitle}}</div><div class="subtitle" \nng-if="MsStepper.isStepOptional(stepInfo.stepNumber)">Optional</div></div></md-button><div \nclass="ms-stepper-step-content" ng-transclude></div><div class="ms-stepper-controls" layout="row" \nlayout-align="start center" ng-show="MsStepper.isStepCurrent(stepInfo.stepNumber)"><md-button \nclass="md-accent md-raised" ng-disabled="MsStepper.isFirstStep()" ng-click="MsStepper.gotoPreviousStep()">Back\n</md-button><md-button class="md-accent md-raised" ng-if="!MsStepper.isLastStep()" \nng-disabled="!MsStepper.isStepValid(MsStepper.currentStepNumber)" ng-click="MsStepper.gotoNextStep()">Next</md-button>\n<md-button type="submit" class="md-accent md-raised" ng-click="MsStepper.resetForm()" ng-if="MsStepper.isLastStep()" \nng-disabled="!MsStepper.isFormValid()">Submit</md-button></div>');
}]);
//# sourceMappingURL=../maps/scripts/app-c8cc4ecc32.js.map
